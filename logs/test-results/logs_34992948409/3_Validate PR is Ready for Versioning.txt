2025-02-27T19:34:10.3458169Z Current runner version: '2.322.0'
2025-02-27T19:34:10.3482654Z ##[group]Operating System
2025-02-27T19:34:10.3483497Z Ubuntu
2025-02-27T19:34:10.3484003Z 24.04.2
2025-02-27T19:34:10.3484482Z LTS
2025-02-27T19:34:10.3485029Z ##[endgroup]
2025-02-27T19:34:10.3485689Z ##[group]Runner Image
2025-02-27T19:34:10.3486236Z Image: ubuntu-24.04
2025-02-27T19:34:10.3486833Z Version: 20250223.1.0
2025-02-27T19:34:10.3487894Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250223.1/images/ubuntu/Ubuntu2404-Readme.md
2025-02-27T19:34:10.3489286Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250223.1
2025-02-27T19:34:10.3490222Z ##[endgroup]
2025-02-27T19:34:10.3490710Z ##[group]Runner Image Provisioner
2025-02-27T19:34:10.3491333Z 2.0.422.1
2025-02-27T19:34:10.3491836Z ##[endgroup]
2025-02-27T19:34:10.3492879Z ##[group]GITHUB_TOKEN Permissions
2025-02-27T19:34:10.3494819Z Contents: read
2025-02-27T19:34:10.3495531Z Metadata: read
2025-02-27T19:34:10.3496324Z Packages: read
2025-02-27T19:34:10.3496884Z ##[endgroup]
2025-02-27T19:34:10.3499713Z Secret source: Actions
2025-02-27T19:34:10.3500414Z Prepare workflow directory
2025-02-27T19:34:10.3809258Z Prepare all required actions
2025-02-27T19:34:10.3846295Z Getting action download info
2025-02-27T19:34:10.5663313Z Download action repository 'actions/checkout@v3' (SHA:f43a0e5ff2bd294095638e18286ca9a3d1956744)
2025-02-27T19:34:10.6573249Z Download action repository 'actions/setup-node@v3' (SHA:1a4442cacd436585916779262731d5b162bc6ec7)
2025-02-27T19:34:10.8174492Z Complete job name: Validate PR is Ready for Versioning
2025-02-27T19:34:10.8955912Z ##[group]Run actions/checkout@v3
2025-02-27T19:34:10.8956796Z with:
2025-02-27T19:34:10.8957209Z   repository: aaron-hogan/idle-game
2025-02-27T19:34:10.8957865Z   token: ***
2025-02-27T19:34:10.8958260Z   ssh-strict: true
2025-02-27T19:34:10.8958679Z   persist-credentials: true
2025-02-27T19:34:10.8959140Z   clean: true
2025-02-27T19:34:10.8959551Z   sparse-checkout-cone-mode: true
2025-02-27T19:34:10.8960048Z   fetch-depth: 1
2025-02-27T19:34:10.8960449Z   fetch-tags: false
2025-02-27T19:34:10.8960843Z   lfs: false
2025-02-27T19:34:10.8961229Z   submodules: false
2025-02-27T19:34:10.8961706Z   set-safe-directory: true
2025-02-27T19:34:10.8962556Z ##[endgroup]
2025-02-27T19:34:11.0697850Z Syncing repository: aaron-hogan/idle-game
2025-02-27T19:34:11.0700420Z ##[group]Getting Git version info
2025-02-27T19:34:11.0701144Z Working directory is '/home/runner/work/idle-game/idle-game'
2025-02-27T19:34:11.0702416Z [command]/usr/bin/git version
2025-02-27T19:34:11.0742191Z git version 2.48.1
2025-02-27T19:34:11.0772820Z ##[endgroup]
2025-02-27T19:34:11.0791003Z Temporarily overriding HOME='/home/runner/work/_temp/f33d460c-3155-4a67-b061-305f516db700' before making global git config changes
2025-02-27T19:34:11.0793391Z Adding repository directory to the temporary git global config as a safe directory
2025-02-27T19:34:11.0795612Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-27T19:34:11.0829610Z Deleting the contents of '/home/runner/work/idle-game/idle-game'
2025-02-27T19:34:11.0833562Z ##[group]Initializing the repository
2025-02-27T19:34:11.0837511Z [command]/usr/bin/git init /home/runner/work/idle-game/idle-game
2025-02-27T19:34:11.0900384Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-02-27T19:34:11.0901715Z hint: is subject to change. To configure the initial branch name to use in all
2025-02-27T19:34:11.0902984Z hint: of your new repositories, which will suppress this warning, call:
2025-02-27T19:34:11.0904198Z hint:
2025-02-27T19:34:11.0905028Z hint: 	git config --global init.defaultBranch <name>
2025-02-27T19:34:11.0906199Z hint:
2025-02-27T19:34:11.0907102Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-02-27T19:34:11.0908211Z hint: 'development'. The just-created branch can be renamed via this command:
2025-02-27T19:34:11.0908905Z hint:
2025-02-27T19:34:11.0909588Z hint: 	git branch -m <name>
2025-02-27T19:34:11.0910307Z Initialized empty Git repository in /home/runner/work/idle-game/idle-game/.git/
2025-02-27T19:34:11.0915825Z [command]/usr/bin/git remote add origin https://github.com/aaron-hogan/idle-game
2025-02-27T19:34:11.0947719Z ##[endgroup]
2025-02-27T19:34:11.0948449Z ##[group]Disabling automatic garbage collection
2025-02-27T19:34:11.0950474Z [command]/usr/bin/git config --local gc.auto 0
2025-02-27T19:34:11.0980041Z ##[endgroup]
2025-02-27T19:34:11.0980727Z ##[group]Setting up auth
2025-02-27T19:34:11.0985518Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-27T19:34:11.1012068Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-27T19:34:11.1295561Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-27T19:34:11.1326329Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-27T19:34:11.1552490Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-02-27T19:34:11.1585977Z ##[endgroup]
2025-02-27T19:34:11.1587067Z ##[group]Fetching the repository
2025-02-27T19:34:11.1594720Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --progress --no-recurse-submodules --depth=1 origin +f73e399e6bb3e14ffe43c3621ba72311e98bca8f:refs/remotes/pull/78/merge
2025-02-27T19:34:11.6592034Z remote: Enumerating objects: 591, done.        
2025-02-27T19:34:11.6594150Z remote: Counting objects:   0% (1/591)        
2025-02-27T19:34:11.6596197Z remote: Counting objects:   1% (6/591)        
2025-02-27T19:34:11.6597474Z remote: Counting objects:   2% (12/591)        
2025-02-27T19:34:11.6598764Z remote: Counting objects:   3% (18/591)        
2025-02-27T19:34:11.6599684Z remote: Counting objects:   4% (24/591)        
2025-02-27T19:34:11.6600397Z remote: Counting objects:   5% (30/591)        
2025-02-27T19:34:11.6601102Z remote: Counting objects:   6% (36/591)        
2025-02-27T19:34:11.6601807Z remote: Counting objects:   7% (42/591)        
2025-02-27T19:34:11.6602513Z remote: Counting objects:   8% (48/591)        
2025-02-27T19:34:11.6603213Z remote: Counting objects:   9% (54/591)        
2025-02-27T19:34:11.6603912Z remote: Counting objects:  10% (60/591)        
2025-02-27T19:34:11.6604623Z remote: Counting objects:  11% (66/591)        
2025-02-27T19:34:11.6605537Z remote: Counting objects:  12% (71/591)        
2025-02-27T19:34:11.6606245Z remote: Counting objects:  13% (77/591)        
2025-02-27T19:34:11.6606939Z remote: Counting objects:  14% (83/591)        
2025-02-27T19:34:11.6607637Z remote: Counting objects:  15% (89/591)        
2025-02-27T19:34:11.6608332Z remote: Counting objects:  16% (95/591)        
2025-02-27T19:34:11.6609028Z remote: Counting objects:  17% (101/591)        
2025-02-27T19:34:11.6609743Z remote: Counting objects:  18% (107/591)        
2025-02-27T19:34:11.6610401Z remote: Counting objects:  19% (113/591)        
2025-02-27T19:34:11.6610966Z remote: Counting objects:  20% (119/591)        
2025-02-27T19:34:11.6611542Z remote: Counting objects:  21% (125/591)        
2025-02-27T19:34:11.6612122Z remote: Counting objects:  22% (131/591)        
2025-02-27T19:34:11.6612691Z remote: Counting objects:  23% (136/591)        
2025-02-27T19:34:11.6613296Z remote: Counting objects:  24% (142/591)        
2025-02-27T19:34:11.6613861Z remote: Counting objects:  25% (148/591)        
2025-02-27T19:34:11.6614423Z remote: Counting objects:  26% (154/591)        
2025-02-27T19:34:11.6614983Z remote: Counting objects:  27% (160/591)        
2025-02-27T19:34:11.6615731Z remote: Counting objects:  28% (166/591)        
2025-02-27T19:34:11.6616308Z remote: Counting objects:  29% (172/591)        
2025-02-27T19:34:11.6617114Z remote: Counting objects:  30% (178/591)        
2025-02-27T19:34:11.6617680Z remote: Counting objects:  31% (184/591)        
2025-02-27T19:34:11.6618242Z remote: Counting objects:  32% (190/591)        
2025-02-27T19:34:11.6618793Z remote: Counting objects:  33% (196/591)        
2025-02-27T19:34:11.6619354Z remote: Counting objects:  34% (201/591)        
2025-02-27T19:34:11.6619911Z remote: Counting objects:  35% (207/591)        
2025-02-27T19:34:11.6620465Z remote: Counting objects:  36% (213/591)        
2025-02-27T19:34:11.6621087Z remote: Counting objects:  37% (219/591)        
2025-02-27T19:34:11.6621677Z remote: Counting objects:  38% (225/591)        
2025-02-27T19:34:11.6622235Z remote: Counting objects:  39% (231/591)        
2025-02-27T19:34:11.6622791Z remote: Counting objects:  40% (237/591)        
2025-02-27T19:34:11.6623353Z remote: Counting objects:  41% (243/591)        
2025-02-27T19:34:11.6623962Z remote: Counting objects:  42% (249/591)        
2025-02-27T19:34:11.6624530Z remote: Counting objects:  43% (255/591)        
2025-02-27T19:34:11.6625249Z remote: Counting objects:  44% (261/591)        
2025-02-27T19:34:11.6625840Z remote: Counting objects:  45% (266/591)        
2025-02-27T19:34:11.6626411Z remote: Counting objects:  46% (272/591)        
2025-02-27T19:34:11.6626977Z remote: Counting objects:  47% (278/591)        
2025-02-27T19:34:11.6627642Z remote: Counting objects:  48% (284/591)        
2025-02-27T19:34:11.6628209Z remote: Counting objects:  49% (290/591)        
2025-02-27T19:34:11.6628932Z remote: Counting objects:  50% (296/591)        
2025-02-27T19:34:11.6629525Z remote: Counting objects:  51% (302/591)        
2025-02-27T19:34:11.6630105Z remote: Counting objects:  52% (308/591)        
2025-02-27T19:34:11.6630680Z remote: Counting objects:  53% (314/591)        
2025-02-27T19:34:11.6631253Z remote: Counting objects:  54% (320/591)        
2025-02-27T19:34:11.6631815Z remote: Counting objects:  55% (326/591)        
2025-02-27T19:34:11.6632386Z remote: Counting objects:  56% (331/591)        
2025-02-27T19:34:11.6632951Z remote: Counting objects:  57% (337/591)        
2025-02-27T19:34:11.6633513Z remote: Counting objects:  58% (343/591)        
2025-02-27T19:34:11.6634077Z remote: Counting objects:  59% (349/591)        
2025-02-27T19:34:11.6634669Z remote: Counting objects:  60% (355/591)        
2025-02-27T19:34:11.6635408Z remote: Counting objects:  61% (361/591)        
2025-02-27T19:34:11.6635997Z remote: Counting objects:  62% (367/591)        
2025-02-27T19:34:11.6636568Z remote: Counting objects:  63% (373/591)        
2025-02-27T19:34:11.6637155Z remote: Counting objects:  64% (379/591)        
2025-02-27T19:34:11.6637719Z remote: Counting objects:  65% (385/591)        
2025-02-27T19:34:11.6638291Z remote: Counting objects:  66% (391/591)        
2025-02-27T19:34:11.6638851Z remote: Counting objects:  67% (396/591)        
2025-02-27T19:34:11.6719883Z remote: Counting objects:  68% (402/591)        
2025-02-27T19:34:11.6720986Z remote: Counting objects:  69% (408/591)        
2025-02-27T19:34:11.6722194Z remote: Counting objects:  70% (414/591)        
2025-02-27T19:34:11.6723330Z remote: Counting objects:  71% (420/591)        
2025-02-27T19:34:11.6724151Z remote: Counting objects:  72% (426/591)        
2025-02-27T19:34:11.6724750Z remote: Counting objects:  73% (432/591)        
2025-02-27T19:34:11.6725570Z remote: Counting objects:  74% (438/591)        
2025-02-27T19:34:11.6726154Z remote: Counting objects:  75% (444/591)        
2025-02-27T19:34:11.6726752Z remote: Counting objects:  76% (450/591)        
2025-02-27T19:34:11.6727329Z remote: Counting objects:  77% (456/591)        
2025-02-27T19:34:11.6727901Z remote: Counting objects:  78% (461/591)        
2025-02-27T19:34:11.6728483Z remote: Counting objects:  79% (467/591)        
2025-02-27T19:34:11.6729038Z remote: Counting objects:  80% (473/591)        
2025-02-27T19:34:11.6729604Z remote: Counting objects:  81% (479/591)        
2025-02-27T19:34:11.6730236Z remote: Counting objects:  82% (485/591)        
2025-02-27T19:34:11.6731013Z remote: Counting objects:  83% (491/591)        
2025-02-27T19:34:11.6731593Z remote: Counting objects:  84% (497/591)        
2025-02-27T19:34:11.6732157Z remote: Counting objects:  85% (503/591)        
2025-02-27T19:34:11.6732781Z remote: Counting objects:  86% (509/591)        
2025-02-27T19:34:11.6733351Z remote: Counting objects:  87% (515/591)        
2025-02-27T19:34:11.6733914Z remote: Counting objects:  88% (521/591)        
2025-02-27T19:34:11.6734477Z remote: Counting objects:  89% (526/591)        
2025-02-27T19:34:11.6735250Z remote: Counting objects:  90% (532/591)        
2025-02-27T19:34:11.6735857Z remote: Counting objects:  91% (538/591)        
2025-02-27T19:34:11.6736424Z remote: Counting objects:  92% (544/591)        
2025-02-27T19:34:11.6736991Z remote: Counting objects:  93% (550/591)        
2025-02-27T19:34:11.6737550Z remote: Counting objects:  94% (556/591)        
2025-02-27T19:34:11.6738110Z remote: Counting objects:  95% (562/591)        
2025-02-27T19:34:11.6738674Z remote: Counting objects:  96% (568/591)        
2025-02-27T19:34:11.6739265Z remote: Counting objects:  97% (574/591)        
2025-02-27T19:34:11.6739897Z remote: Counting objects:  98% (580/591)        
2025-02-27T19:34:11.6740513Z remote: Counting objects:  99% (586/591)        
2025-02-27T19:34:11.6741500Z remote: Counting objects: 100% (591/591)        
2025-02-27T19:34:11.6742681Z remote: Counting objects: 100% (591/591), done.        
2025-02-27T19:34:11.6743836Z remote: Compressing objects:   0% (1/566)        
2025-02-27T19:34:11.6745849Z remote: Compressing objects:   1% (6/566)        
2025-02-27T19:34:11.6747154Z remote: Compressing objects:   2% (12/566)        
2025-02-27T19:34:11.6748276Z remote: Compressing objects:   3% (17/566)        
2025-02-27T19:34:11.6749389Z remote: Compressing objects:   4% (23/566)        
2025-02-27T19:34:11.6750511Z remote: Compressing objects:   5% (29/566)        
2025-02-27T19:34:11.6751672Z remote: Compressing objects:   6% (34/566)        
2025-02-27T19:34:11.6752830Z remote: Compressing objects:   7% (40/566)        
2025-02-27T19:34:11.6753973Z remote: Compressing objects:   8% (46/566)        
2025-02-27T19:34:11.6755070Z remote: Compressing objects:   9% (51/566)        
2025-02-27T19:34:11.6756466Z remote: Compressing objects:  10% (57/566)        
2025-02-27T19:34:11.6757613Z remote: Compressing objects:  11% (63/566)        
2025-02-27T19:34:11.6758766Z remote: Compressing objects:  12% (68/566)        
2025-02-27T19:34:11.6759964Z remote: Compressing objects:  13% (74/566)        
2025-02-27T19:34:11.6761138Z remote: Compressing objects:  14% (80/566)        
2025-02-27T19:34:11.7036558Z remote: Compressing objects:  15% (85/566)        
2025-02-27T19:34:11.7038212Z remote: Compressing objects:  16% (91/566)        
2025-02-27T19:34:11.7039355Z remote: Compressing objects:  17% (97/566)        
2025-02-27T19:34:11.7040269Z remote: Compressing objects:  18% (102/566)        
2025-02-27T19:34:11.7041029Z remote: Compressing objects:  19% (108/566)        
2025-02-27T19:34:11.7041766Z remote: Compressing objects:  20% (114/566)        
2025-02-27T19:34:11.7042498Z remote: Compressing objects:  21% (119/566)        
2025-02-27T19:34:11.7043218Z remote: Compressing objects:  22% (125/566)        
2025-02-27T19:34:11.7044176Z remote: Compressing objects:  23% (131/566)        
2025-02-27T19:34:11.7045052Z remote: Compressing objects:  24% (136/566)        
2025-02-27T19:34:11.7046428Z remote: Compressing objects:  25% (142/566)        
2025-02-27T19:34:11.7047254Z remote: Compressing objects:  26% (148/566)        
2025-02-27T19:34:11.7047982Z remote: Compressing objects:  27% (153/566)        
2025-02-27T19:34:11.7048710Z remote: Compressing objects:  28% (159/566)        
2025-02-27T19:34:11.7049587Z remote: Compressing objects:  29% (165/566)        
2025-02-27T19:34:11.7050441Z remote: Compressing objects:  30% (170/566)        
2025-02-27T19:34:11.7051448Z remote: Compressing objects:  31% (176/566)        
2025-02-27T19:34:11.7052335Z remote: Compressing objects:  32% (182/566)        
2025-02-27T19:34:11.7052915Z remote: Compressing objects:  33% (187/566)        
2025-02-27T19:34:11.7053501Z remote: Compressing objects:  34% (193/566)        
2025-02-27T19:34:11.7054082Z remote: Compressing objects:  35% (199/566)        
2025-02-27T19:34:11.7054673Z remote: Compressing objects:  36% (204/566)        
2025-02-27T19:34:11.7055494Z remote: Compressing objects:  37% (210/566)        
2025-02-27T19:34:11.7056091Z remote: Compressing objects:  38% (216/566)        
2025-02-27T19:34:11.7056686Z remote: Compressing objects:  39% (221/566)        
2025-02-27T19:34:11.7057266Z remote: Compressing objects:  40% (227/566)        
2025-02-27T19:34:11.7057855Z remote: Compressing objects:  41% (233/566)        
2025-02-27T19:34:11.7058551Z remote: Compressing objects:  42% (238/566)        
2025-02-27T19:34:11.7059581Z remote: Compressing objects:  43% (244/566)        
2025-02-27T19:34:11.7060665Z remote: Compressing objects:  44% (250/566)        
2025-02-27T19:34:11.7061748Z remote: Compressing objects:  45% (255/566)        
2025-02-27T19:34:11.7062795Z remote: Compressing objects:  46% (261/566)        
2025-02-27T19:34:11.7063816Z remote: Compressing objects:  47% (267/566)        
2025-02-27T19:34:11.7064780Z remote: Compressing objects:  48% (272/566)        
2025-02-27T19:34:11.7066073Z remote: Compressing objects:  49% (278/566)        
2025-02-27T19:34:11.7067168Z remote: Compressing objects:  50% (283/566)        
2025-02-27T19:34:11.7068252Z remote: Compressing objects:  51% (289/566)        
2025-02-27T19:34:11.7069726Z remote: Compressing objects:  52% (295/566)        
2025-02-27T19:34:11.7070829Z remote: Compressing objects:  53% (300/566)        
2025-02-27T19:34:11.7071872Z remote: Compressing objects:  54% (306/566)        
2025-02-27T19:34:11.7072938Z remote: Compressing objects:  55% (312/566)        
2025-02-27T19:34:11.7073998Z remote: Compressing objects:  56% (317/566)        
2025-02-27T19:34:11.7075085Z remote: Compressing objects:  57% (323/566)        
2025-02-27T19:34:11.7075982Z remote: Compressing objects:  58% (329/566)        
2025-02-27T19:34:11.7161450Z remote: Compressing objects:  59% (334/566)        
2025-02-27T19:34:11.7162410Z remote: Compressing objects:  60% (340/566)        
2025-02-27T19:34:11.7163431Z remote: Compressing objects:  61% (346/566)        
2025-02-27T19:34:11.7164110Z remote: Compressing objects:  62% (351/566)        
2025-02-27T19:34:11.7164720Z remote: Compressing objects:  63% (357/566)        
2025-02-27T19:34:11.7165541Z remote: Compressing objects:  64% (363/566)        
2025-02-27T19:34:11.7166154Z remote: Compressing objects:  65% (368/566)        
2025-02-27T19:34:11.7166778Z remote: Compressing objects:  66% (374/566)        
2025-02-27T19:34:11.7167371Z remote: Compressing objects:  67% (380/566)        
2025-02-27T19:34:11.7167963Z remote: Compressing objects:  68% (385/566)        
2025-02-27T19:34:11.7168543Z remote: Compressing objects:  69% (391/566)        
2025-02-27T19:34:11.7169139Z remote: Compressing objects:  70% (397/566)        
2025-02-27T19:34:11.7169738Z remote: Compressing objects:  71% (402/566)        
2025-02-27T19:34:11.7175488Z remote: Compressing objects:  72% (408/566)        
2025-02-27T19:34:11.7180921Z remote: Compressing objects:  73% (414/566)        
2025-02-27T19:34:11.7184790Z remote: Compressing objects:  74% (419/566)        
2025-02-27T19:34:11.7187424Z remote: Compressing objects:  75% (425/566)        
2025-02-27T19:34:11.7194130Z remote: Compressing objects:  76% (431/566)        
2025-02-27T19:34:11.7199481Z remote: Compressing objects:  77% (436/566)        
2025-02-27T19:34:11.7209835Z remote: Compressing objects:  78% (442/566)        
2025-02-27T19:34:11.7211391Z remote: Compressing objects:  79% (448/566)        
2025-02-27T19:34:11.7212415Z remote: Compressing objects:  80% (453/566)        
2025-02-27T19:34:11.7215841Z remote: Compressing objects:  81% (459/566)        
2025-02-27T19:34:11.7216926Z remote: Compressing objects:  82% (465/566)        
2025-02-27T19:34:11.7221095Z remote: Compressing objects:  83% (470/566)        
2025-02-27T19:34:11.7222171Z remote: Compressing objects:  84% (476/566)        
2025-02-27T19:34:11.7223185Z remote: Compressing objects:  85% (482/566)        
2025-02-27T19:34:11.7224836Z remote: Compressing objects:  86% (487/566)        
2025-02-27T19:34:11.7226494Z remote: Compressing objects:  87% (493/566)        
2025-02-27T19:34:11.7227914Z remote: Compressing objects:  88% (499/566)        
2025-02-27T19:34:11.7229057Z remote: Compressing objects:  89% (504/566)        
2025-02-27T19:34:11.7230093Z remote: Compressing objects:  90% (510/566)        
2025-02-27T19:34:11.7230710Z remote: Compressing objects:  91% (516/566)        
2025-02-27T19:34:11.7231296Z remote: Compressing objects:  92% (521/566)        
2025-02-27T19:34:11.7231883Z remote: Compressing objects:  93% (527/566)        
2025-02-27T19:34:11.7232464Z remote: Compressing objects:  94% (533/566)        
2025-02-27T19:34:11.7233045Z remote: Compressing objects:  95% (538/566)        
2025-02-27T19:34:11.7233627Z remote: Compressing objects:  96% (544/566)        
2025-02-27T19:34:11.7234198Z remote: Compressing objects:  97% (550/566)        
2025-02-27T19:34:11.7234767Z remote: Compressing objects:  98% (555/566)        
2025-02-27T19:34:11.7235536Z remote: Compressing objects:  99% (561/566)        
2025-02-27T19:34:11.7236131Z remote: Compressing objects: 100% (566/566)        
2025-02-27T19:34:11.7236757Z remote: Compressing objects: 100% (566/566), done.        
2025-02-27T19:34:11.7285289Z Receiving objects:   0% (1/591)
2025-02-27T19:34:11.7287061Z Receiving objects:   1% (6/591)
2025-02-27T19:34:11.7619021Z Receiving objects:   2% (12/591)
2025-02-27T19:34:11.7620631Z Receiving objects:   3% (18/591)
2025-02-27T19:34:11.7756874Z Receiving objects:   4% (24/591)
2025-02-27T19:34:11.7781988Z Receiving objects:   5% (30/591)
2025-02-27T19:34:11.7784393Z Receiving objects:   6% (36/591)
2025-02-27T19:34:11.7787379Z Receiving objects:   7% (42/591)
2025-02-27T19:34:11.7794299Z Receiving objects:   8% (48/591)
2025-02-27T19:34:11.7795914Z Receiving objects:   9% (54/591)
2025-02-27T19:34:11.7799665Z Receiving objects:  10% (60/591)
2025-02-27T19:34:11.7802028Z Receiving objects:  11% (66/591)
2025-02-27T19:34:11.7838945Z Receiving objects:  12% (71/591)
2025-02-27T19:34:11.7841157Z Receiving objects:  13% (77/591)
2025-02-27T19:34:11.8179051Z Receiving objects:  14% (83/591)
2025-02-27T19:34:11.8189533Z Receiving objects:  15% (89/591)
2025-02-27T19:34:11.8306280Z Receiving objects:  16% (95/591)
2025-02-27T19:34:11.8328278Z Receiving objects:  17% (101/591)
2025-02-27T19:34:11.8337801Z Receiving objects:  18% (107/591)
2025-02-27T19:34:11.8339812Z Receiving objects:  19% (113/591)
2025-02-27T19:34:11.8342422Z Receiving objects:  20% (119/591)
2025-02-27T19:34:11.8354552Z Receiving objects:  21% (125/591)
2025-02-27T19:34:11.8357162Z Receiving objects:  22% (131/591)
2025-02-27T19:34:11.8359757Z Receiving objects:  23% (136/591)
2025-02-27T19:34:11.8362338Z Receiving objects:  24% (142/591)
2025-02-27T19:34:11.8364403Z Receiving objects:  25% (148/591)
2025-02-27T19:34:11.8368220Z Receiving objects:  26% (154/591)
2025-02-27T19:34:11.8370932Z Receiving objects:  27% (160/591)
2025-02-27T19:34:11.8373350Z Receiving objects:  28% (166/591)
2025-02-27T19:34:11.8375060Z Receiving objects:  29% (172/591)
2025-02-27T19:34:11.8378155Z Receiving objects:  30% (178/591)
2025-02-27T19:34:11.8381569Z Receiving objects:  31% (184/591)
2025-02-27T19:34:11.8386238Z Receiving objects:  32% (190/591)
2025-02-27T19:34:11.8387964Z Receiving objects:  33% (196/591)
2025-02-27T19:34:11.8390785Z Receiving objects:  34% (201/591)
2025-02-27T19:34:11.8411238Z Receiving objects:  35% (207/591)
2025-02-27T19:34:11.8749313Z Receiving objects:  36% (213/591)
2025-02-27T19:34:11.8751791Z Receiving objects:  37% (219/591)
2025-02-27T19:34:11.8912019Z Receiving objects:  38% (225/591)
2025-02-27T19:34:11.8914510Z Receiving objects:  39% (231/591)
2025-02-27T19:34:11.8918236Z Receiving objects:  40% (237/591)
2025-02-27T19:34:11.8920728Z Receiving objects:  41% (243/591)
2025-02-27T19:34:11.8933746Z Receiving objects:  42% (249/591)
2025-02-27T19:34:11.8935671Z Receiving objects:  43% (255/591)
2025-02-27T19:34:11.8939754Z Receiving objects:  44% (261/591)
2025-02-27T19:34:11.8941438Z Receiving objects:  45% (266/591)
2025-02-27T19:34:11.8943571Z Receiving objects:  46% (272/591)
2025-02-27T19:34:11.8945315Z Receiving objects:  47% (278/591)
2025-02-27T19:34:11.8948282Z Receiving objects:  48% (284/591)
2025-02-27T19:34:11.8949147Z Receiving objects:  49% (290/591)
2025-02-27T19:34:11.8950162Z Receiving objects:  50% (296/591)
2025-02-27T19:34:11.8951257Z Receiving objects:  51% (302/591)
2025-02-27T19:34:11.8953857Z Receiving objects:  52% (308/591)
2025-02-27T19:34:11.8956783Z Receiving objects:  53% (314/591)
2025-02-27T19:34:11.8961932Z Receiving objects:  54% (320/591)
2025-02-27T19:34:11.8964228Z Receiving objects:  55% (326/591)
2025-02-27T19:34:11.8966033Z Receiving objects:  56% (331/591)
2025-02-27T19:34:11.8969422Z Receiving objects:  57% (337/591)
2025-02-27T19:34:11.8971513Z Receiving objects:  58% (343/591)
2025-02-27T19:34:11.8973537Z Receiving objects:  59% (349/591)
2025-02-27T19:34:11.8975002Z Receiving objects:  60% (355/591)
2025-02-27T19:34:11.8977110Z Receiving objects:  61% (361/591)
2025-02-27T19:34:11.8979738Z Receiving objects:  62% (367/591)
2025-02-27T19:34:11.8981431Z Receiving objects:  63% (373/591)
2025-02-27T19:34:11.8984157Z Receiving objects:  64% (379/591)
2025-02-27T19:34:11.8985346Z Receiving objects:  65% (385/591)
2025-02-27T19:34:11.8986317Z Receiving objects:  66% (391/591)
2025-02-27T19:34:11.8987315Z Receiving objects:  67% (396/591)
2025-02-27T19:34:11.8988314Z Receiving objects:  68% (402/591)
2025-02-27T19:34:11.8990880Z Receiving objects:  69% (408/591)
2025-02-27T19:34:11.8995909Z Receiving objects:  70% (414/591)
2025-02-27T19:34:11.8998472Z Receiving objects:  71% (420/591)
2025-02-27T19:34:11.8999877Z Receiving objects:  72% (426/591)
2025-02-27T19:34:11.9003085Z Receiving objects:  73% (432/591)
2025-02-27T19:34:11.9006350Z Receiving objects:  74% (438/591)
2025-02-27T19:34:11.9009760Z Receiving objects:  75% (444/591)
2025-02-27T19:34:11.9010609Z Receiving objects:  76% (450/591)
2025-02-27T19:34:11.9012841Z Receiving objects:  77% (456/591)
2025-02-27T19:34:11.9014075Z Receiving objects:  78% (461/591)
2025-02-27T19:34:11.9018607Z Receiving objects:  79% (467/591)
2025-02-27T19:34:11.9021933Z Receiving objects:  80% (473/591)
2025-02-27T19:34:11.9023162Z Receiving objects:  81% (479/591)
2025-02-27T19:34:11.9024236Z Receiving objects:  82% (485/591)
2025-02-27T19:34:11.9027144Z Receiving objects:  83% (491/591)
2025-02-27T19:34:11.9028336Z Receiving objects:  84% (497/591)
2025-02-27T19:34:11.9030363Z Receiving objects:  85% (503/591)
2025-02-27T19:34:11.9032968Z Receiving objects:  86% (509/591)
2025-02-27T19:34:11.9036176Z Receiving objects:  87% (515/591)
2025-02-27T19:34:11.9037587Z Receiving objects:  88% (521/591)
2025-02-27T19:34:11.9320453Z Receiving objects:  89% (526/591)
2025-02-27T19:34:11.9322193Z Receiving objects:  90% (532/591)
2025-02-27T19:34:11.9325980Z Receiving objects:  91% (538/591)
2025-02-27T19:34:11.9334097Z Receiving objects:  92% (544/591)
2025-02-27T19:34:11.9340143Z Receiving objects:  93% (550/591)
2025-02-27T19:34:11.9450419Z Receiving objects:  94% (556/591)
2025-02-27T19:34:11.9454261Z Receiving objects:  95% (562/591)
2025-02-27T19:34:11.9456288Z remote: Total 591 (delta 16), reused 434 (delta 14), pack-reused 0 (from 0)        
2025-02-27T19:34:11.9459515Z Receiving objects:  96% (568/591)
2025-02-27T19:34:11.9462540Z Receiving objects:  97% (574/591)
2025-02-27T19:34:11.9464880Z Receiving objects:  98% (580/591)
2025-02-27T19:34:11.9468010Z Receiving objects:  99% (586/591)
2025-02-27T19:34:11.9470195Z Receiving objects: 100% (591/591)
2025-02-27T19:34:11.9471536Z Receiving objects: 100% (591/591), 731.57 KiB | 3.28 MiB/s, done.
2025-02-27T19:34:11.9472662Z Resolving deltas:   0% (0/16)
2025-02-27T19:34:11.9474560Z Resolving deltas:   6% (1/16)
2025-02-27T19:34:11.9475628Z Resolving deltas:  12% (2/16)
2025-02-27T19:34:11.9476419Z Resolving deltas:  18% (3/16)
2025-02-27T19:34:11.9477176Z Resolving deltas:  25% (4/16)
2025-02-27T19:34:11.9478889Z Resolving deltas:  31% (5/16)
2025-02-27T19:34:11.9479924Z Resolving deltas:  37% (6/16)
2025-02-27T19:34:11.9480743Z Resolving deltas:  43% (7/16)
2025-02-27T19:34:11.9481485Z Resolving deltas:  56% (9/16)
2025-02-27T19:34:11.9482247Z Resolving deltas:  62% (10/16)
2025-02-27T19:34:11.9482726Z Resolving deltas:  68% (11/16)
2025-02-27T19:34:11.9483197Z Resolving deltas:  75% (12/16)
2025-02-27T19:34:11.9483954Z Resolving deltas:  81% (13/16)
2025-02-27T19:34:11.9484738Z Resolving deltas:  87% (14/16)
2025-02-27T19:34:11.9485664Z Resolving deltas: 100% (16/16)
2025-02-27T19:34:11.9486444Z Resolving deltas: 100% (16/16), done.
2025-02-27T19:34:11.9617637Z From https://github.com/aaron-hogan/idle-game
2025-02-27T19:34:11.9618661Z  * [new ref]         f73e399e6bb3e14ffe43c3621ba72311e98bca8f -> pull/78/merge
2025-02-27T19:34:11.9644195Z ##[endgroup]
2025-02-27T19:34:11.9644920Z ##[group]Determining the checkout info
2025-02-27T19:34:11.9646810Z ##[endgroup]
2025-02-27T19:34:11.9647531Z ##[group]Checking out the ref
2025-02-27T19:34:11.9651217Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/78/merge
2025-02-27T19:34:11.9964884Z Note: switching to 'refs/remotes/pull/78/merge'.
2025-02-27T19:34:11.9966166Z 
2025-02-27T19:34:11.9966742Z You are in 'detached HEAD' state. You can look around, make experimental
2025-02-27T19:34:11.9968206Z changes and commit them, and you can discard any commits you make in this
2025-02-27T19:34:11.9970305Z state without impacting any branches by switching back to a branch.
2025-02-27T19:34:11.9971496Z 
2025-02-27T19:34:11.9972271Z If you want to create a new branch to retain commits you create, you may
2025-02-27T19:34:11.9974012Z do so (now or later) by using -c with the switch command. Example:
2025-02-27T19:34:11.9975509Z 
2025-02-27T19:34:11.9976017Z   git switch -c <new-branch-name>
2025-02-27T19:34:11.9976707Z 
2025-02-27T19:34:11.9977075Z Or undo this operation with:
2025-02-27T19:34:11.9977592Z 
2025-02-27T19:34:11.9977881Z   git switch -
2025-02-27T19:34:11.9978270Z 
2025-02-27T19:34:11.9978924Z Turn off this advice by setting config variable advice.detachedHead to false
2025-02-27T19:34:11.9979872Z 
2025-02-27T19:34:11.9980968Z HEAD is now at f73e399 Merge a3095fa873568973de1df0051a8861d8b5e686be into 6628444a17d134ac096dc30bf65aed147f076662
2025-02-27T19:34:11.9983930Z ##[endgroup]
2025-02-27T19:34:12.0012274Z [command]/usr/bin/git log -1 --format='%H'
2025-02-27T19:34:12.0033951Z 'f73e399e6bb3e14ffe43c3621ba72311e98bca8f'
2025-02-27T19:34:12.0266553Z ##[group]Run actions/setup-node@v3
2025-02-27T19:34:12.0267080Z with:
2025-02-27T19:34:12.0267426Z   node-version: 16
2025-02-27T19:34:12.0267818Z   always-auth: false
2025-02-27T19:34:12.0268216Z   check-latest: false
2025-02-27T19:34:12.0268780Z   token: ***
2025-02-27T19:34:12.0269138Z ##[endgroup]
2025-02-27T19:34:12.2048283Z Attempting to download 16...
2025-02-27T19:34:12.8583656Z Acquiring 16.20.2 - x64 from https://github.com/actions/node-versions/releases/download/16.20.2-5819740093/node-16.20.2-linux-x64.tar.gz
2025-02-27T19:34:13.5971947Z Extracting ...
2025-02-27T19:34:13.6078941Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword -C /home/runner/work/_temp/55558c68-20c4-4deb-a6b6-7752f0550e61 -f /home/runner/work/_temp/6fb4a5da-1fa8-4488-9d28-1eb2c3bdcb30
2025-02-27T19:34:14.2601229Z Adding to the cache ...
2025-02-27T19:34:15.3006128Z ##[group]Environment details
2025-02-27T19:34:15.5929913Z node: v16.20.2
2025-02-27T19:34:15.5930614Z npm: 8.19.4
2025-02-27T19:34:15.5931086Z yarn: 1.22.22
2025-02-27T19:34:15.5931891Z ##[endgroup]
2025-02-27T19:34:15.6086592Z ##[group]Run npm ci
2025-02-27T19:34:15.6086935Z [36;1mnpm ci[0m
2025-02-27T19:34:15.6138889Z shell: /usr/bin/bash -e {0}
2025-02-27T19:34:15.6139210Z ##[endgroup]
2025-02-27T19:34:16.3864283Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3865608Z npm WARN EBADENGINE   package: '@eslint/config-array@0.19.2',
2025-02-27T19:34:16.3866728Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3867737Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3868390Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3868952Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3869721Z npm WARN EBADENGINE   package: '@eslint/core@0.12.0',
2025-02-27T19:34:16.3870652Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3871687Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3872385Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3873115Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3873923Z npm WARN EBADENGINE   package: '@eslint/eslintrc@3.3.0',
2025-02-27T19:34:16.3874890Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3876091Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3876803Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3877407Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3878135Z npm WARN EBADENGINE   package: 'globals@14.0.0',
2025-02-27T19:34:16.3878907Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.3879782Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3880402Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3880969Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3881693Z npm WARN EBADENGINE   package: '@eslint/js@9.21.0',
2025-02-27T19:34:16.3882661Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3883690Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3884304Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3884876Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3885998Z npm WARN EBADENGINE   package: '@eslint/object-schema@2.1.6',
2025-02-27T19:34:16.3887013Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3888001Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3888721Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3889301Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3890049Z npm WARN EBADENGINE   package: '@eslint/plugin-kit@0.2.7',
2025-02-27T19:34:16.3891051Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3891996Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3892622Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3895750Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3896540Z npm WARN EBADENGINE   package: '@humanfs/core@0.19.1',
2025-02-27T19:34:16.3897355Z npm WARN EBADENGINE   required: { node: '>=18.18.0' },
2025-02-27T19:34:16.3898297Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3898942Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3899522Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3900287Z npm WARN EBADENGINE   package: '@humanfs/node@0.16.6',
2025-02-27T19:34:16.3901100Z npm WARN EBADENGINE   required: { node: '>=18.18.0' },
2025-02-27T19:34:16.3901927Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3902572Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3903178Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3903981Z npm WARN EBADENGINE   package: '@humanwhocodes/retry@0.3.1',
2025-02-27T19:34:16.3904807Z npm WARN EBADENGINE   required: { node: '>=18.18' },
2025-02-27T19:34:16.3906325Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3907076Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3907708Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3908503Z npm WARN EBADENGINE   package: '@humanwhocodes/retry@0.4.2',
2025-02-27T19:34:16.3909628Z npm WARN EBADENGINE   required: { node: '>=18.18' },
2025-02-27T19:34:16.3910461Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3911094Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3915978Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3916912Z npm WARN EBADENGINE   package: '@testing-library/dom@10.4.0',
2025-02-27T19:34:16.3917754Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.3918629Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3919289Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3919862Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3920706Z npm WARN EBADENGINE   package: '@testing-library/react@16.2.0',
2025-02-27T19:34:16.3921541Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.3922397Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3923101Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3924122Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3925314Z npm WARN EBADENGINE   package: '@typescript-eslint/eslint-plugin@8.25.0',
2025-02-27T19:34:16.3926426Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3927383Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3928026Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3928580Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3929427Z npm WARN EBADENGINE   package: '@typescript-eslint/parser@8.25.0',
2025-02-27T19:34:16.3930412Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3931373Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3932087Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3932654Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3933499Z npm WARN EBADENGINE   package: '@typescript-eslint/scope-manager@8.25.0',
2025-02-27T19:34:16.3934578Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3935766Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3936447Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3937028Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3937884Z npm WARN EBADENGINE   package: '@typescript-eslint/type-utils@8.25.0',
2025-02-27T19:34:16.3938931Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3939927Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3940564Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3941239Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3942163Z npm WARN EBADENGINE   package: '@typescript-eslint/types@8.25.0',
2025-02-27T19:34:16.3943210Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3944175Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3944830Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3945593Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3946533Z npm WARN EBADENGINE   package: '@typescript-eslint/typescript-estree@8.25.0',
2025-02-27T19:34:16.3980942Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3981981Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3982640Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3983264Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3984966Z npm WARN EBADENGINE   package: '@typescript-eslint/utils@8.25.0',
2025-02-27T19:34:16.3986207Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3987504Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3988267Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3988903Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3990089Z npm WARN EBADENGINE   package: '@typescript-eslint/visitor-keys@8.25.0',
2025-02-27T19:34:16.3991108Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3992095Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3992816Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3993438Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3994341Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:34:16.3995455Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.3996473Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.3997148Z npm WARN EBADENGINE }
2025-02-27T19:34:16.3997721Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.3998525Z npm WARN EBADENGINE   package: '@webpack-cli/configtest@3.0.1',
2025-02-27T19:34:16.3999379Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:34:16.4000298Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4000935Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4001462Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4002270Z npm WARN EBADENGINE   package: '@webpack-cli/info@3.0.1',
2025-02-27T19:34:16.4003122Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:34:16.4003960Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4004630Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4005376Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4006179Z npm WARN EBADENGINE   package: '@webpack-cli/serve@3.0.1',
2025-02-27T19:34:16.4007005Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:34:16.4007887Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4008546Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4009110Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4009821Z npm WARN EBADENGINE   package: 'bundle-name@4.1.0',
2025-02-27T19:34:16.4010599Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4011446Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4012070Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4012608Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4013293Z npm WARN EBADENGINE   package: 'css-loader@7.1.2',
2025-02-27T19:34:16.4014087Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:34:16.4014974Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4015878Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4016443Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4017176Z npm WARN EBADENGINE   package: 'default-browser@5.2.1',
2025-02-27T19:34:16.4017891Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4018682Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4019311Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4019929Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4020724Z npm WARN EBADENGINE   package: 'default-browser-id@5.0.0',
2025-02-27T19:34:16.4021510Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4022377Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4023038Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4023593Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4024254Z npm WARN EBADENGINE   package: 'eslint@9.21.0',
2025-02-27T19:34:16.4025315Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4026303Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4026926Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4027711Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4028475Z npm WARN EBADENGINE   package: 'eslint-scope@8.2.0',
2025-02-27T19:34:16.4029382Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4030565Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4031182Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4031714Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4032482Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:34:16.4033416Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4034342Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4034965Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4035743Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4036424Z npm WARN EBADENGINE   package: 'espree@10.3.0',
2025-02-27T19:34:16.4037286Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4038222Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4038898Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4039429Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4040210Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:34:16.4041142Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4042064Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4042683Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4053507Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4054271Z npm WARN EBADENGINE   package: 'open@10.1.0',
2025-02-27T19:34:16.4055039Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4056131Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4056782Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4062412Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4063263Z npm WARN EBADENGINE   package: 'react-router@7.2.0',
2025-02-27T19:34:16.4064102Z npm WARN EBADENGINE   required: { node: '>=20.0.0' },
2025-02-27T19:34:16.4064970Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4065842Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4066470Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4067297Z npm WARN EBADENGINE   package: 'react-router-dom@7.2.0',
2025-02-27T19:34:16.4068083Z npm WARN EBADENGINE   required: { node: '>=20.0.0' },
2025-02-27T19:34:16.4068957Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4069621Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4070204Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4070892Z npm WARN EBADENGINE   package: 'cookie@1.0.2',
2025-02-27T19:34:16.4071654Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4072524Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4073154Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4073770Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4074547Z npm WARN EBADENGINE   package: 'run-applescript@7.0.0',
2025-02-27T19:34:16.4075532Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4076394Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4077021Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4080685Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4081474Z npm WARN EBADENGINE   package: 'style-loader@4.0.0',
2025-02-27T19:34:16.4082266Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:34:16.4083159Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4083863Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4085522Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4086311Z npm WARN EBADENGINE   package: 'ts-api-utils@2.0.1',
2025-02-27T19:34:16.4087118Z npm WARN EBADENGINE   required: { node: '>=18.12' },
2025-02-27T19:34:16.4088256Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4088990Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4091232Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4092381Z npm WARN EBADENGINE   package: 'typescript-eslint@8.25.0',
2025-02-27T19:34:16.4093387Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:34:16.4094417Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4095078Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4095857Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4096608Z npm WARN EBADENGINE   package: 'webpack-cli@6.0.1',
2025-02-27T19:34:16.4097440Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:34:16.4098333Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4098942Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4099510Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4100299Z npm WARN EBADENGINE   package: 'commander@12.1.0',
2025-02-27T19:34:16.4101034Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:34:16.4101873Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4102559Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4103177Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4103982Z npm WARN EBADENGINE   package: 'webpack-dev-middleware@7.4.2',
2025-02-27T19:34:16.4104832Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:34:16.4105949Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4106575Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4107129Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4107907Z npm WARN EBADENGINE   package: 'webpack-dev-server@5.2.0',
2025-02-27T19:34:16.4108711Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:34:16.4109578Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4110243Z npm WARN EBADENGINE }
2025-02-27T19:34:16.4110807Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:34:16.4111514Z npm WARN EBADENGINE   package: 'webpack-merge@6.0.1',
2025-02-27T19:34:16.4112272Z npm WARN EBADENGINE   required: { node: '>=18.0.0' },
2025-02-27T19:34:16.4113125Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:34:16.4113746Z npm WARN EBADENGINE }
2025-02-27T19:34:19.5053007Z npm WARN deprecated react-testing-library@8.0.1: 🚨  react-testing-library has moved to @testing-library/react. Please uninstall react-testing-library and install @testing-library/react instead, or use an older version of react-testing-library. Learn more about this change here: https://github.com/testing-library/dom-testing-library/issues/260 Thanks! :)
2025-02-27T19:34:20.3860735Z npm WARN deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-02-27T19:34:20.6320858Z npm WARN deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-02-27T19:34:21.0438798Z npm WARN deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-02-27T19:34:21.5148178Z npm WARN deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-02-27T19:34:24.7726184Z 
2025-02-27T19:34:24.7726938Z added 900 packages, and audited 901 packages in 9s
2025-02-27T19:34:24.7727471Z 
2025-02-27T19:34:24.7727790Z 193 packages are looking for funding
2025-02-27T19:34:24.7728328Z   run `npm fund` for details
2025-02-27T19:34:24.7739460Z 
2025-02-27T19:34:24.7739841Z found 0 vulnerabilities
2025-02-27T19:34:24.8015662Z ##[group]Run npm test
2025-02-27T19:34:24.8016073Z [36;1mnpm test[0m
2025-02-27T19:34:24.8065881Z shell: /usr/bin/bash -e {0}
2025-02-27T19:34:24.8066158Z ##[endgroup]
2025-02-27T19:34:25.0606891Z 
2025-02-27T19:34:25.0607510Z > idle-game@0.5.0-4 test
2025-02-27T19:34:25.0608026Z > jest
2025-02-27T19:34:25.0608239Z 
2025-02-27T19:34:35.1096175Z FAIL src/systems/__tests__/workerManager.test.ts (8.838 s)
2025-02-27T19:34:35.1102306Z   ● WorkerManager › Worker counting › should get total available workers based on game stage
2025-02-27T19:34:35.1216077Z 
2025-02-27T19:34:35.1217114Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:34:35.1217977Z 
2025-02-27T19:34:35.1218910Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:34:35.1220143Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:34:35.1221869Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:34:35.1223286Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:35.1254856Z      [90m 145 |[39m   }
2025-02-27T19:34:35.1285935Z      [90m 146 |[39m   
2025-02-27T19:34:35.1309855Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:34:35.1310534Z 
2025-02-27T19:34:35.1311328Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:34:35.1312639Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:89:28)
2025-02-27T19:34:35.1313369Z 
2025-02-27T19:34:35.1314100Z   ● WorkerManager › Worker counting › should get total assigned workers
2025-02-27T19:34:35.1314795Z 
2025-02-27T19:34:35.1315480Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:35.1316337Z         at Function.values (<anonymous>)
2025-02-27T19:34:35.1316907Z 
2025-02-27T19:34:35.1317844Z     [0m [90m 153 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1318839Z      [90m 154 |[39m     
2025-02-27T19:34:35.1320114Z     [31m[1m>[22m[39m[90m 155 |[39m     [36mreturn[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mreduce(
2025-02-27T19:34:35.1321330Z      [90m     |[39m                   [31m[1m^[22m[39m
2025-02-27T19:34:35.1322508Z      [90m 156 |[39m       (total[33m:[39m number[33m,[39m structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:34:35.1324453Z      [90m 157 |[39m         [36mif[39m (structure [33m&&[39m [36mtypeof[39m structure [33m===[39m [32m'object'[39m [33m&&[39m [32m'workers'[39m [36min[39m structure [33m&&[39m 
2025-02-27T19:34:35.1326421Z      [90m 158 |[39m             [36mtypeof[39m structure[33m.[39mworkers [33m===[39m [32m'number'[39m) {[0m
2025-02-27T19:34:35.1327214Z 
2025-02-27T19:34:35.1331404Z       at WorkerManager.getTotalAssignedWorkers (src/systems/workerManager.ts:155:19)
2025-02-27T19:34:35.1332887Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:102:28)
2025-02-27T19:34:35.1333825Z 
2025-02-27T19:34:35.1336175Z   ● WorkerManager › Worker counting › should get remaining workers correctly
2025-02-27T19:34:35.1337230Z 
2025-02-27T19:34:35.1340137Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:34:35.1340642Z 
2025-02-27T19:34:35.1341298Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:34:35.1342312Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:34:35.1343634Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:34:35.1344749Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:35.1345927Z      [90m 145 |[39m   }
2025-02-27T19:34:35.1346393Z      [90m 146 |[39m   
2025-02-27T19:34:35.1346896Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:34:35.1347185Z 
2025-02-27T19:34:35.1347691Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:34:35.1348702Z       at WorkerManager.getRemainingWorkers (src/systems/workerManager.ts:172:17)
2025-02-27T19:34:35.1349626Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:118:28)
2025-02-27T19:34:35.1350394Z 
2025-02-27T19:34:35.1350955Z   ● WorkerManager › Worker assignment › should assign workers to buildings
2025-02-27T19:34:35.1351446Z 
2025-02-27T19:34:35.1351837Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1352320Z 
2025-02-27T19:34:35.1352579Z     [0m [90m 190 |[39m     
2025-02-27T19:34:35.1353426Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1354671Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1355842Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1356391Z      [90m 193 |[39m     
2025-02-27T19:34:35.1356972Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1357729Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1358114Z 
2025-02-27T19:34:35.1358611Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:35.1359567Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:137:36)
2025-02-27T19:34:35.1360026Z 
2025-02-27T19:34:35.1360627Z   ● WorkerManager › Worker assignment › should limit assignment to available workers
2025-02-27T19:34:35.1361152Z 
2025-02-27T19:34:35.1361537Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1362002Z 
2025-02-27T19:34:35.1362251Z     [0m [90m 190 |[39m     
2025-02-27T19:34:35.1363099Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1364353Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1365567Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1366141Z      [90m 193 |[39m     
2025-02-27T19:34:35.1366717Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1367455Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1367836Z 
2025-02-27T19:34:35.1368329Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:35.1369267Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:148:21)
2025-02-27T19:34:35.1369746Z 
2025-02-27T19:34:35.1370292Z   ● WorkerManager › Worker assignment › should limit assignment to maxWorkers
2025-02-27T19:34:35.1370794Z 
2025-02-27T19:34:35.1371187Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1371650Z 
2025-02-27T19:34:35.1371908Z     [0m [90m 190 |[39m     
2025-02-27T19:34:35.1372733Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1374056Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1375015Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1375755Z      [90m 193 |[39m     
2025-02-27T19:34:35.1376344Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1377105Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1377757Z 
2025-02-27T19:34:35.1378278Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:35.1379248Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:159:21)
2025-02-27T19:34:35.1379758Z 
2025-02-27T19:34:35.1380332Z   ● WorkerManager › Worker assignment › should handle nonexistent building
2025-02-27T19:34:35.1380813Z 
2025-02-27T19:34:35.1381227Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:34:35.1381993Z 
2025-02-27T19:34:35.1382276Z     [0m [90m 190 |[39m     
2025-02-27T19:34:35.1383128Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1384544Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1385787Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1386368Z      [90m 193 |[39m     
2025-02-27T19:34:35.1386973Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1387769Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1388159Z 
2025-02-27T19:34:35.1388688Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:35.1389688Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:169:36)
2025-02-27T19:34:35.1390197Z 
2025-02-27T19:34:35.1390748Z   ● WorkerManager › Changing worker count › should add workers by delta
2025-02-27T19:34:35.1391219Z 
2025-02-27T19:34:35.1391636Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1392115Z 
2025-02-27T19:34:35.1392383Z     [0m [90m 234 |[39m     
2025-02-27T19:34:35.1393255Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1394571Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1395832Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1396401Z      [90m 237 |[39m     
2025-02-27T19:34:35.1397003Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1397789Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1398209Z 
2025-02-27T19:34:35.1398653Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:35.1399580Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:189:21)
2025-02-27T19:34:35.1400068Z 
2025-02-27T19:34:35.1400607Z   ● WorkerManager › Changing worker count › should remove workers by delta
2025-02-27T19:34:35.1401094Z 
2025-02-27T19:34:35.1401496Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1401987Z 
2025-02-27T19:34:35.1402255Z     [0m [90m 234 |[39m     
2025-02-27T19:34:35.1403115Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1404404Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1405663Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1406273Z      [90m 237 |[39m     
2025-02-27T19:34:35.1406892Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1407759Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1408152Z 
2025-02-27T19:34:35.1408615Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:35.1409549Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:210:21)
2025-02-27T19:34:35.1410047Z 
2025-02-27T19:34:35.1410950Z   ● WorkerManager › Changing worker count › should limit addition by available workers
2025-02-27T19:34:35.1411531Z 
2025-02-27T19:34:35.1411933Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1412422Z 
2025-02-27T19:34:35.1412690Z     [0m [90m 234 |[39m     
2025-02-27T19:34:35.1413561Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.1415347Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1416345Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1416895Z      [90m 237 |[39m     
2025-02-27T19:34:35.1417501Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:35.1418241Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:35.1418625Z 
2025-02-27T19:34:35.1419077Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:35.1419980Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:231:21)
2025-02-27T19:34:35.1420463Z 
2025-02-27T19:34:35.1421068Z   ● WorkerManager › Worker efficiency › should calculate worker efficiency correctly
2025-02-27T19:34:35.1421564Z 
2025-02-27T19:34:35.1421961Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:35.1422446Z 
2025-02-27T19:34:35.1422820Z     [0m [90m 287 |[39m     
2025-02-27T19:34:35.1423716Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1424958Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1426164Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1426735Z      [90m 290 |[39m     
2025-02-27T19:34:35.1427701Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:34:35.1428693Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:34:35.1429074Z 
2025-02-27T19:34:35.1429597Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:34:35.1430602Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:246:28)
2025-02-27T19:34:35.1431104Z 
2025-02-27T19:34:35.1431784Z   ● WorkerManager › Worker efficiency › should handle nonexistent building for efficiency
2025-02-27T19:34:35.1432352Z 
2025-02-27T19:34:35.1432752Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:34:35.1433201Z 
2025-02-27T19:34:35.1433469Z     [0m [90m 287 |[39m     
2025-02-27T19:34:35.1434393Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1435900Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:35.1436893Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:35.1437438Z      [90m 290 |[39m     
2025-02-27T19:34:35.1438369Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:34:35.1439315Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:34:35.1439676Z 
2025-02-27T19:34:35.1440184Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:34:35.1441157Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:283:28)
2025-02-27T19:34:35.1441624Z 
2025-02-27T19:34:35.1442229Z   ● WorkerManager › Auto-assignment › should auto-assign with balanced strategy
2025-02-27T19:34:35.1442956Z 
2025-02-27T19:34:35.1443258Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:35.1443818Z         at Function.values (<anonymous>)
2025-02-27T19:34:35.1444110Z 
2025-02-27T19:34:35.1444355Z     [0m [90m 318 |[39m     
2025-02-27T19:34:35.1445396Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1447270Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:35.1449057Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:35.1449868Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:35.1450801Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:35.1451563Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:35.1451884Z 
2025-02-27T19:34:35.1452261Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:35.1453029Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:290:21)
2025-02-27T19:34:35.1453442Z 
2025-02-27T19:34:35.1453928Z   ● WorkerManager › Auto-assignment › should auto-assign with focused strategy
2025-02-27T19:34:35.1454392Z 
2025-02-27T19:34:35.1454668Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:35.1455418Z         at Function.values (<anonymous>)
2025-02-27T19:34:35.1455716Z 
2025-02-27T19:34:35.1455958Z     [0m [90m 318 |[39m     
2025-02-27T19:34:35.1456812Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1458681Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:35.1460023Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:35.1460768Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:35.1461658Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:35.1462501Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:35.1462871Z 
2025-02-27T19:34:35.1463294Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:35.1464242Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:310:21)
2025-02-27T19:34:35.1464718Z 
2025-02-27T19:34:35.1465452Z   ● WorkerManager › Auto-assignment › should auto-assign with efficiency strategy
2025-02-27T19:34:35.1465981Z 
2025-02-27T19:34:35.1466305Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:35.1466871Z         at Function.values (<anonymous>)
2025-02-27T19:34:35.1467176Z 
2025-02-27T19:34:35.1467408Z     [0m [90m 318 |[39m     
2025-02-27T19:34:35.1468263Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:35.1470134Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:35.1471690Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:35.1472509Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:35.1473439Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:35.1474534Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:35.1474935Z 
2025-02-27T19:34:35.1475559Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:35.1476471Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:331:21)
2025-02-27T19:34:35.1476959Z 
2025-02-27T19:34:35.5562724Z FAIL src/systems/resourceManager.test.ts (9.242 s)
2025-02-27T19:34:35.5564517Z   ● ResourceManager › initializeResources › dispatches addResource action for each initial resource
2025-02-27T19:34:35.5565392Z 
2025-02-27T19:34:35.5565729Z     TypeError: this.actions.addResource is not a function
2025-02-27T19:34:35.5566141Z 
2025-02-27T19:34:35.5568808Z     [0m [90m 153 |[39m     [33mObject[39m[33m.[39mvalues([33mINITIAL_RESOURCES[39m)[33m.[39mforEach(resource [33m=>[39m {
2025-02-27T19:34:35.5588207Z      [90m 154 |[39m       [36mif[39m (validateObject(resource[33m,[39m [[32m'id'[39m[33m,[39m [32m'name'[39m[33m,[39m [32m'amount'[39m[33m,[39m [32m'perSecond'[39m[33m,[39m [32m'unlocked'[39m][33m,[39m [32m'initializeResources'[39m)) {
2025-02-27T19:34:35.5592264Z     [31m[1m>[22m[39m[90m 155 |[39m         [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddResource(resource))[33m;[39m
2025-02-27T19:34:35.5595798Z      [90m     |[39m                                    [31m[1m^[22m[39m
2025-02-27T19:34:35.5598707Z      [90m 156 |[39m       }
2025-02-27T19:34:35.5601536Z      [90m 157 |[39m     })[33m;[39m
2025-02-27T19:34:35.5604320Z      [90m 158 |[39m   }[0m
2025-02-27T19:34:35.5606996Z 
2025-02-27T19:34:35.5609487Z       at src/systems/resourceManager.ts:155:36
2025-02-27T19:34:35.5612284Z           at Array.forEach (<anonymous>)
2025-02-27T19:34:35.5614896Z       at ResourceManager.initializeResources (src/systems/resourceManager.ts:153:38)
2025-02-27T19:34:35.5685959Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:54:23)
2025-02-27T19:34:35.5686457Z 
2025-02-27T19:34:35.5687352Z   ● ResourceManager › updateResources › updates resource amounts based on perSecond rates and elapsed time
2025-02-27T19:34:35.5688041Z 
2025-02-27T19:34:35.5688412Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:35.5688859Z 
2025-02-27T19:34:35.5689151Z     [0m [90m 178 |[39m     
2025-02-27T19:34:35.5690099Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:35.5692409Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:35.5694023Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:35.5694576Z      [90m 181 |[39m     
2025-02-27T19:34:35.5695337Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:35.5696281Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:35.5696753Z 
2025-02-27T19:34:35.5697218Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:35.5698103Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:105:23)
2025-02-27T19:34:35.5698570Z 
2025-02-27T19:34:35.5699540Z   ● ResourceManager › calculateResourceGeneration › calculates and updates resource generation rates based on structures
2025-02-27T19:34:35.5700340Z 
2025-02-27T19:34:35.5700650Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:35.5701244Z         at Function.values (<anonymous>)
2025-02-27T19:34:35.5701551Z 
2025-02-27T19:34:35.5701800Z     [0m [90m 251 |[39m     
2025-02-27T19:34:35.5702476Z      [90m 252 |[39m     [90m// Add production from all structures[39m
2025-02-27T19:34:35.5704112Z     [31m[1m>[22m[39m[90m 253 |[39m     [33mObject[39m[33m.[39mvalues(structures)[33m.[39mforEach((structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:34:35.5705551Z      [90m     |[39m            [31m[1m^[22m[39m
2025-02-27T19:34:35.5706550Z      [90m 254 |[39m       [90m// Skip structures that aren't built or don't have workers assigned[39m
2025-02-27T19:34:35.5707895Z      [90m 255 |[39m       [36mif[39m ([33m![39mstructure [33m||[39m [36mtypeof[39m structure [33m!==[39m [32m'object'[39m [33m||[39m
2025-02-27T19:34:35.5709725Z      [90m 256 |[39m           [33m![39m([32m'unlocked'[39m [36min[39m structure) [33m||[39m [33m![39m([32m'level'[39m [36min[39m structure) [33m||[39m[0m
2025-02-27T19:34:35.5710412Z 
2025-02-27T19:34:35.5710998Z       at ResourceManager.calculateResourceGeneration (src/systems/resourceManager.ts:253:12)
2025-02-27T19:34:35.5711995Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:197:23)
2025-02-27T19:34:35.5712471Z 
2025-02-27T19:34:35.5713180Z   ● ResourceManager › canAfford › returns true when all resources are available and sufficient
2025-02-27T19:34:35.5713795Z 
2025-02-27T19:34:35.5714236Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:35.5714805Z 
2025-02-27T19:34:35.5715929Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:35.5717335Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:35.5718532Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:35.5719501Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.5720899Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:35.5722100Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.5722763Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:35.5723040Z 
2025-02-27T19:34:35.5723462Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:35.5724285Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:256:38)
2025-02-27T19:34:35.5724733Z 
2025-02-27T19:34:35.5725514Z   ● ResourceManager › canAfford › returns false when any resource is insufficient
2025-02-27T19:34:35.5726051Z 
2025-02-27T19:34:35.5726483Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:35.5726999Z 
2025-02-27T19:34:35.5727907Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:35.5729269Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:35.5730483Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:35.5731435Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.5732821Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:35.5734084Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.5734735Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:35.5735016Z 
2025-02-27T19:34:35.5735645Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:35.5736521Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:297:38)
2025-02-27T19:34:35.5736978Z 
2025-02-27T19:34:35.5737875Z   ● ResourceManager › canAfford › returns false when any resource is not unlocked
2025-02-27T19:34:35.5738449Z 
2025-02-27T19:34:35.5738898Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:35.5739397Z 
2025-02-27T19:34:35.5740344Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:35.5741703Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:35.5743272Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:35.5744246Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.5745845Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:35.5747084Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.5747697Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:35.5747949Z 
2025-02-27T19:34:35.5748348Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:35.5749152Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:338:38)
2025-02-27T19:34:35.5749583Z 
2025-02-27T19:34:35.5750100Z   ● ResourceManager › canAfford › returns false when any resource is missing
2025-02-27T19:34:35.5750590Z 
2025-02-27T19:34:35.5751023Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:35.5751531Z 
2025-02-27T19:34:35.5752499Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:35.5753835Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:35.5755034Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:35.5756130Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.5757432Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:35.5758529Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.5759114Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:35.5759371Z 
2025-02-27T19:34:35.5759753Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:35.5760575Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:369:38)
2025-02-27T19:34:35.5761009Z 
2025-02-27T19:34:35.5761797Z   ● ResourceManager › applyResourceCost › dispatches addResourceAmount with negative values for each cost
2025-02-27T19:34:35.5762457Z 
2025-02-27T19:34:35.5762894Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:35.5763357Z 
2025-02-27T19:34:35.5764214Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:35.5765762Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:35.5766896Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:35.5767804Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.5769143Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:35.5770288Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.5771141Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:35.5771593Z 
2025-02-27T19:34:35.5772021Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:35.5772983Z       at ResourceManager.applyResourceCost (src/systems/resourceManager.ts:363:15)
2025-02-27T19:34:35.5773913Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:415:38)
2025-02-27T19:34:35.5774387Z 
2025-02-27T19:34:35.5775010Z   ● ResourceManager › unlockResource › unlocks a locked resource and returns true
2025-02-27T19:34:35.5776019Z 
2025-02-27T19:34:35.5776472Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:35.5776985Z 
2025-02-27T19:34:35.5777636Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:35.5778777Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.5780111Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:35.5781131Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:35.5781690Z      [90m 386 |[39m     
2025-02-27T19:34:35.5782530Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:35.5783648Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:35.5784184Z 
2025-02-27T19:34:35.5784639Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:35.5785684Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:462:38)
2025-02-27T19:34:35.5786113Z 
2025-02-27T19:34:35.5786655Z   ● ResourceManager › unlockResource › returns false for already unlocked resources
2025-02-27T19:34:35.5787142Z 
2025-02-27T19:34:35.5787534Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:35.5788036Z 
2025-02-27T19:34:35.5788644Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:35.5789751Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.5791025Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:35.5792010Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:35.5792545Z      [90m 386 |[39m     
2025-02-27T19:34:35.5793381Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:35.5794494Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:35.5794981Z 
2025-02-27T19:34:35.5795623Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:35.5796490Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:499:38)
2025-02-27T19:34:35.5796915Z 
2025-02-27T19:34:35.5797467Z   ● ResourceManager › unlockResource › returns false for non-existent resources
2025-02-27T19:34:35.5797957Z 
2025-02-27T19:34:35.5798343Z     TypeError: Cannot read properties of undefined (reading 'non-existent')
2025-02-27T19:34:35.5798807Z 
2025-02-27T19:34:35.5799375Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:35.5800457Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.5801683Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:35.5802650Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:35.5803166Z      [90m 386 |[39m     
2025-02-27T19:34:35.5804193Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:35.5805621Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:35.5806157Z 
2025-02-27T19:34:35.5806599Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:35.5807466Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:527:38)
2025-02-27T19:34:35.5808127Z 
2025-02-27T19:34:35.5808929Z   ● ResourceManager › addResourceAmount and setResourceAmount › addResourceAmount adds to existing resource
2025-02-27T19:34:35.5809606Z 
2025-02-27T19:34:35.5810031Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:35.5810506Z 
2025-02-27T19:34:35.5811338Z     [0m [90m 407 |[39m   addResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:34:35.5812605Z      [90m 408 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.5813825Z     [31m[1m>[22m[39m[90m 409 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:35.5814780Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:35.5815469Z      [90m 410 |[39m     
2025-02-27T19:34:35.5816152Z      [90m 411 |[39m     [90m// Can't add to a resource that doesn't exist[39m
2025-02-27T19:34:35.5816929Z      [90m 412 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:34:35.5817272Z 
2025-02-27T19:34:35.5817737Z       at ResourceManager.addResourceAmount (src/systems/resourceManager.ts:409:37)
2025-02-27T19:34:35.5818622Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:560:38)
2025-02-27T19:34:35.5819066Z 
2025-02-27T19:34:35.5819920Z   ● ResourceManager › addResourceAmount and setResourceAmount › setResourceAmount sets absolute value for resource
2025-02-27T19:34:35.5820663Z 
2025-02-27T19:34:35.5821068Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:35.5821553Z 
2025-02-27T19:34:35.5822369Z     [0m [90m 431 |[39m   setResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:34:35.5823609Z      [90m 432 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:35.5824833Z     [31m[1m>[22m[39m[90m 433 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:35.5825969Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:35.5826503Z      [90m 434 |[39m     
2025-02-27T19:34:35.5827151Z      [90m 435 |[39m     [90m// Can't set a resource that doesn't exist[39m
2025-02-27T19:34:35.5827916Z      [90m 436 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:34:35.5828272Z 
2025-02-27T19:34:35.5828738Z       at ResourceManager.setResourceAmount (src/systems/resourceManager.ts:433:37)
2025-02-27T19:34:35.5829631Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:598:38)
2025-02-27T19:34:35.5830075Z 
2025-02-27T19:34:35.5830603Z FAIL src/managers/progression/ProgressionManager.test.ts (9.285 s)
2025-02-27T19:34:35.7205923Z   ● Console
2025-02-27T19:34:35.7206180Z 
2025-02-27T19:34:35.7206329Z     console.error
2025-02-27T19:34:35.7207227Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7208762Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7210621Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:34:35.7212680Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:51:22)
2025-02-27T19:34:35.7214145Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7215058Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7216218Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7217763Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7218815Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7219873Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7221175Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7222641Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7224075Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7225510Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7227172Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7229110Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7230618Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7231848Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7233109Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7233779Z 
2025-02-27T19:34:35.7234298Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7234981Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7236284Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7237241Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7237971Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7238569Z      [90m 119 |[39m     }
2025-02-27T19:34:35.7239020Z      [90m 120 |[39m   }[0m
2025-02-27T19:34:35.7239272Z 
2025-02-27T19:34:35.7239875Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:34:35.7241058Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:22)
2025-02-27T19:34:35.7241609Z 
2025-02-27T19:34:35.7241741Z     console.error
2025-02-27T19:34:35.7242506Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7244018Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7246012Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:34:35.7247706Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:77:22)
2025-02-27T19:34:35.7249233Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7250440Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7251420Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7252854Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7253947Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7255064Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7256925Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7258400Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7259820Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7261108Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7262806Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7264781Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7266551Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7267859Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7269109Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7269818Z 
2025-02-27T19:34:35.7270328Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7271069Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7272284Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7273332Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7274086Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7274713Z      [90m 119 |[39m     }
2025-02-27T19:34:35.7275384Z      [90m 120 |[39m   }[0m
2025-02-27T19:34:35.7275647Z 
2025-02-27T19:34:35.7276297Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:34:35.7277507Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:77:22)
2025-02-27T19:34:35.7278113Z 
2025-02-27T19:34:35.7278260Z     console.error
2025-02-27T19:34:35.7279111Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7280693Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7282548Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:34:35.7284197Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:83:22)
2025-02-27T19:34:35.7285914Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7286852Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7287833Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7289427Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7290593Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7291690Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7293046Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7294754Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7296382Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7297651Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7299321Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7301320Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7302862Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7304166Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7305664Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7306375Z 
2025-02-27T19:34:35.7306887Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7307640Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7308815Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7309818Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7310577Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7311332Z      [90m 119 |[39m     }
2025-02-27T19:34:35.7311826Z      [90m 120 |[39m   }[0m
2025-02-27T19:34:35.7312176Z 
2025-02-27T19:34:35.7313058Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:34:35.7314541Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:83:22)
2025-02-27T19:34:35.7315487Z 
2025-02-27T19:34:35.7315752Z     console.error
2025-02-27T19:34:35.7316852Z       Error completing milestone milestone1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7318699Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7320715Z           at ProgressionManager.completeMilestone (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:348:12)
2025-02-27T19:34:35.7322705Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:145:22)
2025-02-27T19:34:35.7324466Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7325907Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7327338Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7328878Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7330103Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7461159Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7462652Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7464122Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7465821Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7467386Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7469048Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7471082Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7472636Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7473978Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7475514Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7476232Z 
2025-02-27T19:34:35.7476771Z     [0m [90m 379 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7477557Z      [90m 380 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7478899Z     [31m[1m>[22m[39m[90m 381 |[39m       console[33m.[39merror([32m`Error completing milestone ${milestoneId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7480068Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7480830Z      [90m 382 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7481463Z      [90m 383 |[39m     }
2025-02-27T19:34:35.7481928Z      [90m 384 |[39m   }[0m
2025-02-27T19:34:35.7482199Z 
2025-02-27T19:34:35.7482863Z       at ProgressionManager.completeMilestone (src/managers/progression/ProgressionManager.ts:381:15)
2025-02-27T19:34:35.7484102Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:22)
2025-02-27T19:34:35.7484698Z 
2025-02-27T19:34:35.7484851Z     console.error
2025-02-27T19:34:35.7485966Z       Error completing milestone milestone1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7487636Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7489532Z           at ProgressionManager.completeMilestone (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:348:12)
2025-02-27T19:34:35.7491301Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:165:22)
2025-02-27T19:34:35.7492814Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7493755Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7494745Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7496285Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7497425Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7498509Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7499875Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7501555Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7503028Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7504291Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7506239Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7508526Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7510114Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7511454Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7512796Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7513524Z 
2025-02-27T19:34:35.7514035Z     [0m [90m 379 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7514785Z      [90m 380 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7516424Z     [31m[1m>[22m[39m[90m 381 |[39m       console[33m.[39merror([32m`Error completing milestone ${milestoneId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7517594Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7518350Z      [90m 382 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7518959Z      [90m 383 |[39m     }
2025-02-27T19:34:35.7519423Z      [90m 384 |[39m   }[0m
2025-02-27T19:34:35.7519687Z 
2025-02-27T19:34:35.7520330Z       at ProgressionManager.completeMilestone (src/managers/progression/ProgressionManager.ts:381:15)
2025-02-27T19:34:35.7521586Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:22)
2025-02-27T19:34:35.7522178Z 
2025-02-27T19:34:35.7522321Z     console.error
2025-02-27T19:34:35.7523245Z       Error unlocking achievement achievement1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7524917Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7527073Z           at ProgressionManager.unlockAchievement (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:518:12)
2025-02-27T19:34:35.7528829Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:186:22)
2025-02-27T19:34:35.7530360Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7531298Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7532303Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7533666Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7534818Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7536106Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7537492Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7539003Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7540458Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7541968Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7543684Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7595990Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7597883Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7599233Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7600583Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7601325Z 
2025-02-27T19:34:35.7601854Z     [0m [90m 534 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7602636Z      [90m 535 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7603978Z     [31m[1m>[22m[39m[90m 536 |[39m       console[33m.[39merror([32m`Error unlocking achievement ${achievementId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7605354Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7606157Z      [90m 537 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7606785Z      [90m 538 |[39m     }
2025-02-27T19:34:35.7607268Z      [90m 539 |[39m   }[0m
2025-02-27T19:34:35.7607539Z 
2025-02-27T19:34:35.7608203Z       at ProgressionManager.unlockAchievement (src/managers/progression/ProgressionManager.ts:536:15)
2025-02-27T19:34:35.7609441Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:22)
2025-02-27T19:34:35.7610031Z 
2025-02-27T19:34:35.7610193Z     console.error
2025-02-27T19:34:35.7611139Z       Error unlocking achievement achievement1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7612829Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7614690Z           at ProgressionManager.unlockAchievement (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:518:12)
2025-02-27T19:34:35.7616636Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:206:22)
2025-02-27T19:34:35.7618208Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7619158Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7620119Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7621459Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7622528Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7623630Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7624935Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7686644Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7688084Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7689326Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7691295Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7693326Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7694809Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7696332Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7713807Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7714561Z 
2025-02-27T19:34:35.7715072Z     [0m [90m 534 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:35.7716051Z      [90m 535 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7717385Z     [31m[1m>[22m[39m[90m 536 |[39m       console[33m.[39merror([32m`Error unlocking achievement ${achievementId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7718577Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7719320Z      [90m 537 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7719924Z      [90m 538 |[39m     }
2025-02-27T19:34:35.7720387Z      [90m 539 |[39m   }[0m
2025-02-27T19:34:35.7720636Z 
2025-02-27T19:34:35.7721267Z       at ProgressionManager.unlockAchievement (src/managers/progression/ProgressionManager.ts:536:15)
2025-02-27T19:34:35.7722469Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:22)
2025-02-27T19:34:35.7723041Z 
2025-02-27T19:34:35.7723189Z     console.error
2025-02-27T19:34:35.7724139Z       Error checking if feature feature1 should be unlocked: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7726576Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7728529Z           at ProgressionManager.shouldFeatureBeUnlocked (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:682:12)
2025-02-27T19:34:35.7730273Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:290:22)
2025-02-27T19:34:35.7731793Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7732790Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7733759Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7735319Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7736410Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7737534Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7738877Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7740353Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7741844Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7743132Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7744873Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7747355Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7748971Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7750334Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7751673Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7752736Z 
2025-02-27T19:34:35.7753237Z     [0m [90m 693 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7753934Z      [90m 694 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7755531Z     [31m[1m>[22m[39m[90m 695 |[39m       console[33m.[39merror([32m`Error checking if feature ${featureId} should be unlocked:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7756730Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7757491Z      [90m 696 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7758114Z      [90m 697 |[39m     }
2025-02-27T19:34:35.7758550Z      [90m 698 |[39m   }[0m
2025-02-27T19:34:35.7758821Z 
2025-02-27T19:34:35.7759535Z       at ProgressionManager.shouldFeatureBeUnlocked (src/managers/progression/ProgressionManager.ts:695:15)
2025-02-27T19:34:35.7760813Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:22)
2025-02-27T19:34:35.7761427Z 
2025-02-27T19:34:35.7761566Z     console.error
2025-02-27T19:34:35.7762535Z       Error checking if feature feature1 should be unlocked: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:34:35.7764273Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:34:35.7766410Z           at ProgressionManager.shouldFeatureBeUnlocked (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:682:12)
2025-02-27T19:34:35.7768246Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:306:22)
2025-02-27T19:34:35.7769826Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:35.7770810Z           at new Promise (<anonymous>)
2025-02-27T19:34:35.7771815Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:35.7773217Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:35.7774355Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:35.7775659Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:35.7777059Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:35.7778583Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7780078Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:35.7781380Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:35.7783101Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:35.7785085Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:35.7786868Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:35.7788417Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:35.7789732Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:35.7790453Z 
2025-02-27T19:34:35.7790963Z     [0m [90m 693 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7791751Z      [90m 694 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:35.7793466Z     [31m[1m>[22m[39m[90m 695 |[39m       console[33m.[39merror([32m`Error checking if feature ${featureId} should be unlocked:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:35.7794681Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:35.7795694Z      [90m 696 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:35.7796434Z      [90m 697 |[39m     }
2025-02-27T19:34:35.7796847Z      [90m 698 |[39m   }[0m
2025-02-27T19:34:35.7797112Z 
2025-02-27T19:34:35.7797838Z       at ProgressionManager.shouldFeatureBeUnlocked (src/managers/progression/ProgressionManager.ts:695:15)
2025-02-27T19:34:35.7799111Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:306:22)
2025-02-27T19:34:35.7799700Z 
2025-02-27T19:34:35.7800440Z   ● ProgressionManager › checkRequirements › should return true when all requirements are met
2025-02-27T19:34:35.7801096Z 
2025-02-27T19:34:35.7801412Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7801822Z 
2025-02-27T19:34:35.7801964Z     Expected: true
2025-02-27T19:34:35.7802295Z     Received: false
2025-02-27T19:34:35.7802501Z 
2025-02-27T19:34:35.7802810Z     [0m [90m 49 |[39m       ][33m;[39m
2025-02-27T19:34:35.7803307Z      [90m 50 |[39m
2025-02-27T19:34:35.7804476Z     [31m[1m>[22m[39m[90m 51 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7805918Z      [90m    |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:35.7806970Z      [90m 52 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
2025-02-27T19:34:35.7807875Z      [90m 53 |[39m     })[33m;[39m
2025-02-27T19:34:35.7808436Z      [90m 54 |[39m[0m
2025-02-27T19:34:35.7808677Z 
2025-02-27T19:34:35.7809193Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:55)
2025-02-27T19:34:35.7809789Z 
2025-02-27T19:34:35.7810520Z   ● ProgressionManager › checkRequirements › should return false if any requirement is not met
2025-02-27T19:34:35.7811146Z 
2025-02-27T19:34:35.7811452Z     expect(jest.fn()).toHaveBeenCalledTimes(expected)
2025-02-27T19:34:35.7811840Z 
2025-02-27T19:34:35.7812036Z     Expected number of calls: 2
2025-02-27T19:34:35.7812486Z     Received number of calls: 0
2025-02-27T19:34:35.7812746Z 
2025-02-27T19:34:35.7812975Z     [0m [90m 76 |[39m
2025-02-27T19:34:35.7814028Z      [90m 77 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-02-27T19:34:35.7845820Z     [31m[1m>[22m[39m[90m 78 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
2025-02-27T19:34:35.7846915Z      [90m    |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:35.7847530Z      [90m 79 |[39m     })[33m;[39m
2025-02-27T19:34:35.7847998Z      [90m 80 |[39m
2025-02-27T19:34:35.7848909Z      [90m 81 |[39m     it([32m'should handle empty requirements array'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:35.7849479Z 
2025-02-27T19:34:35.7850000Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:78:28)
2025-02-27T19:34:35.7850564Z 
2025-02-27T19:34:35.7851224Z   ● ProgressionManager › evaluateRequirement › should correctly evaluate gameStage requirement
2025-02-27T19:34:35.7851865Z 
2025-02-27T19:34:35.7852489Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7852939Z 
2025-02-27T19:34:35.7853086Z     Expected: true
2025-02-27T19:34:35.7853432Z     Received: false
2025-02-27T19:34:35.7853640Z 
2025-02-27T19:34:35.7853882Z     [0m [90m 116 |[39m
2025-02-27T19:34:35.7854607Z      [90m 117 |[39m       [90m// Use the private method for testing[39m
2025-02-27T19:34:35.7856331Z     [31m[1m>[22m[39m[90m 118 |[39m       expect((manager [36mas[39m any)[33m.[39mevaluateRequirement(requirement))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7857945Z      [90m     |[39m                                                                 [31m[1m^[22m[39m
2025-02-27T19:34:35.7858576Z      [90m 119 |[39m     })[33m;[39m
2025-02-27T19:34:35.7859010Z      [90m 120 |[39m
2025-02-27T19:34:35.7859965Z      [90m 121 |[39m     it([32m'should handle unknown requirement types'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:35.7860584Z 
2025-02-27T19:34:35.7861128Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:118:65)
2025-02-27T19:34:35.7861750Z 
2025-02-27T19:34:35.7862588Z   ● ProgressionManager › completeMilestone › should complete a milestone when requirements are met
2025-02-27T19:34:35.7863269Z 
2025-02-27T19:34:35.7863576Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7863968Z 
2025-02-27T19:34:35.7864118Z     Expected: true
2025-02-27T19:34:35.7864428Z     Received: false
2025-02-27T19:34:35.7864654Z 
2025-02-27T19:34:35.7864881Z     [0m [90m 143 |[39m
2025-02-27T19:34:35.7865704Z      [90m 144 |[39m       [90m// Complete the milestone[39m
2025-02-27T19:34:35.7867036Z     [31m[1m>[22m[39m[90m 145 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7868279Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:35.7869235Z      [90m 146 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:34:35.7870155Z      [90m 147 |[39m         id[33m:[39m [32m'milestone1'[39m[33m,[39m
2025-02-27T19:34:35.7870939Z      [90m 148 |[39m         completedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:34:35.7871322Z 
2025-02-27T19:34:35.7871804Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:55)
2025-02-27T19:34:35.7872418Z 
2025-02-27T19:34:35.7873229Z   ● ProgressionManager › completeMilestone › should not complete a milestone that is already completed
2025-02-27T19:34:35.7873914Z 
2025-02-27T19:34:35.7874212Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7874609Z 
2025-02-27T19:34:35.7874753Z     Expected: true
2025-02-27T19:34:35.7886147Z     Received: false
2025-02-27T19:34:35.7886434Z 
2025-02-27T19:34:35.7886972Z     [0m [90m 163 |[39m       [90m// Attempt to complete the milestone[39m
2025-02-27T19:34:35.7888125Z      [90m 164 |[39m       [90m// The implementation now returns true regardless of completion status[39m
2025-02-27T19:34:35.7889758Z     [31m[1m>[22m[39m[90m 165 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7891038Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:35.7892281Z      [90m 166 |[39m       [90m// The implementation now calls completeMilestone even for already completed milestones[39m
2025-02-27T19:34:35.7893637Z      [90m 167 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:35.7894477Z      [90m 168 |[39m     })[33m;[39m[0m
2025-02-27T19:34:35.7894784Z 
2025-02-27T19:34:35.7895506Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:55)
2025-02-27T19:34:35.7896100Z 
2025-02-27T19:34:35.7896925Z   ● ProgressionManager › unlockAchievement › should unlock an achievement when requirements are met
2025-02-27T19:34:35.7897856Z 
2025-02-27T19:34:35.7898194Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7898586Z 
2025-02-27T19:34:35.7898727Z     Expected: true
2025-02-27T19:34:35.7899079Z     Received: false
2025-02-27T19:34:35.7899300Z 
2025-02-27T19:34:35.7899547Z     [0m [90m 184 |[39m
2025-02-27T19:34:35.7900191Z      [90m 185 |[39m       [90m// Unlock the achievement[39m
2025-02-27T19:34:35.7901551Z     [31m[1m>[22m[39m[90m 186 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7903179Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:34:35.7904117Z      [90m 187 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:34:35.7905325Z      [90m 188 |[39m         id[33m:[39m [32m'achievement1'[39m[33m,[39m
2025-02-27T19:34:35.7906229Z      [90m 189 |[39m         unlockedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:34:35.7906628Z 
2025-02-27T19:34:35.7907228Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:57)
2025-02-27T19:34:35.7907838Z 
2025-02-27T19:34:35.7908704Z   ● ProgressionManager › unlockAchievement › should not unlock an achievement that is already unlocked
2025-02-27T19:34:35.7909394Z 
2025-02-27T19:34:35.7909708Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7910086Z 
2025-02-27T19:34:35.7910230Z     Expected: true
2025-02-27T19:34:35.7910569Z     Received: false
2025-02-27T19:34:35.7910788Z 
2025-02-27T19:34:35.7911298Z     [0m [90m 204 |[39m       [90m// Attempt to unlock the achievement[39m
2025-02-27T19:34:35.7912417Z      [90m 205 |[39m       [90m// The implementation now returns true regardless of unlock status[39m
2025-02-27T19:34:35.7914001Z     [31m[1m>[22m[39m[90m 206 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7915485Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:34:35.7916769Z      [90m 207 |[39m       [90m// The implementation now calls unlockAchievement even for already unlocked achievements[39m
2025-02-27T19:34:35.7918110Z      [90m 208 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:35.7918918Z      [90m 209 |[39m     })[33m;[39m[0m
2025-02-27T19:34:35.7919226Z 
2025-02-27T19:34:35.7919720Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:57)
2025-02-27T19:34:35.7920315Z 
2025-02-27T19:34:35.7921197Z   ● ProgressionManager › shouldFeatureBeUnlocked › should return true if a completed milestone unlocks the feature
2025-02-27T19:34:35.7921954Z 
2025-02-27T19:34:35.7922262Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:35.7922659Z 
2025-02-27T19:34:35.7922804Z     Expected: true
2025-02-27T19:34:35.7923157Z     Received: false
2025-02-27T19:34:35.7923365Z 
2025-02-27T19:34:35.7923663Z     [0m [90m 288 |[39m       
2025-02-27T19:34:35.7924395Z      [90m 289 |[39m       [90m// Check if feature should be unlocked[39m
2025-02-27T19:34:35.7926064Z     [31m[1m>[22m[39m[90m 290 |[39m       expect(manager[33m.[39mshouldFeatureBeUnlocked([32m'feature1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:35.7927405Z      [90m     |[39m                                                           [31m[1m^[22m[39m
2025-02-27T19:34:35.7928083Z      [90m 291 |[39m     })[33m;[39m
2025-02-27T19:34:35.7928569Z      [90m 292 |[39m
2025-02-27T19:34:35.7929669Z      [90m 293 |[39m     it([32m'should return false if no completed milestone unlocks the feature'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:35.7930383Z 
2025-02-27T19:34:35.7930909Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:59)
2025-02-27T19:34:35.7931480Z 
2025-02-27T19:34:36.7107364Z FAIL src/systems/__tests__/buildingManager.test.ts
2025-02-27T19:34:36.7108902Z   ● BuildingManager › initialization › should initialize a building
2025-02-27T19:34:36.7109589Z 
2025-02-27T19:34:36.7110062Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:34:36.7110606Z 
2025-02-27T19:34:36.7111006Z     [0m [90m 139 |[39m     }
2025-02-27T19:34:36.7111594Z      [90m 140 |[39m     
2025-02-27T19:34:36.7113108Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:34:36.7114326Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:36.7114998Z      [90m 142 |[39m   }
2025-02-27T19:34:36.7115797Z      [90m 143 |[39m   
2025-02-27T19:34:36.7116444Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:34:36.7116884Z 
2025-02-27T19:34:36.7117468Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:34:36.7118533Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:73:23)
2025-02-27T19:34:36.7119201Z 
2025-02-27T19:34:36.7119888Z   ● BuildingManager › initialization › should initialize multiple buildings
2025-02-27T19:34:36.7120525Z 
2025-02-27T19:34:36.7120924Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:34:36.7121419Z 
2025-02-27T19:34:36.7121756Z     [0m [90m 139 |[39m     }
2025-02-27T19:34:36.7122298Z      [90m 140 |[39m     
2025-02-27T19:34:36.7123528Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:34:36.7124714Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:36.7125673Z      [90m 142 |[39m   }
2025-02-27T19:34:36.7126198Z      [90m 143 |[39m   
2025-02-27T19:34:36.7126903Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:34:36.7127359Z 
2025-02-27T19:34:36.7127940Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:34:36.7128808Z       at src/systems/buildingManager.ts:153:40
2025-02-27T19:34:36.7129422Z           at Array.forEach (<anonymous>)
2025-02-27T19:34:36.7130352Z       at BuildingManager.initializeBuildings (src/systems/buildingManager.ts:153:15)
2025-02-27T19:34:36.7131454Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:108:23)
2025-02-27T19:34:36.7132057Z 
2025-02-27T19:34:36.7132873Z   ● BuildingManager › purchase validation › should correctly validate if player can afford a building
2025-02-27T19:34:36.7133594Z 
2025-02-27T19:34:36.7134079Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:36.7134669Z 
2025-02-27T19:34:36.7134993Z     [0m [90m 165 |[39m     
2025-02-27T19:34:36.7136175Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:36.7137560Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:36.7138654Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:36.7139295Z      [90m 168 |[39m     
2025-02-27T19:34:36.7140184Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:36.7141420Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:36.7142283Z 
2025-02-27T19:34:36.7143007Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:36.7145041Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:160:39)
2025-02-27T19:34:36.7146176Z 
2025-02-27T19:34:36.7147883Z   ● BuildingManager › purchase validation › should return false for non-existent buildings
2025-02-27T19:34:36.7149139Z 
2025-02-27T19:34:36.7150338Z     TypeError: Cannot read properties of undefined (reading 'non_existent')
2025-02-27T19:34:36.7151221Z 
2025-02-27T19:34:36.7152226Z     [0m [90m 165 |[39m     
2025-02-27T19:34:36.7153430Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:36.7166890Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:36.7168490Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:36.7169654Z      [90m 168 |[39m     
2025-02-27T19:34:36.7170817Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:36.7172597Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:36.7173395Z 
2025-02-27T19:34:36.7174464Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:36.7175922Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:193:38)
2025-02-27T19:34:36.7177039Z 
2025-02-27T19:34:36.7177879Z   ● BuildingManager › purchase validation › should return false for locked buildings
2025-02-27T19:34:36.7178970Z 
2025-02-27T19:34:36.7179595Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:36.7180653Z 
2025-02-27T19:34:36.7181134Z     [0m [90m 165 |[39m     
2025-02-27T19:34:36.7182514Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:36.7183998Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:36.7185809Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:36.7186633Z      [90m 168 |[39m     
2025-02-27T19:34:36.7188136Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:36.7189719Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:36.7191042Z 
2025-02-27T19:34:36.7191858Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:36.7193657Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:226:38)
2025-02-27T19:34:36.7194650Z 
2025-02-27T19:34:36.7196123Z   ● BuildingManager › purchasing › should purchase a building and deduct resources
2025-02-27T19:34:36.7197318Z 
2025-02-27T19:34:36.7197802Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:36.7198315Z 
2025-02-27T19:34:36.7198607Z     [0m [90m 197 |[39m     
2025-02-27T19:34:36.7199449Z      [90m 198 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:36.7200680Z     [31m[1m>[22m[39m[90m 199 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:36.7201637Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:36.7202148Z      [90m 200 |[39m     
2025-02-27T19:34:36.7202692Z      [90m 201 |[39m     [90m// Deduct resources[39m
2025-02-27T19:34:36.7203980Z      [90m 202 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mdeductResources(building[33m.[39mcost))[33m;[39m[0m
2025-02-27T19:34:36.7204774Z 
2025-02-27T19:34:36.7205407Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:199:38)
2025-02-27T19:34:36.7206364Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:273:38)
2025-02-27T19:34:36.7206870Z 
2025-02-27T19:34:36.7207683Z   ● BuildingManager › production calculation › should correctly calculate production based on level and workers
2025-02-27T19:34:36.7208651Z 
2025-02-27T19:34:36.7209073Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:36.7209555Z 
2025-02-27T19:34:36.7209807Z     [0m [90m 222 |[39m     
2025-02-27T19:34:36.7210632Z      [90m 223 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:36.7211852Z     [31m[1m>[22m[39m[90m 224 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:36.7212998Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:36.7213542Z      [90m 225 |[39m     
2025-02-27T19:34:36.7214108Z      [90m 226 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:36.7214775Z      [90m 227 |[39m       [36mreturn[39m[33m;[39m[0m
2025-02-27T19:34:36.7215272Z 
2025-02-27T19:34:36.7215729Z       at BuildingManager.recalculateProduction (src/systems/buildingManager.ts:224:38)
2025-02-27T19:34:36.7216613Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:329:23)
2025-02-27T19:34:36.7217059Z 
2025-02-27T19:34:37.0117866Z PASS src/state/tasksSlice.test.ts
2025-02-27T19:34:37.6006578Z FAIL src/systems/__tests__/saveManager.test.ts
2025-02-27T19:34:37.6057281Z   ● Console
2025-02-27T19:34:37.6061469Z 
2025-02-27T19:34:37.6064711Z     console.error
2025-02-27T19:34:37.6069224Z       [ERROR in SaveManager.loadGame]: this.actions.resetGame is not a function undefined
2025-02-27T19:34:37.6073291Z 
2025-02-27T19:34:37.6078118Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:37.6083875Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:34:37.6088063Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:37.6090528Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:37.6096755Z      [90m 138 |[39m     }
2025-02-27T19:34:37.6099505Z      [90m 139 |[39m     
2025-02-27T19:34:37.6102423Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:34:37.6109470Z 
2025-02-27T19:34:37.6109860Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:34:37.6110604Z       at SaveManager.loadGame (src/systems/saveManager.ts:205:19)
2025-02-27T19:34:37.6111395Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:177:34)
2025-02-27T19:34:37.6111859Z 
2025-02-27T19:34:37.6111996Z     console.error
2025-02-27T19:34:37.6113895Z       [ERROR in SaveManager.deleteSaveAndReset]: this.actions.resetGame is not a function undefined
2025-02-27T19:34:37.6115763Z 
2025-02-27T19:34:37.6117573Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:37.6119677Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:34:37.6122773Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:37.6126114Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:37.6127941Z      [90m 138 |[39m     }
2025-02-27T19:34:37.6128712Z      [90m 139 |[39m     
2025-02-27T19:34:37.6129981Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:34:37.6131869Z 
2025-02-27T19:34:37.6141718Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:34:37.6143138Z       at SaveManager.deleteSaveAndReset (src/systems/saveManager.ts:237:19)
2025-02-27T19:34:37.6144284Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:264:34)
2025-02-27T19:34:37.6145561Z 
2025-02-27T19:34:37.6148080Z   ● SaveManager › loadGame › should dispatch actions to restore game state
2025-02-27T19:34:37.6148857Z 
2025-02-27T19:34:37.6149921Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:37.6150530Z 
2025-02-27T19:34:37.6151195Z     Expected: true
2025-02-27T19:34:37.6151728Z     Received: false
2025-02-27T19:34:37.6152711Z 
2025-02-27T19:34:37.6153470Z     [0m [90m 178 |[39m       
2025-02-27T19:34:37.6154449Z      [90m 179 |[39m       [90m// Assert[39m
2025-02-27T19:34:37.6155740Z     [31m[1m>[22m[39m[90m 180 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:37.6156899Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:37.6157490Z      [90m 181 |[39m       
2025-02-27T19:34:37.6158208Z      [90m 182 |[39m       [90m// Verify reset actions were dispatched[39m
2025-02-27T19:34:37.6159387Z      [90m 183 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({[0m
2025-02-27T19:34:37.6160124Z 
2025-02-27T19:34:37.6160565Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:180:22)
2025-02-27T19:34:37.6161056Z 
2025-02-27T19:34:37.6161636Z   ● SaveManager › resetGame › should dispatch reset actions for all state slices
2025-02-27T19:34:37.6162171Z 
2025-02-27T19:34:37.6162463Z     TypeError: this.actions.resetGame is not a function
2025-02-27T19:34:37.6162840Z 
2025-02-27T19:34:37.6163401Z     [0m [90m 217 |[39m     [36mthis[39m[33m.[39mensureInitialized()[33m;[39m
2025-02-27T19:34:37.6164017Z      [90m 218 |[39m     
2025-02-27T19:34:37.6165286Z     [31m[1m>[22m[39m[90m 219 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetGame())[33m;[39m
2025-02-27T19:34:37.6166379Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:37.6167542Z      [90m 220 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetResources())[33m;[39m
2025-02-27T19:34:37.6168938Z      [90m 221 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetStructures())[33m;[39m
2025-02-27T19:34:37.6169783Z      [90m 222 |[39m   }[0m
2025-02-27T19:34:37.6170046Z 
2025-02-27T19:34:37.6170404Z       at SaveManager.resetGame (src/systems/saveManager.ts:219:32)
2025-02-27T19:34:37.6171275Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:243:19)
2025-02-27T19:34:37.6171756Z 
2025-02-27T19:34:37.6172361Z   ● SaveManager › deleteSaveAndReset › should delete the save and reset the game
2025-02-27T19:34:37.6172862Z 
2025-02-27T19:34:37.6173144Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:37.6173513Z 
2025-02-27T19:34:37.6173650Z     Expected: true
2025-02-27T19:34:37.6173993Z     Received: false
2025-02-27T19:34:37.6174204Z 
2025-02-27T19:34:37.6174482Z     [0m [90m 265 |[39m       
2025-02-27T19:34:37.6175040Z      [90m 266 |[39m       [90m// Assert[39m
2025-02-27T19:34:37.6176132Z     [31m[1m>[22m[39m[90m 267 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:37.6176970Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:37.6177954Z      [90m 268 |[39m       expect(saveUtils[33m.[39mdeleteSave)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:37.6179222Z      [90m 269 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({
2025-02-27T19:34:37.6180480Z      [90m 270 |[39m         type[33m:[39m expect[33m.[39mstringContaining([32m'game/resetGame'[39m)[0m
2025-02-27T19:34:37.6181023Z 
2025-02-27T19:34:37.6181437Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:267:22)
2025-02-27T19:34:37.6181927Z 
2025-02-27T19:34:38.2966606Z PASS src/utils/resourceUtils.test.ts
2025-02-27T19:34:38.3233243Z PASS src/core/GameLoop.test.ts
2025-02-27T19:34:38.3306047Z   ● Console
2025-02-27T19:34:38.3308933Z 
2025-02-27T19:34:38.3309419Z     console.log
2025-02-27T19:34:38.3310345Z       GameLoop: Registered handler, total: 1
2025-02-27T19:34:38.3310950Z 
2025-02-27T19:34:38.3311365Z       at GameLoop.registerHandler (src/core/GameLoop.ts:290:17)
2025-02-27T19:34:38.3312278Z 
2025-02-27T19:34:38.3312419Z     console.log
2025-02-27T19:34:38.3312837Z       GameLoop: Started with tick rate 1Hz
2025-02-27T19:34:38.3313139Z 
2025-02-27T19:34:38.3313430Z       at GameLoop.start (src/core/GameLoop.ts:119:15)
2025-02-27T19:34:38.3313802Z 
2025-02-27T19:34:38.3313936Z     console.log
2025-02-27T19:34:38.3314499Z       Warning not called, but this is acceptable in the mock environment
2025-02-27T19:34:38.3314973Z 
2025-02-27T19:34:38.3315499Z       at Object.<anonymous> (src/core/GameLoop.test.ts:309:15)
2025-02-27T19:34:38.3315905Z 
2025-02-27T19:34:38.3316061Z     console.log
2025-02-27T19:34:38.3316514Z       GameLoop: Stopped after 2 ticks and 1 frames
2025-02-27T19:34:38.3316868Z 
2025-02-27T19:34:38.3317119Z       at GameLoop.stop (src/core/GameLoop.ts:137:15)
2025-02-27T19:34:38.3317467Z 
2025-02-27T19:34:38.3317600Z     console.log
2025-02-27T19:34:38.3318028Z       GameLoop: Unregistered handler, remaining: 0
2025-02-27T19:34:38.3318378Z 
2025-02-27T19:34:38.3318724Z       at GameLoop.unregisterHandler (src/core/GameLoop.ts:307:17)
2025-02-27T19:34:38.3319172Z 
2025-02-27T19:34:39.0006843Z FAIL src/integration/tasks.integration.test.ts
2025-02-27T19:34:39.1078136Z   ● Console
2025-02-27T19:34:39.1084008Z 
2025-02-27T19:34:39.1084488Z     console.log
2025-02-27T19:34:39.1090866Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:39.1091774Z 
2025-02-27T19:34:39.1092563Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:39.1093480Z 
2025-02-27T19:34:39.1093962Z     console.error
2025-02-27T19:34:39.1094990Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1096697Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1098194Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:34:39.1099670Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:151:32)
2025-02-27T19:34:39.1101260Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1102362Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1103508Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1105021Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1106510Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1107781Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1109312Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1111110Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1112708Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1114780Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1117937Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1119826Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1176595Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1178646Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1180343Z 
2025-02-27T19:34:39.1181250Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1182044Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1183188Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1184151Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1184985Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1185851Z      [90m 315 |[39m     }
2025-02-27T19:34:39.1186284Z      [90m 316 |[39m   }[0m
2025-02-27T19:34:39.1186531Z 
2025-02-27T19:34:39.1186891Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:34:39.1187818Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:151:32)
2025-02-27T19:34:39.1188311Z 
2025-02-27T19:34:39.1188455Z     console.error
2025-02-27T19:34:39.1189170Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1190405Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1191685Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:34:39.1193000Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:168:32)
2025-02-27T19:34:39.1194366Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1195430Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1196358Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1197618Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1198691Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1199726Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1200991Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1202405Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1203601Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1205392Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1267406Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1268929Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1270193Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1271465Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1272437Z 
2025-02-27T19:34:39.1272938Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1273621Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1274746Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1275893Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1276979Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1277610Z      [90m 315 |[39m     }
2025-02-27T19:34:39.1278043Z      [90m 316 |[39m   }[0m
2025-02-27T19:34:39.1278306Z 
2025-02-27T19:34:39.1278664Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:34:39.1279459Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:168:32)
2025-02-27T19:34:39.1279904Z 
2025-02-27T19:34:39.1280045Z     console.error
2025-02-27T19:34:39.1280768Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1281988Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1283277Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:34:39.1284537Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:178:32)
2025-02-27T19:34:39.1286035Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1286940Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1287907Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1289245Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1290242Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1291339Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1292518Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1293627Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1294629Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1296429Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1298125Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1299570Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1300770Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1302067Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1302793Z 
2025-02-27T19:34:39.1303300Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1304019Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1305412Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1306388Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1307520Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1308274Z      [90m 315 |[39m     }
2025-02-27T19:34:39.1308720Z      [90m 316 |[39m   }[0m
2025-02-27T19:34:39.1308974Z 
2025-02-27T19:34:39.1309324Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:34:39.1310197Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:178:32)
2025-02-27T19:34:39.1310975Z 
2025-02-27T19:34:39.1311126Z     console.error
2025-02-27T19:34:39.1311912Z       Error unlocking task locked-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1313242Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1314590Z           at TaskManager.unlockTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:417:12)
2025-02-27T19:34:39.1316137Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:188:32)
2025-02-27T19:34:39.1317499Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1318392Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1319321Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1320586Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1321635Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1322635Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1323883Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1325417Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1326625Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1328233Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1330115Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1331612Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1332844Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1334084Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1334762Z 
2025-02-27T19:34:39.1335404Z     [0m [90m 439 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1336090Z      [90m 440 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1337277Z     [31m[1m>[22m[39m[90m 441 |[39m       console[33m.[39merror([32m`Error unlocking task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1338234Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1339061Z      [90m 442 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1339686Z      [90m 443 |[39m     }
2025-02-27T19:34:39.1340099Z      [90m 444 |[39m   }[0m
2025-02-27T19:34:39.1340333Z 
2025-02-27T19:34:39.1340699Z       at TaskManager.unlockTask (src/managers/TaskManager.ts:441:15)
2025-02-27T19:34:39.1341513Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:188:32)
2025-02-27T19:34:39.1342004Z 
2025-02-27T19:34:39.1342132Z     console.error
2025-02-27T19:34:39.1343090Z       Error unlocking task locked-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1344385Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1345884Z           at TaskManager.unlockTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:417:12)
2025-02-27T19:34:39.1347196Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:203:32)
2025-02-27T19:34:39.1348917Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1349867Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1350835Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1352213Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1353349Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1354445Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1355992Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1357489Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1358756Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1360431Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1362325Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1363883Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1365377Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1366706Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1367429Z 
2025-02-27T19:34:39.1367921Z     [0m [90m 439 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1368679Z      [90m 440 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1369911Z     [31m[1m>[22m[39m[90m 441 |[39m       console[33m.[39merror([32m`Error unlocking task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1370952Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1371822Z      [90m 442 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1372482Z      [90m 443 |[39m     }
2025-02-27T19:34:39.1372886Z      [90m 444 |[39m   }[0m
2025-02-27T19:34:39.1373142Z 
2025-02-27T19:34:39.1373535Z       at TaskManager.unlockTask (src/managers/TaskManager.ts:441:15)
2025-02-27T19:34:39.1374380Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:203:32)
2025-02-27T19:34:39.1374891Z 
2025-02-27T19:34:39.1375029Z     console.error
2025-02-27T19:34:39.1375945Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1377187Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1378493Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:34:39.1380045Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:214:32)
2025-02-27T19:34:39.1381417Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1382320Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1383250Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1384537Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1385981Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1387016Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1388314Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1389727Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1390953Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1392568Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1394418Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1396073Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1397312Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1398563Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1399255Z 
2025-02-27T19:34:39.1399720Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1400396Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1401531Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1402494Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1403320Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1403947Z      [90m 376 |[39m     }
2025-02-27T19:34:39.1404350Z      [90m 377 |[39m   }[0m
2025-02-27T19:34:39.1404578Z 
2025-02-27T19:34:39.1404953Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:34:39.1406029Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:214:32)
2025-02-27T19:34:39.1406510Z 
2025-02-27T19:34:39.1406647Z     console.error
2025-02-27T19:34:39.1407388Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1408615Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1409897Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:34:39.1411255Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:229:32)
2025-02-27T19:34:39.1412615Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1413512Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1414371Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1416118Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1417187Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1418196Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1419469Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1421122Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1422370Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1424040Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1426176Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1427674Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1428966Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1430228Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1430927Z 
2025-02-27T19:34:39.1431404Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1432082Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1433266Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1434276Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1435338Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1435998Z      [90m 376 |[39m     }
2025-02-27T19:34:39.1436409Z      [90m 377 |[39m   }[0m
2025-02-27T19:34:39.1436697Z 
2025-02-27T19:34:39.1437086Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:34:39.1437935Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:229:32)
2025-02-27T19:34:39.1438412Z 
2025-02-27T19:34:39.1438538Z     console.error
2025-02-27T19:34:39.1439257Z       Error canceling task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1440502Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1441792Z           at TaskManager.cancelTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:386:12)
2025-02-27T19:34:39.1443092Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:240:32)
2025-02-27T19:34:39.1444466Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1445545Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1446461Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1447750Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1448830Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1449853Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1451139Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1452769Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1454005Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1455768Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1457713Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1459400Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1460645Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1461916Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1462593Z 
2025-02-27T19:34:39.1463045Z     [0m [90m 403 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1463733Z      [90m 404 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1464853Z     [31m[1m>[22m[39m[90m 405 |[39m       console[33m.[39merror([32m`Error canceling task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1465964Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1466810Z      [90m 406 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1467448Z      [90m 407 |[39m     }
2025-02-27T19:34:39.1467859Z      [90m 408 |[39m   }[0m
2025-02-27T19:34:39.1468096Z 
2025-02-27T19:34:39.1468464Z       at TaskManager.cancelTask (src/managers/TaskManager.ts:405:15)
2025-02-27T19:34:39.1469289Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:240:32)
2025-02-27T19:34:39.1469766Z 
2025-02-27T19:34:39.1469909Z     console.error
2025-02-27T19:34:39.1470642Z       Error checking task requirements: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1471904Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1473335Z           at TaskManager.checkAllTaskRequirements (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:452:12)
2025-02-27T19:34:39.1474776Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:271:34)
2025-02-27T19:34:39.1476361Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1477275Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1478204Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1479495Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1480561Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1481585Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1482870Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1484281Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1485684Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1487332Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1489452Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1490969Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1492210Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1493473Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1494412Z 
2025-02-27T19:34:39.1494847Z     [0m [90m 465 |[39m       [36mreturn[39m unlocked[33m;[39m
2025-02-27T19:34:39.1495747Z      [90m 466 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1496968Z     [31m[1m>[22m[39m[90m 467 |[39m       console[33m.[39merror([32m'Error checking task requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1498018Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1498861Z      [90m 468 |[39m       [36mreturn[39m [35m0[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1499517Z      [90m 469 |[39m     }
2025-02-27T19:34:39.1499920Z      [90m 470 |[39m   }[0m
2025-02-27T19:34:39.1500160Z 
2025-02-27T19:34:39.1500626Z       at TaskManager.checkAllTaskRequirements (src/managers/TaskManager.ts:467:15)
2025-02-27T19:34:39.1501586Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:271:34)
2025-02-27T19:34:39.1502093Z 
2025-02-27T19:34:39.1502247Z     console.error
2025-02-27T19:34:39.1502980Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1504224Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1505796Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:34:39.1523601Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:306:17)
2025-02-27T19:34:39.1525078Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1526195Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1527112Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1528419Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1529500Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1530519Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1531767Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1533178Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1534390Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1536191Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1538154Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1539622Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1540867Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1542325Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1543026Z 
2025-02-27T19:34:39.1543497Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1544179Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1545442Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1546372Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1547451Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1548075Z      [90m 315 |[39m     }
2025-02-27T19:34:39.1548477Z      [90m 316 |[39m   }[0m
2025-02-27T19:34:39.1548710Z 
2025-02-27T19:34:39.1549064Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:34:39.1549863Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:306:17)
2025-02-27T19:34:39.1550360Z 
2025-02-27T19:34:39.1550511Z     console.error
2025-02-27T19:34:39.1551239Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1552494Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1553795Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:34:39.1555274Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:313:17)
2025-02-27T19:34:39.1556651Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1557556Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1558488Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1559764Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1560833Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1561873Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1563170Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1564544Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1565876Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1567462Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1569313Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1570834Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1572115Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1573409Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1574141Z 
2025-02-27T19:34:39.1574638Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.1575601Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1576822Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1577851Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1578963Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1579705Z      [90m 376 |[39m     }
2025-02-27T19:34:39.1580167Z      [90m 377 |[39m   }[0m
2025-02-27T19:34:39.1580423Z 
2025-02-27T19:34:39.1580826Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:34:39.1581715Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:313:17)
2025-02-27T19:34:39.1582468Z 
2025-02-27T19:34:39.1582625Z     console.error
2025-02-27T19:34:39.1583446Z       Error getting progress for task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:34:39.1584799Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:34:39.1586368Z           at TaskManager.getTaskProgress (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:500:12)
2025-02-27T19:34:39.1587784Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:334:34)
2025-02-27T19:34:39.1589192Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.1590150Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.1591055Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.1592381Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.1593476Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.1594554Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.1596098Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.1597589Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.1598852Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.1600487Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.1602481Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.1603954Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.1605454Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.1606816Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.1607551Z 
2025-02-27T19:34:39.1607921Z     [0m [90m 519 |[39m       }[33m;[39m
2025-02-27T19:34:39.1608570Z      [90m 520 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:39.1609883Z     [31m[1m>[22m[39m[90m 521 |[39m       console[33m.[39merror([32m`Error getting progress for task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.1610989Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.1611822Z      [90m 522 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:34:39.1612517Z      [90m 523 |[39m     }
2025-02-27T19:34:39.1612969Z      [90m 524 |[39m   }[0m
2025-02-27T19:34:39.1613230Z 
2025-02-27T19:34:39.1613654Z       at TaskManager.getTaskProgress (src/managers/TaskManager.ts:521:15)
2025-02-27T19:34:39.1614553Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:334:34)
2025-02-27T19:34:39.1615046Z 
2025-02-27T19:34:39.1616065Z   ● Task System Integration › should start a task when requirements are met
2025-02-27T19:34:39.1616556Z 
2025-02-27T19:34:39.1616805Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:39.1617201Z 
2025-02-27T19:34:39.1617356Z     Expected: true
2025-02-27T19:34:39.1617693Z     Received: false
2025-02-27T19:34:39.1617902Z 
2025-02-27T19:34:39.1618749Z     [0m [90m 151 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mstartTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1619890Z      [90m 152 |[39m     
2025-02-27T19:34:39.1620634Z     [31m[1m>[22m[39m[90m 153 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:39.1621434Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:39.1622309Z      [90m 154 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:39.1623213Z      [90m 155 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:39.1624142Z      [90m 156 |[39m         type[33m:[39m [32m'tasks/startTask'[39m[33m,[39m[0m
2025-02-27T19:34:39.1624596Z 
2025-02-27T19:34:39.1625022Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:153:20)
2025-02-27T19:34:39.1625699Z 
2025-02-27T19:34:39.1626204Z   ● Task System Integration › should check if task requirements are met
2025-02-27T19:34:39.1626614Z 
2025-02-27T19:34:39.1626869Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:39.1627230Z 
2025-02-27T19:34:39.1627352Z     Expected: true
2025-02-27T19:34:39.1627678Z     Received: false
2025-02-27T19:34:39.1627871Z 
2025-02-27T19:34:39.1628673Z     [0m [90m 188 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39munlockTask([32m'locked-task'[39m)[33m;[39m
2025-02-27T19:34:39.1629481Z      [90m 189 |[39m     
2025-02-27T19:34:39.1630253Z     [31m[1m>[22m[39m[90m 190 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:39.1631040Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:39.1631868Z      [90m 191 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:39.1632681Z      [90m 192 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:39.1633484Z      [90m 193 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:34:39.1633895Z 
2025-02-27T19:34:39.1634303Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:190:20)
2025-02-27T19:34:39.1634786Z 
2025-02-27T19:34:39.1635374Z   ● Task System Integration › should complete an in-progress task
2025-02-27T19:34:39.1635785Z 
2025-02-27T19:34:39.1636067Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:39.1636438Z 
2025-02-27T19:34:39.1636611Z     Expected: true
2025-02-27T19:34:39.1637222Z     Received: false
2025-02-27T19:34:39.1637426Z 
2025-02-27T19:34:39.1638413Z     [0m [90m 214 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcompleteTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1639385Z      [90m 215 |[39m     
2025-02-27T19:34:39.1640464Z     [31m[1m>[22m[39m[90m 216 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:39.1641417Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:39.1642500Z      [90m 217 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:39.1643420Z      [90m 218 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:39.1644305Z      [90m 219 |[39m         type[33m:[39m [32m'tasks/completeTask'[39m[33m,[39m[0m
2025-02-27T19:34:39.1644865Z 
2025-02-27T19:34:39.1645471Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:216:20)
2025-02-27T19:34:39.1645927Z 
2025-02-27T19:34:39.1646591Z   ● Task System Integration › should cancel an in-progress task
2025-02-27T19:34:39.1647197Z 
2025-02-27T19:34:39.1647887Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:39.1648302Z 
2025-02-27T19:34:39.1648443Z     Expected: true
2025-02-27T19:34:39.1648996Z     Received: false
2025-02-27T19:34:39.1649208Z 
2025-02-27T19:34:39.1650423Z     [0m [90m 240 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcancelTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1651467Z      [90m 241 |[39m     
2025-02-27T19:34:39.1652484Z     [31m[1m>[22m[39m[90m 242 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:39.1653989Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:39.1655055Z      [90m 243 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:39.1656422Z      [90m 244 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:39.1657508Z      [90m 245 |[39m         type[33m:[39m [32m'tasks/cancelTask'[39m[33m,[39m[0m
2025-02-27T19:34:39.1658138Z 
2025-02-27T19:34:39.1658760Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:242:20)
2025-02-27T19:34:39.1659247Z 
2025-02-27T19:34:39.1660101Z   ● Task System Integration › should check all task requirements and unlock eligible tasks
2025-02-27T19:34:39.1660856Z 
2025-02-27T19:34:39.1661344Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:39.1661720Z 
2025-02-27T19:34:39.1662044Z     Expected: 2
2025-02-27T19:34:39.1662380Z     Received: 0
2025-02-27T19:34:39.1662575Z 
2025-02-27T19:34:39.1663708Z     [0m [90m 271 |[39m     [36mconst[39m unlocked [33m=[39m taskManager[33m.[39mcheckAllTaskRequirements()[33m;[39m
2025-02-27T19:34:39.1664665Z      [90m 272 |[39m     
2025-02-27T19:34:39.1665929Z     [31m[1m>[22m[39m[90m 273 |[39m     expect(unlocked)[33m.[39mtoBe([35m2[39m)[33m;[39m [90m// Two tasks should be unlocked[39m
2025-02-27T19:34:39.1667225Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:39.1668267Z      [90m 274 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:39.1669423Z      [90m 275 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:39.1670389Z      [90m 276 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:34:39.1670979Z 
2025-02-27T19:34:39.1671386Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:273:22)
2025-02-27T19:34:39.1672031Z 
2025-02-27T19:34:39.1672686Z   ● Task System Integration › should emit events when task status changes
2025-02-27T19:34:39.1673150Z 
2025-02-27T19:34:39.1673576Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-02-27T19:34:39.1673942Z 
2025-02-27T19:34:39.1674236Z     Expected: "test-task"
2025-02-27T19:34:39.1674463Z 
2025-02-27T19:34:39.1674587Z     Number of calls: 0
2025-02-27T19:34:39.1674782Z 
2025-02-27T19:34:39.1675309Z     [0m [90m 314 |[39m     
2025-02-27T19:34:39.1676138Z      [90m 315 |[39m     [90m// Verify events were emitted[39m
2025-02-27T19:34:39.1677372Z     [31m[1m>[22m[39m[90m 316 |[39m     expect(startedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1678475Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-02-27T19:34:39.1679613Z      [90m 317 |[39m     expect(completedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1680547Z      [90m 318 |[39m   })[33m;[39m
2025-02-27T19:34:39.1681065Z      [90m 319 |[39m   [0m
2025-02-27T19:34:39.1681313Z 
2025-02-27T19:34:39.1681739Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:316:29)
2025-02-27T19:34:39.1682228Z 
2025-02-27T19:34:39.1682811Z   ● Task System Integration › should provide progress information for a task
2025-02-27T19:34:39.1683325Z 
2025-02-27T19:34:39.1683527Z     expect(received).not.toBeNull()
2025-02-27T19:34:39.1683830Z 
2025-02-27T19:34:39.1683958Z     Received: null
2025-02-27T19:34:39.1684166Z 
2025-02-27T19:34:39.1685469Z     [0m [90m 334 |[39m     [36mconst[39m progress [33m=[39m taskManager[33m.[39mgetTaskProgress([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:39.1686422Z      [90m 335 |[39m     
2025-02-27T19:34:39.1687302Z     [31m[1m>[22m[39m[90m 336 |[39m     expect(progress)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
2025-02-27T19:34:39.1688207Z      [90m     |[39m                          [31m[1m^[22m[39m
2025-02-27T19:34:39.1689755Z      [90m 337 |[39m     expect(progress[33m?[39m[33m.[39mstatus)[33m.[39mtoBe([33mTaskStatus[39m[33m.[39m[33mIN_PROGRESS[39m)[33m;[39m
2025-02-27T19:34:39.1691203Z      [90m 338 |[39m     expect(progress[33m?[39m[33m.[39mprogress)[33m.[39mtoBe([35m50[39m)[33m;[39m
2025-02-27T19:34:39.1692609Z      [90m 339 |[39m     expect(progress[33m?[39m[33m.[39mtimeRemaining)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-02-27T19:34:39.1693282Z 
2025-02-27T19:34:39.1693714Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:336:26)
2025-02-27T19:34:39.1694205Z 
2025-02-27T19:34:39.3397587Z FAIL src/systems/__tests__/eventManager.test.ts
2025-02-27T19:34:39.3398569Z   ● Test suite failed to run
2025-02-27T19:34:39.3431791Z 
2025-02-27T19:34:39.3434798Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m65[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3437656Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3439447Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3440733Z 
2025-02-27T19:34:39.3441290Z     [7m65[0m     expect(() => eventManager.initialize(store)).not.toThrow();
2025-02-27T19:34:39.3442154Z     [7m  [0m [91m                                         ~~~~~[0m
2025-02-27T19:34:39.3442511Z 
2025-02-27T19:34:39.3442910Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3443723Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3444442Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3444942Z         'tutorial' is declared here.
2025-02-27T19:34:39.3448309Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m72[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3450892Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3452785Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3454127Z 
2025-02-27T19:34:39.3454549Z     [7m72[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3455485Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3455815Z 
2025-02-27T19:34:39.3456204Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3456965Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3457625Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3458101Z         'tutorial' is declared here.
2025-02-27T19:34:39.3461660Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m85[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3464311Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3466775Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3468111Z 
2025-02-27T19:34:39.3468539Z     [7m85[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3469204Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3469540Z 
2025-02-27T19:34:39.3469918Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3470738Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3471425Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3471888Z         'tutorial' is declared here.
2025-02-27T19:34:39.3535345Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m113[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3538204Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3540096Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3541420Z 
2025-02-27T19:34:39.3541863Z     [7m113[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3542509Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3542827Z 
2025-02-27T19:34:39.3543168Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3543888Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3544509Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3544962Z         'tutorial' is declared here.
2025-02-27T19:34:39.3547932Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m131[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3550377Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3552098Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3553338Z 
2025-02-27T19:34:39.3553727Z     [7m131[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3554355Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3554649Z 
2025-02-27T19:34:39.3554987Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3555983Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3556617Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3557070Z         'tutorial' is declared here.
2025-02-27T19:34:39.3560482Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3563144Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3564993Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3596899Z 
2025-02-27T19:34:39.3597317Z     [7m165[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3597988Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3598313Z 
2025-02-27T19:34:39.3598659Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3599420Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3600057Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3600505Z         'tutorial' is declared here.
2025-02-27T19:34:39.3603644Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m185[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3606327Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3608175Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3667508Z 
2025-02-27T19:34:39.3667947Z     [7m185[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3668635Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3668965Z 
2025-02-27T19:34:39.3669313Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3670065Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3670721Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3671183Z         'tutorial' is declared here.
2025-02-27T19:34:39.3674329Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m226[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3677100Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3678957Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3680261Z 
2025-02-27T19:34:39.3680638Z     [7m226[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3681283Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3681607Z 
2025-02-27T19:34:39.3681945Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3682671Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3683322Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3683786Z         'tutorial' is declared here.
2025-02-27T19:34:39.3704695Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m258[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3707491Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3709346Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3710899Z 
2025-02-27T19:34:39.3711298Z     [7m258[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3711956Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3712279Z 
2025-02-27T19:34:39.3712621Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3713351Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3713979Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3714429Z         'tutorial' is declared here.
2025-02-27T19:34:39.3717760Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m284[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:39.3720329Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:39.3722194Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:39.3723505Z 
2025-02-27T19:34:39.3723852Z     [7m284[0m     eventManager.initialize(store);
2025-02-27T19:34:39.3724493Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:39.3724805Z 
2025-02-27T19:34:39.3742883Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:39.3743728Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:39.3744370Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:39.3744824Z         'tutorial' is declared here.
2025-02-27T19:34:39.3745297Z 
2025-02-27T19:34:39.4136597Z PASS src/utils/__tests__/saveUtils.test.ts
2025-02-27T19:34:39.4280224Z   ● Console
2025-02-27T19:34:39.4307830Z 
2025-02-27T19:34:39.4308063Z     console.error
2025-02-27T19:34:39.4308602Z       Failed to save game: Error: Storage quota exceeded
2025-02-27T19:34:39.4309648Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:123:15)
2025-02-27T19:34:39.4310974Z           at /home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:397:39
2025-02-27T19:34:39.4312261Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:404:13)
2025-02-27T19:34:39.4313778Z           at Object.mockConstructor [as setItem] (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:108:19)
2025-02-27T19:34:39.4315286Z           at saveGame (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:56:18)
2025-02-27T19:34:39.4316544Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:127:30)
2025-02-27T19:34:39.4317973Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.4318955Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.4319956Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.4321774Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.4322980Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.4324118Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.4325688Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.4327499Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4328992Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4330317Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.4332079Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.4334109Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.4335896Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.4337265Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.4338622Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.4339351Z 
2025-02-27T19:34:39.4339920Z     [0m [90m 58 |[39m     [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.4340661Z      [90m 59 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:34:39.4341841Z     [31m[1m>[22m[39m[90m 60 |[39m     console[33m.[39merror([32m'Failed to save game:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.4342850Z      [90m    |[39m             [31m[1m^[22m[39m
2025-02-27T19:34:39.4343622Z      [90m 61 |[39m     [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:39.4344231Z      [90m 62 |[39m   }
2025-02-27T19:34:39.4344694Z      [90m 63 |[39m }[0m
2025-02-27T19:34:39.4344935Z 
2025-02-27T19:34:39.4345390Z       at saveGame (src/utils/saveUtils.ts:60:13)
2025-02-27T19:34:39.4346120Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:127:30)
2025-02-27T19:34:39.4346615Z 
2025-02-27T19:34:39.4346761Z     console.error
2025-02-27T19:34:39.4347391Z       Failed to load game: SyntaxError: Unexpected token i in JSON at position 0
2025-02-27T19:34:39.4348099Z           at JSON.parse (<anonymous>)
2025-02-27T19:34:39.4348855Z           at loadGame (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:79:37)
2025-02-27T19:34:39.4350009Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:164:30)
2025-02-27T19:34:39.4351353Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.4352330Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.4353315Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.4354633Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.4355976Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.4357133Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.4358452Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.4360183Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4361720Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4363100Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.4364813Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.4367308Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.4368815Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.4370134Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.4371449Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.4372171Z 
2025-02-27T19:34:39.4372639Z     [0m [90m 93 |[39m     [36mreturn[39m saveData[33m;[39m
2025-02-27T19:34:39.4373405Z      [90m 94 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:34:39.4374544Z     [31m[1m>[22m[39m[90m 95 |[39m     console[33m.[39merror([32m'Failed to load game:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.4375750Z      [90m    |[39m             [31m[1m^[22m[39m
2025-02-27T19:34:39.4376508Z      [90m 96 |[39m     [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:34:39.4377103Z      [90m 97 |[39m   }
2025-02-27T19:34:39.4377537Z      [90m 98 |[39m }[0m
2025-02-27T19:34:39.4377786Z 
2025-02-27T19:34:39.4378041Z       at loadGame (src/utils/saveUtils.ts:95:13)
2025-02-27T19:34:39.4378707Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:164:30)
2025-02-27T19:34:39.4379181Z 
2025-02-27T19:34:39.4379351Z     console.error
2025-02-27T19:34:39.4379815Z       Failed to delete save: Error: Storage error
2025-02-27T19:34:39.4380822Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:214:15)
2025-02-27T19:34:39.4382038Z           at /home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:397:39
2025-02-27T19:34:39.4383242Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:404:13)
2025-02-27T19:34:39.4384731Z           at Object.mockConstructor [as removeItem] (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:103:19)
2025-02-27T19:34:39.4386258Z           at deleteSave (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:105:18)
2025-02-27T19:34:39.4387456Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:218:32)
2025-02-27T19:34:39.4388861Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.4389825Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.4390785Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.4392112Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.4393218Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.4394251Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.4395708Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.4397108Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4398764Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4400009Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.4408259Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.4410393Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.4411884Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.4413128Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.4414383Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.4415068Z 
2025-02-27T19:34:39.4415734Z     [0m [90m 108 |[39m     [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:34:39.4416423Z      [90m 109 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:34:39.4417489Z     [31m[1m>[22m[39m[90m 110 |[39m     console[33m.[39merror([32m'Failed to delete save:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.4418400Z      [90m     |[39m             [31m[1m^[22m[39m
2025-02-27T19:34:39.4419102Z      [90m 111 |[39m     [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:39.4419638Z      [90m 112 |[39m   }
2025-02-27T19:34:39.4420033Z      [90m 113 |[39m }[0m
2025-02-27T19:34:39.4420258Z 
2025-02-27T19:34:39.4420507Z       at deleteSave (src/utils/saveUtils.ts:110:13)
2025-02-27T19:34:39.4421193Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:218:32)
2025-02-27T19:34:39.4421641Z 
2025-02-27T19:34:39.4421770Z     console.error
2025-02-27T19:34:39.4422147Z       No backup found at index 0
2025-02-27T19:34:39.4422408Z 
2025-02-27T19:34:39.4422642Z     [0m [90m 165 |[39m     
2025-02-27T19:34:39.4423265Z      [90m 166 |[39m     [36mif[39m ([33m![39mserializedState) {
2025-02-27T19:34:39.4424420Z     [31m[1m>[22m[39m[90m 167 |[39m       console[33m.[39merror([32m'No backup found at index'[39m[33m,[39m backupIndex)[33m;[39m
2025-02-27T19:34:39.4425566Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.4426266Z      [90m 168 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:34:39.4426801Z      [90m 169 |[39m     }
2025-02-27T19:34:39.4427255Z      [90m 170 |[39m     [0m
2025-02-27T19:34:39.4427498Z 
2025-02-27T19:34:39.4427793Z       at restoreFromBackup (src/utils/saveUtils.ts:167:15)
2025-02-27T19:34:39.4428524Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:272:39)
2025-02-27T19:34:39.4428961Z 
2025-02-27T19:34:39.4429089Z     console.error
2025-02-27T19:34:39.4429419Z       Invalid backup index
2025-02-27T19:34:39.4429661Z 
2025-02-27T19:34:39.4429943Z     [0m [90m 157 |[39m   [36mtry[39m {
2025-02-27T19:34:39.4430844Z      [90m 158 |[39m     [36mif[39m (backupIndex [33m>=[39m [33mBACKUP_SAVE_KEYS[39m[33m.[39mlength) {
2025-02-27T19:34:39.4431974Z     [31m[1m>[22m[39m[90m 159 |[39m       console[33m.[39merror([32m'Invalid backup index'[39m)[33m;[39m
2025-02-27T19:34:39.4432808Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.4433482Z      [90m 160 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:34:39.4434039Z      [90m 161 |[39m     }
2025-02-27T19:34:39.4434506Z      [90m 162 |[39m     [0m
2025-02-27T19:34:39.4434741Z 
2025-02-27T19:34:39.4435024Z       at restoreFromBackup (src/utils/saveUtils.ts:159:15)
2025-02-27T19:34:39.4435912Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:280:39)
2025-02-27T19:34:39.4436335Z 
2025-02-27T19:34:39.4436474Z     console.error
2025-02-27T19:34:39.4437319Z       Failed to import save: SyntaxError: Unexpected token o in JSON at position 1
2025-02-27T19:34:39.4437973Z           at JSON.parse (<anonymous>)
2025-02-27T19:34:39.4438681Z           at importSave (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:197:37)
2025-02-27T19:34:39.4439755Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:324:32)
2025-02-27T19:34:39.4441352Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:39.4442244Z           at new Promise (<anonymous>)
2025-02-27T19:34:39.4443190Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:39.4444377Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:39.4494262Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:39.4495562Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:39.4496916Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:39.4498410Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4499847Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:39.4501087Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:39.4502726Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:39.4504629Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:39.4506321Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:39.4507573Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:39.4508840Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:39.4509539Z 
2025-02-27T19:34:39.4509989Z     [0m [90m 208 |[39m     [36mreturn[39m saveData[33m;[39m
2025-02-27T19:34:39.4510682Z      [90m 209 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:34:39.4511768Z     [31m[1m>[22m[39m[90m 210 |[39m     console[33m.[39merror([32m'Failed to import save:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:39.4512701Z      [90m     |[39m             [31m[1m^[22m[39m
2025-02-27T19:34:39.4513407Z      [90m 211 |[39m     [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:34:39.4513948Z      [90m 212 |[39m   }
2025-02-27T19:34:39.4514368Z      [90m 213 |[39m }[0m
2025-02-27T19:34:39.4514602Z 
2025-02-27T19:34:39.4514863Z       at importSave (src/utils/saveUtils.ts:210:13)
2025-02-27T19:34:39.4515784Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:324:32)
2025-02-27T19:34:39.4516238Z 
2025-02-27T19:34:39.4516379Z     console.error
2025-02-27T19:34:39.4516770Z       Invalid save data format
2025-02-27T19:34:39.4517034Z 
2025-02-27T19:34:39.4517431Z     [0m [90m 199 |[39m     [90m// Validate the data[39m
2025-02-27T19:34:39.4518688Z      [90m 200 |[39m     [36mif[39m ([33m![39msaveData [33m||[39m [33m![39msaveData[33m.[39mversion [33m||[39m [33m![39msaveData[33m.[39mstate) {
2025-02-27T19:34:39.4520124Z     [31m[1m>[22m[39m[90m 201 |[39m       console[33m.[39merror([32m'Invalid save data format'[39m)[33m;[39m
2025-02-27T19:34:39.4521228Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:39.4521989Z      [90m 202 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:34:39.4522565Z      [90m 203 |[39m     }
2025-02-27T19:34:39.4523042Z      [90m 204 |[39m     [0m
2025-02-27T19:34:39.4523294Z 
2025-02-27T19:34:39.4523541Z       at importSave (src/utils/saveUtils.ts:201:15)
2025-02-27T19:34:39.4524248Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:335:32)
2025-02-27T19:34:39.4524929Z 
2025-02-27T19:34:40.1476965Z PASS src/managers/TaskManager.test.ts
2025-02-27T19:34:40.2065249Z   ● Console
2025-02-27T19:34:40.2065468Z 
2025-02-27T19:34:40.2065606Z     console.log
2025-02-27T19:34:40.2066097Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2066403Z 
2025-02-27T19:34:40.2066827Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2067319Z 
2025-02-27T19:34:40.2067450Z     console.log
2025-02-27T19:34:40.2067876Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2068184Z 
2025-02-27T19:34:40.2068614Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2069125Z 
2025-02-27T19:34:40.2069246Z     console.log
2025-02-27T19:34:40.2069633Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2069938Z 
2025-02-27T19:34:40.2070368Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2070884Z 
2025-02-27T19:34:40.2071016Z     console.error
2025-02-27T19:34:40.2071399Z       Task non-existent-task not found
2025-02-27T19:34:40.2071685Z 
2025-02-27T19:34:40.2072114Z     [0m [90m 267 |[39m       [90m// Validate task exists[39m
2025-02-27T19:34:40.2072805Z      [90m 268 |[39m       [36mif[39m ([33m![39mtask) {
2025-02-27T19:34:40.2073804Z     [31m[1m>[22m[39m[90m 269 |[39m         console[33m.[39merror([32m`Task ${taskId} not found`[39m)[33m;[39m
2025-02-27T19:34:40.2074656Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:34:40.2075537Z      [90m 270 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:40.2076096Z      [90m 271 |[39m       }
2025-02-27T19:34:40.2076545Z      [90m 272 |[39m       [0m
2025-02-27T19:34:40.2076788Z 
2025-02-27T19:34:40.2077135Z       at TaskManager.startTask (src/managers/TaskManager.ts:269:17)
2025-02-27T19:34:40.2077888Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:148:43)
2025-02-27T19:34:40.2078319Z 
2025-02-27T19:34:40.2078446Z     console.warn
2025-02-27T19:34:40.2078960Z       Task in-progress-task is not available (status: in_progress)
2025-02-27T19:34:40.2079359Z 
2025-02-27T19:34:40.2079745Z     [0m [90m 279 |[39m       [90m// Check if task is available[39m
2025-02-27T19:34:40.2080814Z      [90m 280 |[39m       [36mif[39m (task[33m.[39mstatus [33m!==[39m [33mTaskStatus[39m[33m.[39m[33mAVAILABLE[39m) {
2025-02-27T19:34:40.2082244Z     [31m[1m>[22m[39m[90m 281 |[39m         console[33m.[39mwarn([32m`Task ${taskId} is not available (status: ${task.status})`[39m)[33m;[39m
2025-02-27T19:34:40.2083189Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:34:40.2083901Z      [90m 282 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:40.2084489Z      [90m 283 |[39m       }
2025-02-27T19:34:40.2084933Z      [90m 284 |[39m       [0m
2025-02-27T19:34:40.2085314Z 
2025-02-27T19:34:40.2085647Z       at TaskManager.startTask (src/managers/TaskManager.ts:281:17)
2025-02-27T19:34:40.2086314Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:152:42)
2025-02-27T19:34:40.2086687Z 
2025-02-27T19:34:40.2086812Z     console.warn
2025-02-27T19:34:40.2087229Z       Task locked-task is not available (status: locked)
2025-02-27T19:34:40.2087582Z 
2025-02-27T19:34:40.2087978Z     [0m [90m 279 |[39m       [90m// Check if task is available[39m
2025-02-27T19:34:40.2089318Z      [90m 280 |[39m       [36mif[39m (task[33m.[39mstatus [33m!==[39m [33mTaskStatus[39m[33m.[39m[33mAVAILABLE[39m) {
2025-02-27T19:34:40.2090804Z     [31m[1m>[22m[39m[90m 281 |[39m         console[33m.[39mwarn([32m`Task ${taskId} is not available (status: ${task.status})`[39m)[33m;[39m
2025-02-27T19:34:40.2091790Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:34:40.2092494Z      [90m 282 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:40.2093367Z      [90m 283 |[39m       }
2025-02-27T19:34:40.2093825Z      [90m 284 |[39m       [0m
2025-02-27T19:34:40.2094078Z 
2025-02-27T19:34:40.2094418Z       at TaskManager.startTask (src/managers/TaskManager.ts:281:17)
2025-02-27T19:34:40.2125574Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:156:38)
2025-02-27T19:34:40.2126045Z 
2025-02-27T19:34:40.2126184Z     console.log
2025-02-27T19:34:40.2126592Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2126907Z 
2025-02-27T19:34:40.2127364Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2127879Z 
2025-02-27T19:34:40.2128011Z     console.log
2025-02-27T19:34:40.2128397Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2128711Z 
2025-02-27T19:34:40.2129142Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2129639Z 
2025-02-27T19:34:40.2129762Z     console.log
2025-02-27T19:34:40.2130228Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2130541Z 
2025-02-27T19:34:40.2130987Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2131502Z 
2025-02-27T19:34:40.2131635Z     console.log
2025-02-27T19:34:40.2132107Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2132429Z 
2025-02-27T19:34:40.2132867Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2133387Z 
2025-02-27T19:34:40.2133507Z     console.log
2025-02-27T19:34:40.2133911Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2134212Z 
2025-02-27T19:34:40.2134649Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2135328Z 
2025-02-27T19:34:40.2135464Z     console.log
2025-02-27T19:34:40.2135861Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2136166Z 
2025-02-27T19:34:40.2136590Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2137113Z 
2025-02-27T19:34:40.2137231Z     console.log
2025-02-27T19:34:40.2137617Z       TaskManager: Registered with GameLoop
2025-02-27T19:34:40.2137922Z 
2025-02-27T19:34:40.2138344Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:34:40.2138838Z 
2025-02-27T19:34:40.2841593Z PASS src/state/middleware/taskMiddleware.test.ts
2025-02-27T19:34:40.6346028Z FAIL src/systems/__tests__/gameLoop.test.ts
2025-02-27T19:34:40.6371247Z   ● Test suite failed to run
2025-02-27T19:34:40.6371581Z 
2025-02-27T19:34:40.6374506Z     [96msrc/systems/__tests__/gameLoop.test.ts[0m:[93m87[0m:[93m25[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:40.6377265Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:40.6379157Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:40.6380475Z 
2025-02-27T19:34:40.6380850Z     [7m87[0m     gameLoop.initialize(store);
2025-02-27T19:34:40.6381470Z     [7m  [0m [91m                        ~~~~~[0m
2025-02-27T19:34:40.6381781Z 
2025-02-27T19:34:40.6382478Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:40.6383280Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:40.6383928Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:40.6384385Z         'tutorial' is declared here.
2025-02-27T19:34:40.6384660Z 
2025-02-27T19:34:41.3036466Z PASS src/core/GameTimer.test.ts
2025-02-27T19:34:41.5699200Z FAIL src/gameCore.integration.test.tsx
2025-02-27T19:34:41.5705315Z   ● Game Core Systems Integration › Building purchase consumes resources correctly
2025-02-27T19:34:41.5709422Z 
2025-02-27T19:34:41.5713450Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:34:41.5717617Z 
2025-02-27T19:34:41.5722475Z     [0m [90m 165 |[39m     
2025-02-27T19:34:41.5724750Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:41.5728360Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:41.5730778Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:41.5747801Z      [90m 168 |[39m     
2025-02-27T19:34:41.5748704Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:41.5749917Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:41.5750498Z 
2025-02-27T19:34:41.5751010Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:41.5752071Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:194:58)
2025-02-27T19:34:41.5753338Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:171:36)
2025-02-27T19:34:41.5756358Z 
2025-02-27T19:34:41.5758203Z   ● Game Core Systems Integration › Building level affects production calculation
2025-02-27T19:34:41.5759270Z 
2025-02-27T19:34:41.5759936Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:34:41.5760985Z 
2025-02-27T19:34:41.5761609Z     [0m [90m 274 |[39m     
2025-02-27T19:34:41.5762547Z      [90m 275 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:41.5763816Z     [31m[1m>[22m[39m[90m 276 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:41.5764849Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:41.5765628Z      [90m 277 |[39m     
2025-02-27T19:34:41.5766225Z      [90m 278 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:41.5766937Z      [90m 279 |[39m       [36mreturn[39m {}[33m;[39m[0m
2025-02-27T19:34:41.5767283Z 
2025-02-27T19:34:41.5767809Z       at BuildingManager.calculateUpgradeCost (src/systems/buildingManager.ts:276:38)
2025-02-27T19:34:41.5768757Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:209:41)
2025-02-27T19:34:41.5769258Z 
2025-02-27T19:34:41.6124539Z PASS src/core/GameManager.test.ts
2025-02-27T19:34:41.6463431Z   ● Console
2025-02-27T19:34:41.6463685Z 
2025-02-27T19:34:41.6463841Z     console.log
2025-02-27T19:34:41.6464347Z       GameManager: Started time scale sync interval
2025-02-27T19:34:41.6464738Z 
2025-02-27T19:34:41.6465477Z       at GameManager.startTimeScaleSync (src/core/GameManager.ts:269:15)
2025-02-27T19:34:41.6466062Z 
2025-02-27T19:34:41.6466207Z     console.log
2025-02-27T19:34:41.6466687Z       GameManager: Started Redux time sync interval
2025-02-27T19:34:41.6467045Z 
2025-02-27T19:34:41.6467511Z       at GameManager.startReduxTimeSync (src/core/GameManager.ts:309:15)
2025-02-27T19:34:41.6468005Z 
2025-02-27T19:34:41.6468157Z     console.error
2025-02-27T19:34:41.6469048Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:34:41.6470891Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:34:41.6472330Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6473901Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6475884Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6477275Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6478796Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6480212Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6481846Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:34:41.6483569Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6484836Z           at GameManager.update (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:420:12)
2025-02-27T19:34:41.6492678Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:110:5)
2025-02-27T19:34:41.6494017Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:41.6494939Z           at new Promise (<anonymous>)
2025-02-27T19:34:41.6496083Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:41.6497452Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:41.6498570Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:41.6499651Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:41.6500996Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:41.6502512Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:41.6503799Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:41.6505697Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:41.6507675Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:41.6509232Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:41.6510533Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:41.6511847Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:41.6512585Z 
2025-02-27T19:34:41.6512986Z     [0m [90m 725 |[39m       }
2025-02-27T19:34:41.6513608Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:41.6514875Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:41.6516426Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:41.6517256Z      [90m 728 |[39m     }
2025-02-27T19:34:41.6517772Z      [90m 729 |[39m     
2025-02-27T19:34:41.6518485Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:34:41.6518925Z 
2025-02-27T19:34:41.6519639Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:34:41.6520837Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6521914Z       at GameManager.update (src/core/GameManager.ts:420:12)
2025-02-27T19:34:41.6522658Z       at Object.<anonymous> (src/core/GameManager.test.ts:110:5)
2025-02-27T19:34:41.6523077Z 
2025-02-27T19:34:41.6523217Z     console.error
2025-02-27T19:34:41.6524078Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:34:41.6525641Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:34:41.6527085Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6616366Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6617905Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6619403Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6620991Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6622458Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6624155Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:34:41.6738760Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6740161Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:133:26)
2025-02-27T19:34:41.6741542Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:41.6742554Z           at new Promise (<anonymous>)
2025-02-27T19:34:41.6743552Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:41.6744971Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:41.6746291Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:41.6747380Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:41.6748702Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:41.6750174Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:41.6751387Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:41.6753093Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:41.6755046Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:41.6756792Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:41.6758536Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:41.6759912Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:41.6760635Z 
2025-02-27T19:34:41.6761138Z     [0m [90m 725 |[39m       }
2025-02-27T19:34:41.6761764Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:41.6763323Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:41.6764453Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:41.6765002Z      [90m 728 |[39m     }
2025-02-27T19:34:41.6794385Z      [90m 729 |[39m     
2025-02-27T19:34:41.6795346Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:34:41.6795775Z 
2025-02-27T19:34:41.6796445Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:34:41.6797629Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6798461Z       at Object.<anonymous> (src/core/GameManager.test.ts:133:26)
2025-02-27T19:34:41.6798886Z 
2025-02-27T19:34:41.6799048Z     console.error
2025-02-27T19:34:41.6799933Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:34:41.6801305Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:34:41.6802693Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6804263Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6805926Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6807363Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:41.6808917Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:41.6810370Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:41.6812046Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:34:41.6813682Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6814949Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:153:26)
2025-02-27T19:34:41.6816414Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:41.6817287Z           at new Promise (<anonymous>)
2025-02-27T19:34:41.6818202Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:41.6819457Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:41.6820515Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:41.6821522Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:41.6822778Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:41.6824136Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:41.6876052Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:41.6877812Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:41.6879804Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:41.6881670Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:41.6883005Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:41.6884313Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:34:41.6885035Z 
2025-02-27T19:34:41.6885577Z     [0m [90m 725 |[39m       }
2025-02-27T19:34:41.6886219Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:34:41.6887456Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:34:41.6888520Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:41.6889060Z      [90m 728 |[39m     }
2025-02-27T19:34:41.6889486Z      [90m 729 |[39m     
2025-02-27T19:34:41.6890230Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:34:41.6890679Z 
2025-02-27T19:34:41.6891409Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:34:41.6892616Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:34:41.6893451Z       at Object.<anonymous> (src/core/GameManager.test.ts:153:26)
2025-02-27T19:34:41.6893854Z 
2025-02-27T19:34:42.0006915Z FAIL src/state/selectors.test.ts
2025-02-27T19:34:42.0007785Z   ● Test suite failed to run
2025-02-27T19:34:42.0008057Z 
2025-02-27T19:34:42.0011705Z     [96msrc/state/selectors.test.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2352: [0mConversion of type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' to type 'RootState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-27T19:34:42.0016772Z       Property 'tutorial' is missing in type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' but required in type 'RootState'.
2025-02-27T19:34:42.0018627Z 
2025-02-27T19:34:42.0066185Z     [7m 94[0m   const mockState: RootState = {
2025-02-27T19:34:42.0067214Z     [7m   [0m [91m                               ~[0m
2025-02-27T19:34:42.0067789Z     [7m 95[0m     resources: {
2025-02-27T19:34:42.0068302Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:42.0068733Z     [7m...[0m 
2025-02-27T19:34:42.0069112Z     [7m163[0m     }
2025-02-27T19:34:42.0069515Z     [7m   [0m [91m~~~~~[0m
2025-02-27T19:34:42.0069973Z     [7m164[0m   } as RootState;
2025-02-27T19:34:42.0070460Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:42.0070732Z 
2025-02-27T19:34:42.0071121Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:42.0071841Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:42.0072453Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:42.0072894Z         'tutorial' is declared here.
2025-02-27T19:34:42.0073568Z 
2025-02-27T19:34:42.7719979Z PASS src/tests/gameSystemCoherenceTest.test.ts
2025-02-27T19:34:42.8379417Z PASS src/systems/gameLoop.test.ts
2025-02-27T19:34:42.8440717Z   ● Console
2025-02-27T19:34:42.8442474Z 
2025-02-27T19:34:42.8446228Z     console.log
2025-02-27T19:34:42.8448391Z       GameLoop: Window event listeners attached
2025-02-27T19:34:42.8448749Z 
2025-02-27T19:34:42.8449185Z       at GameLoop.setupWindowEventListeners (src/systems/gameLoop.ts:516:13)
2025-02-27T19:34:42.8450071Z 
2025-02-27T19:34:42.8450197Z     console.log
2025-02-27T19:34:42.8450700Z       gameSlice.addPlayTime: Adding 10.00s, old=0.00, new=10.00
2025-02-27T19:34:42.8451096Z 
2025-02-27T19:34:42.8451347Z       at addPlayTime (src/state/gameSlice.ts:62:17)
2025-02-27T19:34:42.8451872Z           at Array.reduce (<anonymous>)
2025-02-27T19:34:42.8452158Z 
2025-02-27T19:34:42.8689535Z FAIL src/workers.integration.test.tsx
2025-02-27T19:34:42.8709304Z   ● Worker System Integration Test › WorkerManager can assign and manage workers
2025-02-27T19:34:42.8709974Z 
2025-02-27T19:34:42.8711831Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:42.8713501Z 
2025-02-27T19:34:42.8715506Z     [0m [90m 190 |[39m     
2025-02-27T19:34:42.8717783Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:42.8720445Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:42.8722901Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:42.8765516Z      [90m 193 |[39m     
2025-02-27T19:34:42.8766406Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:42.8767221Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:42.8767609Z 
2025-02-27T19:34:42.8768125Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:42.8769038Z       at Object.<anonymous> (src/workers.integration.test.tsx:105:19)
2025-02-27T19:34:42.8769478Z 
2025-02-27T19:34:43.8370201Z FAIL src/systems/__tests__/oppressionSystem.test.ts
2025-02-27T19:34:43.8381009Z   ● Console
2025-02-27T19:34:43.8382403Z 
2025-02-27T19:34:43.8383740Z     console.log
2025-02-27T19:34:43.8385380Z       Resources before: {
2025-02-27T19:34:43.8386944Z         "collective-power": {
2025-02-27T19:34:43.8388569Z           "id": "collective-power",
2025-02-27T19:34:43.8390226Z           "name": "Collective Power",
2025-02-27T19:34:43.8391818Z           "amount": 0,
2025-02-27T19:34:43.8393288Z           "maxAmount": 1000,
2025-02-27T19:34:43.8394797Z           "perSecond": 0.1,
2025-02-27T19:34:43.8396554Z           "basePerSecond": 0.1,
2025-02-27T19:34:43.8398127Z           "description": "Test power resource",
2025-02-27T19:34:43.8399679Z           "unlocked": true,
2025-02-27T19:34:43.8401203Z           "category": "primary",
2025-02-27T19:34:43.8402744Z           "clickPower": 1
2025-02-27T19:34:43.8404244Z         },
2025-02-27T19:34:43.8405799Z         "oppression": {
2025-02-27T19:34:43.8406991Z           "id": "oppression",
2025-02-27T19:34:43.8407911Z           "name": "Corporate Oppression",
2025-02-27T19:34:43.8408388Z           "amount": 0,
2025-02-27T19:34:43.8408755Z           "maxAmount": 1000,
2025-02-27T19:34:43.8409152Z           "perSecond": 0.05,
2025-02-27T19:34:43.8409617Z           "basePerSecond": 0.05,
2025-02-27T19:34:43.8410143Z           "description": "Test oppression resource",
2025-02-27T19:34:43.8410630Z           "unlocked": true,
2025-02-27T19:34:43.8411058Z           "category": "threat"
2025-02-27T19:34:43.8411437Z         }
2025-02-27T19:34:43.8411732Z       }
2025-02-27T19:34:43.8411898Z 
2025-02-27T19:34:43.8412360Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:63:13)
2025-02-27T19:34:43.8412876Z 
2025-02-27T19:34:43.8419244Z   ● Oppression System › oppression resource should generate at the specified rate
2025-02-27T19:34:43.8420251Z 
2025-02-27T19:34:43.8420853Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:43.8421479Z 
2025-02-27T19:34:43.8422000Z     [0m [90m 178 |[39m     
2025-02-27T19:34:43.8423126Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:43.8425805Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:43.8427948Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:43.8429702Z      [90m 181 |[39m     
2025-02-27T19:34:43.8430399Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:43.8432388Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:43.8433997Z 
2025-02-27T19:34:43.8435721Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:43.8438104Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:67:21)
2025-02-27T19:34:43.8439434Z 
2025-02-27T19:34:43.8440051Z   ● Oppression System › oppression should continue to generate in multiple ticks
2025-02-27T19:34:43.8440575Z 
2025-02-27T19:34:43.8440935Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:43.8441376Z 
2025-02-27T19:34:43.8441609Z     [0m [90m 178 |[39m     
2025-02-27T19:34:43.8442506Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:43.8444833Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:43.8446727Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:43.8447252Z      [90m 181 |[39m     
2025-02-27T19:34:43.8447777Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:43.8448607Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:43.8449084Z 
2025-02-27T19:34:43.8449530Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:43.8450463Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:85:23)
2025-02-27T19:34:43.8450956Z 
2025-02-27T19:34:43.8451604Z   ● Oppression System › oppression should generate even if its perSecond property is modified
2025-02-27T19:34:43.8452177Z 
2025-02-27T19:34:43.8452522Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:43.8452956Z 
2025-02-27T19:34:43.8453213Z     [0m [90m 178 |[39m     
2025-02-27T19:34:43.8454114Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:43.8456519Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:43.8458197Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:43.8458713Z      [90m 181 |[39m     
2025-02-27T19:34:43.8459240Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:43.8460078Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:43.8460555Z 
2025-02-27T19:34:43.8461000Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:43.8462175Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:107:21)
2025-02-27T19:34:43.8462696Z 
2025-02-27T19:34:43.8463307Z   ● Oppression System › oppression generation should scale with time delta correctly
2025-02-27T19:34:43.8463824Z 
2025-02-27T19:34:43.8464180Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:43.8464610Z 
2025-02-27T19:34:43.8464851Z     [0m [90m 178 |[39m     
2025-02-27T19:34:43.8466189Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:43.8468507Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:43.8470175Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:43.8470704Z      [90m 181 |[39m     
2025-02-27T19:34:43.8471238Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:43.8472075Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:43.8472536Z 
2025-02-27T19:34:43.8472990Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:43.8473927Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:127:23)
2025-02-27T19:34:43.8474428Z 
2025-02-27T19:34:44.2197228Z PASS src/components/progression/__tests__/ProgressionTracker.test.tsx
2025-02-27T19:34:44.4993503Z PASS src/components/buildings/__tests__/BuildingItem.test.tsx
2025-02-27T19:34:44.5508926Z PASS src/systems/__tests__/gameEndConditions.test.ts
2025-02-27T19:34:44.7846443Z PASS src/utils/__tests__/timeUtils.test.ts
2025-02-27T19:34:45.0916205Z PASS src/state/structuresSlice.test.ts
2025-02-27T19:34:45.8410925Z PASS src/components/ResourceList.test.tsx
2025-02-27T19:34:46.5773769Z PASS src/components/buildings/__tests__/BuildingList.test.tsx
2025-02-27T19:34:47.7436619Z PASS src/components/progression/__tests__/MilestoneProgressStrip.test.tsx
2025-02-27T19:34:48.0005454Z PASS src/components/__tests__/GameTimer.test.tsx
2025-02-27T19:34:48.6542366Z PASS src/components/ResourceDisplay.test.tsx
2025-02-27T19:34:49.1051938Z FAIL src/components/App.test.tsx
2025-02-27T19:34:49.1053020Z   ● Test suite failed to run
2025-02-27T19:34:49.1053605Z 
2025-02-27T19:34:49.1054889Z     [96msrc/managers/TutorialManager.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../state/store"' has no exported member 'AppState'.
2025-02-27T19:34:49.1056034Z 
2025-02-27T19:34:49.1056583Z     [7m3[0m import { AppState } from '../state/store';
2025-02-27T19:34:49.1057610Z     [7m [0m [91m         ~~~~~~~~[0m
2025-02-27T19:34:49.1059432Z     [96msrc/managers/TutorialManager.ts[0m:[93m79[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:49.1060589Z 
2025-02-27T19:34:49.1060976Z     [7m79[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:34:49.1061668Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:49.1063472Z     [96msrc/managers/TutorialManager.ts[0m:[93m99[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:49.1064630Z 
2025-02-27T19:34:49.1064997Z     [7m99[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:34:49.1065921Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:49.1068031Z     [96msrc/managers/TutorialManager.ts[0m:[93m155[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:49.1069201Z 
2025-02-27T19:34:49.1069558Z     [7m155[0m       return tutorialContent[currentStep];
2025-02-27T19:34:49.1070195Z     [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:49.1070496Z 
2025-02-27T19:34:49.2386972Z PASS src/components/__tests__/OfflineProgressModal.test.tsx
2025-02-27T19:34:49.2443601Z   ● Console
2025-02-27T19:34:49.2443819Z 
2025-02-27T19:34:49.2443952Z     console.error
2025-02-27T19:34:49.2444606Z       An update to OfflineProgressModal inside a test was not wrapped in act(...).
2025-02-27T19:34:49.2445496Z       
2025-02-27T19:34:49.2446123Z       When testing, code that causes React state updates should be wrapped into act(...):
2025-02-27T19:34:49.2446730Z       
2025-02-27T19:34:49.2446993Z       act(() => {
2025-02-27T19:34:49.2447353Z         /* fire events that update state */
2025-02-27T19:34:49.2447774Z       });
2025-02-27T19:34:49.2448092Z       /* assert on the output */
2025-02-27T19:34:49.2448437Z       
2025-02-27T19:34:49.2449342Z       This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-02-27T19:34:49.2450096Z 
2025-02-27T19:34:49.2450661Z     [0m [90m 37 |[39m       [90m// Reset closing state after the animation completes[39m
2025-02-27T19:34:49.2451415Z      [90m 38 |[39m       setTimeout(() [33m=>[39m {
2025-02-27T19:34:49.2452178Z     [31m[1m>[22m[39m[90m 39 |[39m         setIsClosing([36mfalse[39m)[33m;[39m
2025-02-27T19:34:49.2452852Z      [90m    |[39m         [31m[1m^[22m[39m
2025-02-27T19:34:49.2453461Z      [90m 40 |[39m       }[33m,[39m [35m100[39m)[33m;[39m
2025-02-27T19:34:49.2454247Z      [90m 41 |[39m     }[33m,[39m [35m300[39m)[33m;[39m [90m// Animation duration[39m
2025-02-27T19:34:49.2454883Z      [90m 42 |[39m   }[33m;[39m[0m
2025-02-27T19:34:49.2455310Z 
2025-02-27T19:34:49.2455715Z       at node_modules/react-dom/cjs/react-dom-client.development.js:15751:19
2025-02-27T19:34:49.2456673Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:34:49.2457909Z       at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:15750:9)
2025-02-27T19:34:49.2459174Z       at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14311:11)
2025-02-27T19:34:49.2460372Z       at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:7208:13)
2025-02-27T19:34:49.2461429Z       at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:7161:7)
2025-02-27T19:34:49.2462431Z       at src/components/OfflineProgressModal.tsx:39:9
2025-02-27T19:34:49.2463482Z       at callTimer (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:744:24)
2025-02-27T19:34:49.2464663Z       at doTickInner (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1312:29)
2025-02-27T19:34:49.2465906Z       at doTick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1393:20)
2025-02-27T19:34:49.2471991Z       at Object.tick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1401:20)
2025-02-27T19:34:49.2473733Z       at FakeTimers.advanceTimersByTime (node_modules/@jest/fake-timers/build/modernFakeTimers.js:94:19)
2025-02-27T19:34:49.2475792Z       at Object.<anonymous> (src/components/__tests__/OfflineProgressModal.test.tsx:83:10)
2025-02-27T19:34:49.2476630Z 
2025-02-27T19:34:49.7700683Z PASS src/components/ui/__tests__/Dropdown.test.tsx
2025-02-27T19:34:49.7704919Z   ● Console
2025-02-27T19:34:49.7708631Z 
2025-02-27T19:34:49.7712087Z     console.log
2025-02-27T19:34:49.7715926Z       Dropdown styles: {
2025-02-27T19:34:49.7720112Z         backgroundColor: 'rgb(25, 25, 25)',
2025-02-27T19:34:49.7724511Z         border: '1px solid #333',
2025-02-27T19:34:49.7728702Z         padding: '8px'
2025-02-27T19:34:49.7732936Z       }
2025-02-27T19:34:49.7737240Z 
2025-02-27T19:34:49.7741755Z       at Object.<anonymous> (src/components/ui/__tests__/Dropdown.test.tsx:70:15)
2025-02-27T19:34:49.7746331Z 
2025-02-27T19:34:50.4766979Z PASS src/components/tutorial/__tests__/TutorialModal.test.tsx
2025-02-27T19:34:50.6368991Z PASS src/components/ui/__tests__/Modal.test.tsx
2025-02-27T19:34:50.9423954Z PASS src/components/resources/__tests__/PassiveUpgradePanel.test.tsx
2025-02-27T19:34:51.1691255Z PASS src/state/resourcesSlice.test.ts
2025-02-27T19:34:51.7584498Z PASS src/components/resources/__tests__/ResourceDisplay.test.tsx
2025-02-27T19:34:52.0190037Z PASS src/components/GameTimer.test.tsx
2025-02-27T19:34:52.2631003Z PASS src/components/ui/__tests__/Icon.test.tsx
2025-02-27T19:34:52.3808939Z PASS src/state/gameSlice.test.ts
2025-02-27T19:34:52.3825631Z   ● Console
2025-02-27T19:34:52.3826363Z 
2025-02-27T19:34:52.3826996Z     console.log
2025-02-27T19:34:52.3827803Z       gameSlice.addPlayTime: Adding 50.00s, old=100.00, new=150.00
2025-02-27T19:34:52.3828225Z 
2025-02-27T19:34:52.3828472Z       at addPlayTime (src/state/gameSlice.ts:62:17)
2025-02-27T19:34:52.3828994Z           at Array.reduce (<anonymous>)
2025-02-27T19:34:52.3829279Z 
2025-02-27T19:34:52.3829399Z     console.log
2025-02-27T19:34:52.3829929Z       gameSlice.setTotalPlayTime: Setting time from 0.00s to 500.00s
2025-02-27T19:34:52.3830353Z 
2025-02-27T19:34:52.3830628Z       at setTotalPlayTime (src/state/gameSlice.ts:70:15)
2025-02-27T19:34:52.3831165Z           at Array.reduce (<anonymous>)
2025-02-27T19:34:52.3831440Z 
2025-02-27T19:34:52.8553486Z PASS src/components/ui/__tests__/Button.test.tsx
2025-02-27T19:34:53.0476460Z PASS src/components/workers/__tests__/WorkerOverview.test.tsx
2025-02-27T19:34:53.2149370Z PASS src/components/ui/__tests__/Card.test.tsx
2025-02-27T19:34:53.4827929Z PASS src/index.integration.test.tsx
2025-02-27T19:34:53.6296485Z PASS src/utils/testHelpers.test.ts
2025-02-27T19:34:53.9742934Z PASS src/state/actions/__tests__/workerActions.test.ts
2025-02-27T19:34:54.0467916Z PASS src/structure.test.ts
2025-02-27T19:34:54.2947329Z PASS src/components/layout/__tests__/Layout.test.tsx
2025-02-27T19:34:54.3100609Z   ● Console
2025-02-27T19:34:54.3104819Z 
2025-02-27T19:34:54.3109782Z     console.error
2025-02-27T19:34:54.3110738Z       TypeError: Cannot read properties of undefined (reading 'activeEvents')
2025-02-27T19:34:54.3112057Z           at /home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:17:40
2025-02-27T19:34:54.3113660Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:34:54.3115657Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:34:54.3117334Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:54.3118559Z           at /home/runner/work/idle-game/idle-game/src/state/hooks.ts:21:18
2025-02-27T19:34:54.3120022Z           at recomputationWrapper (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:392:63)
2025-02-27T19:34:54.3121685Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:54.3123283Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:412:39)
2025-02-27T19:34:54.3124900Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:34:54.3126733Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
2025-02-27T19:34:54.3128719Z           at memoizedSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
2025-02-27T19:34:54.3131345Z           at /home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
2025-02-27T19:34:54.3133564Z           at mountSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:6214:24)
2025-02-27T19:34:54.3135665Z           at Object.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22810:16)
2025-02-27T19:34:54.3138277Z           at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1507:34)
2025-02-27T19:34:54.3141090Z           at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
2025-02-27T19:34:54.3143691Z           at useSelector2 (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
2025-02-27T19:34:54.3145262Z           at useMemoSelector (/home/runner/work/idle-game/idle-game/src/state/hooks.ts:27:21)
2025-02-27T19:34:54.3146603Z           at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:28:39)
2025-02-27T19:34:54.3148419Z           at Object.react-stack-bottom-frame (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)
2025-02-27T19:34:54.3150344Z           at renderWithHooks (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)
2025-02-27T19:34:54.3152272Z           at updateFunctionComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)
2025-02-27T19:34:54.3155736Z           at updateSimpleMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7869:14)
2025-02-27T19:34:54.3157405Z           at updateMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7802:13)
2025-02-27T19:34:54.3162596Z           at beginWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:10103:18)
2025-02-27T19:34:54.3164130Z           at runWithFiberInDEV (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:34:54.3166809Z           at performUnitOfWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)
2025-02-27T19:34:54.3168374Z           at workLoopSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)
2025-02-27T19:34:54.3169913Z           at renderRootSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)
2025-02-27T19:34:54.3171532Z           at performWorkOnRoot (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)
2025-02-27T19:34:54.3173301Z           at performWorkOnRootViaSchedulerTask (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:34:54.3174902Z           at flushActQueue (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:34:54.3176654Z           at Object.<anonymous>.process.env.NODE_ENV.exports.act (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:34:54.3178134Z           at /home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:34:54.3179428Z           at renderRoot (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:34:54.3180955Z           at render (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:34:54.3182313Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:34:54.3183701Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:34:54.3184588Z           at new Promise (<anonymous>)
2025-02-27T19:34:54.3185891Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:34:54.3187165Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:34:54.3188236Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:34:54.3189277Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:34:54.3190564Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:34:54.3191994Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:34:54.3193230Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:34:54.3194941Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:34:54.3197053Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:34:54.3198565Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:34:54.3199851Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:34:54.3201123Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12) {
2025-02-27T19:34:54.3202305Z         [stack]: "TypeError: Cannot read properties of undefined (reading 'activeEvents')\n" +
2025-02-27T19:34:54.3203380Z           '    at /home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:17:40\n' +
2025-02-27T19:34:54.3204735Z           '    at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)\n' +
2025-02-27T19:34:54.3206510Z           '    at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)\n' +
2025-02-27T19:34:54.3207976Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:34:54.3209067Z           '    at /home/runner/work/idle-game/idle-game/src/state/hooks.ts:21:18\n' +
2025-02-27T19:34:54.3210361Z           '    at recomputationWrapper (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:392:63)\n' +
2025-02-27T19:34:54.3211826Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:34:54.3213288Z           '    at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:412:39)\n' +
2025-02-27T19:34:54.3214784Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:34:54.3216329Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:171:28)\n' +
2025-02-27T19:34:54.3218142Z           '    at memoizedSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)\n' +
2025-02-27T19:34:54.3220454Z           '    at /home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22\n' +
2025-02-27T19:34:54.3222258Z           '    at mountSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:6214:24)\n' +
2025-02-27T19:34:54.3224079Z           '    at Object.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22810:16)\n' +
2025-02-27T19:34:54.3226553Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1507:34)\n' +
2025-02-27T19:34:54.3229174Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)\n' +
2025-02-27T19:34:54.3231372Z           '    at useSelector2 (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:243:27)\n' +
2025-02-27T19:34:54.3232636Z           '    at useMemoSelector (/home/runner/work/idle-game/idle-game/src/state/hooks.ts:27:21)\n' +
2025-02-27T19:34:54.3233824Z           '    at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:28:39)\n' +
2025-02-27T19:34:54.3235635Z           '    at Object.react-stack-bottom-frame (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)\n' +
2025-02-27T19:34:54.3237404Z           '    at renderWithHooks (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)\n' +
2025-02-27T19:34:54.3239153Z           '    at updateFunctionComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)\n' +
2025-02-27T19:34:54.3240989Z           '    at updateSimpleMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7869:14)\n' +
2025-02-27T19:34:54.3242785Z           '    at updateMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7802:13)\n' +
2025-02-27T19:34:54.3244438Z           '    at beginWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:10103:18)\n' +
2025-02-27T19:34:54.3246294Z           '    at runWithFiberInDEV (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:543:16)\n' +
2025-02-27T19:34:54.3248011Z           '    at performUnitOfWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)\n' +
2025-02-27T19:34:54.3249722Z           '    at workLoopSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)\n' +
2025-02-27T19:34:54.3251373Z           '    at renderRootSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)\n' +
2025-02-27T19:34:54.3253054Z           '    at performWorkOnRoot (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)\n' +
2025-02-27T19:34:54.3254928Z           '    at performWorkOnRootViaSchedulerTask (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)\n' +
2025-02-27T19:34:54.3256809Z           '    at flushActQueue (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:862:34)\n' +
2025-02-27T19:34:54.3258457Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.act (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1151:10)\n' +
2025-02-27T19:34:54.3260358Z           '    at /home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/act-compat.js:47:25\n' +
2025-02-27T19:34:54.3261785Z           '    at renderRoot (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:188:26)\n' +
2025-02-27T19:34:54.3263207Z           '    at render (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:287:10)\n' +
2025-02-27T19:34:54.3264662Z           '    at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/components/layout/__tests__/Layout.test.tsx:44:11)\n' +
2025-02-27T19:34:54.3266576Z           '    at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-02-27T19:34:54.3267525Z           '    at new Promise (<anonymous>)\n' +
2025-02-27T19:34:54.3268529Z           '    at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-02-27T19:34:54.3269904Z           '    at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-02-27T19:34:54.3271038Z           '    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n' +
2025-02-27T19:34:54.3272128Z           '    at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-02-27T19:34:54.3273445Z           '    at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-02-27T19:34:54.3274901Z           '    at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-02-27T19:34:54.3276390Z           '    at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-02-27T19:34:54.3278077Z           '    at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-02-27T19:34:54.3280054Z           '    at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-02-27T19:34:54.3281615Z           '    at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-02-27T19:34:54.3282938Z           '    at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-02-27T19:34:54.3284243Z           '    at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)',
2025-02-27T19:34:54.3285514Z         [message]: "Cannot read properties of undefined (reading 'activeEvents')"
2025-02-27T19:34:54.3286107Z       }
2025-02-27T19:34:54.3286380Z       
2025-02-27T19:34:54.3286839Z       The above error occurred in the <EventPanel> component.
2025-02-27T19:34:54.3287324Z       
2025-02-27T19:34:54.3288113Z       React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.
2025-02-27T19:34:54.3288785Z 
2025-02-27T19:34:54.3289459Z     [0m [90m 42 |[39m describe([32m'Layout Component'[39m[33m,[39m () [33m=>[39m {
2025-02-27T19:34:54.3290600Z      [90m 43 |[39m   test([32m'renders all layout components correctly'[39m[33m,[39m () [33m=>[39m {
2025-02-27T19:34:54.3291442Z     [31m[1m>[22m[39m[90m 44 |[39m     render(
2025-02-27T19:34:54.3292043Z      [90m    |[39m           [31m[1m^[22m[39m
2025-02-27T19:34:54.3292860Z      [90m 45 |[39m       [33m<[39m[33mProvider[39m store[33m=[39m{store}[33m>[39m
2025-02-27T19:34:54.3294541Z      [90m 46 |[39m         [33m<[39m[33mLayout[39m sidebarContent[33m=[39m{[33m<[39m[33mdiv[39m[33m>[39m[33mSidebar[39m [33mContent[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m}[33m>[39m
2025-02-27T19:34:54.3296679Z      [90m 47 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[33mMain[39m [33mContent[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m[0m
2025-02-27T19:34:54.3297323Z 
2025-02-27T19:34:54.3297897Z       at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:7445:21)
2025-02-27T19:34:54.3299017Z       at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:7484:9)
2025-02-27T19:34:54.3300118Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:34:54.3301530Z       at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:7531:11)
2025-02-27T19:34:54.3303156Z       at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:10680:16)
2025-02-27T19:34:54.3304220Z       at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10700:11)
2025-02-27T19:34:54.3305481Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:34:54.3306629Z       at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10919:11)
2025-02-27T19:34:54.3307834Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11490:25)
2025-02-27T19:34:54.3309138Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3310441Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11529:11)
2025-02-27T19:34:54.3311763Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3313073Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:34:54.3314362Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3315855Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11585:11)
2025-02-27T19:34:54.3317199Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3318498Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:34:54.3319821Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3321150Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11495:11)
2025-02-27T19:34:54.3322362Z       at commitLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12406:7)
2025-02-27T19:34:54.3323461Z       at commitRootImpl (node_modules/react-dom/cjs/react-dom-client.development.js:15352:11)
2025-02-27T19:34:54.3324518Z       at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15251:11)
2025-02-27T19:34:54.3325806Z       at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14445:15)
2025-02-27T19:34:54.3327037Z       at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:34:54.3328162Z       at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:34:54.3329225Z       at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:34:54.3330242Z       at node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:34:54.3331054Z       at renderRoot (node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:34:54.3331853Z       at render (node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:34:54.3332689Z       at Object.<anonymous> (src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:34:54.3333208Z 
2025-02-27T19:34:54.3333344Z     console.error
2025-02-27T19:34:54.3334067Z       [ERROR in UnknownComponent]: Cannot read properties of undefined (reading 'activeEvents') {
2025-02-27T19:34:54.3335086Z         component: 'UnknownComponent',
2025-02-27T19:34:54.3335795Z         componentStack: '\n' +
2025-02-27T19:34:54.3336699Z           '    at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:16:37)\n' +
2025-02-27T19:34:54.3338033Z           '    at ErrorBoundary (/home/runner/work/idle-game/idle-game/src/components/error/ErrorBoundary.tsx:36:5)\n' +
2025-02-27T19:34:54.3338949Z           '    at div (<anonymous>)\n' +
2025-02-27T19:34:54.3340073Z           '    at Layout (/home/runner/work/idle-game/idle-game/src/components/layout/Layout.tsx:16:42)\n' +
2025-02-27T19:34:54.3341360Z           '    at Provider (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/components/Provider.tsx:60:11)'
2025-02-27T19:34:54.3342177Z       }
2025-02-27T19:34:54.3342339Z 
2025-02-27T19:34:54.3343435Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:54.3344974Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:34:54.3346968Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:34:54.3348098Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:34:54.3348627Z      [90m 138 |[39m     }
2025-02-27T19:34:54.3349039Z      [90m 139 |[39m     
2025-02-27T19:34:54.3349728Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:34:54.3350152Z 
2025-02-27T19:34:54.3350481Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:34:54.3351359Z       at ErrorBoundary.componentDidCatch (src/components/error/ErrorBoundary.tsx:58:31)
2025-02-27T19:34:54.3352581Z       at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22481:20)
2025-02-27T19:34:54.3354097Z       at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:7542:11)
2025-02-27T19:34:54.3355630Z       at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:10680:16)
2025-02-27T19:34:54.3356703Z       at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10700:11)
2025-02-27T19:34:54.3357817Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:34:54.3358974Z       at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10919:11)
2025-02-27T19:34:54.3360191Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11490:25)
2025-02-27T19:34:54.3361508Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3362819Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11529:11)
2025-02-27T19:34:54.3364148Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3365636Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:34:54.3366943Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3368273Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11585:11)
2025-02-27T19:34:54.3369601Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3370910Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:34:54.3372435Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:34:54.3373805Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11495:11)
2025-02-27T19:34:54.3375014Z       at commitLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12406:7)
2025-02-27T19:34:54.3376416Z       at commitRootImpl (node_modules/react-dom/cjs/react-dom-client.development.js:15352:11)
2025-02-27T19:34:54.3377696Z       at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15251:11)
2025-02-27T19:34:54.3378796Z       at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14445:15)
2025-02-27T19:34:54.3380092Z       at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:34:54.3381183Z       at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:34:54.3382277Z       at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:34:54.3383284Z       at node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:34:54.3384100Z       at renderRoot (node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:34:54.3384925Z       at render (node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:34:54.3385966Z       at Object.<anonymous> (src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:34:54.3386478Z 
2025-02-27T19:34:54.3912649Z PASS src/config.test.ts
2025-02-27T19:34:54.4369291Z PASS src/managers/GameLoopManager.test.ts
2025-02-27T19:34:54.4380516Z   ● Console
2025-02-27T19:34:54.4380981Z 
2025-02-27T19:34:54.4381269Z     console.log
2025-02-27T19:34:54.4381851Z       GameLoopManager: Registered tick handler, total handlers: 1
2025-02-27T19:34:54.4382338Z 
2025-02-27T19:34:54.4382893Z       at GameLoopManager.registerTickHandler (src/managers/GameLoopManager.ts:39:17)
2025-02-27T19:34:54.4383611Z 
2025-02-27T19:34:54.7225059Z PASS src/index.test.ts
2025-02-27T19:34:54.8265993Z PASS src/styles/index.test.ts
2025-02-27T19:34:54.9795423Z PASS src/test-semantic-release.test.ts
2025-02-27T19:34:55.4978412Z PASS src/hello-world.test.ts
2025-02-27T19:34:55.5180464Z PASS src/utils/EventEmitter.test.ts
2025-02-27T19:34:55.6784858Z 
2025-02-27T19:34:55.6786424Z Summary of all failing tests
2025-02-27T19:34:55.6790528Z FAIL src/systems/__tests__/workerManager.test.ts (8.838 s)
2025-02-27T19:34:55.6794642Z   ● WorkerManager › Worker counting › should get total available workers based on game stage
2025-02-27T19:34:55.6795423Z 
2025-02-27T19:34:55.6797459Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:34:55.6797953Z 
2025-02-27T19:34:55.6801010Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:34:55.6803726Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:34:55.6809509Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:34:55.6811443Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:55.6812278Z      [90m 145 |[39m   }
2025-02-27T19:34:55.6813296Z      [90m 146 |[39m   
2025-02-27T19:34:55.6815650Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:34:55.6815990Z 
2025-02-27T19:34:55.6818842Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:34:55.6821731Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:89:28)
2025-02-27T19:34:55.6822231Z 
2025-02-27T19:34:55.6824530Z   ● WorkerManager › Worker counting › should get total assigned workers
2025-02-27T19:34:55.6825019Z 
2025-02-27T19:34:55.6826533Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:55.6828612Z         at Function.values (<anonymous>)
2025-02-27T19:34:55.6829388Z 
2025-02-27T19:34:55.6835277Z     [0m [90m 153 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.6835967Z      [90m 154 |[39m     
2025-02-27T19:34:55.6843159Z     [31m[1m>[22m[39m[90m 155 |[39m     [36mreturn[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mreduce(
2025-02-27T19:34:55.6845727Z      [90m     |[39m                   [31m[1m^[22m[39m
2025-02-27T19:34:55.6851165Z      [90m 156 |[39m       (total[33m:[39m number[33m,[39m structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:34:55.6861045Z      [90m 157 |[39m         [36mif[39m (structure [33m&&[39m [36mtypeof[39m structure [33m===[39m [32m'object'[39m [33m&&[39m [32m'workers'[39m [36min[39m structure [33m&&[39m 
2025-02-27T19:34:55.6866376Z      [90m 158 |[39m             [36mtypeof[39m structure[33m.[39mworkers [33m===[39m [32m'number'[39m) {[0m
2025-02-27T19:34:55.6866873Z 
2025-02-27T19:34:55.6870088Z       at WorkerManager.getTotalAssignedWorkers (src/systems/workerManager.ts:155:19)
2025-02-27T19:34:55.6874026Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:102:28)
2025-02-27T19:34:55.6874490Z 
2025-02-27T19:34:55.6878084Z   ● WorkerManager › Worker counting › should get remaining workers correctly
2025-02-27T19:34:55.6878549Z 
2025-02-27T19:34:55.6881362Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:34:55.6881812Z 
2025-02-27T19:34:55.6886722Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:34:55.6890082Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:34:55.6905071Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:34:55.6908697Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:55.6909313Z      [90m 145 |[39m   }
2025-02-27T19:34:55.6909759Z      [90m 146 |[39m   
2025-02-27T19:34:55.6911021Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:34:55.6911342Z 
2025-02-27T19:34:55.6914742Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:34:55.6921081Z       at WorkerManager.getRemainingWorkers (src/systems/workerManager.ts:172:17)
2025-02-27T19:34:55.6932330Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:118:28)
2025-02-27T19:34:55.6932831Z 
2025-02-27T19:34:55.6933387Z   ● WorkerManager › Worker assignment › should assign workers to buildings
2025-02-27T19:34:55.6933840Z 
2025-02-27T19:34:55.6940876Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.6941379Z 
2025-02-27T19:34:55.6941666Z     [0m [90m 190 |[39m     
2025-02-27T19:34:55.6945946Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.6950997Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.6956076Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.6956625Z      [90m 193 |[39m     
2025-02-27T19:34:55.6962522Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.6963316Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.6963704Z 
2025-02-27T19:34:55.6969359Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:55.6973118Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:137:36)
2025-02-27T19:34:55.6973847Z 
2025-02-27T19:34:55.6986634Z   ● WorkerManager › Worker assignment › should limit assignment to available workers
2025-02-27T19:34:55.6987377Z 
2025-02-27T19:34:55.6988255Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.6989302Z 
2025-02-27T19:34:55.6989823Z     [0m [90m 190 |[39m     
2025-02-27T19:34:55.6990739Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.6992001Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.6993293Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.6993832Z      [90m 193 |[39m     
2025-02-27T19:34:55.6994417Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.6998537Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.6999914Z 
2025-02-27T19:34:55.7000423Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:55.7001407Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:148:21)
2025-02-27T19:34:55.7001892Z 
2025-02-27T19:34:55.7002473Z   ● WorkerManager › Worker assignment › should limit assignment to maxWorkers
2025-02-27T19:34:55.7002960Z 
2025-02-27T19:34:55.7004859Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.7005497Z 
2025-02-27T19:34:55.7005804Z     [0m [90m 190 |[39m     
2025-02-27T19:34:55.7006347Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7008359Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7009778Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7010302Z      [90m 193 |[39m     
2025-02-27T19:34:55.7013028Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7015251Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.7015661Z 
2025-02-27T19:34:55.7017029Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:55.7018268Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:159:21)
2025-02-27T19:34:55.7018769Z 
2025-02-27T19:34:55.7019762Z   ● WorkerManager › Worker assignment › should handle nonexistent building
2025-02-27T19:34:55.7020120Z 
2025-02-27T19:34:55.7021239Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:34:55.7021698Z 
2025-02-27T19:34:55.7021941Z     [0m [90m 190 |[39m     
2025-02-27T19:34:55.7025252Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7044256Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7045565Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7046083Z      [90m 193 |[39m     
2025-02-27T19:34:55.7047749Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7049277Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.7049645Z 
2025-02-27T19:34:55.7051227Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:55.7052800Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:169:36)
2025-02-27T19:34:55.7053284Z 
2025-02-27T19:34:55.7054435Z   ● WorkerManager › Changing worker count › should add workers by delta
2025-02-27T19:34:55.7054881Z 
2025-02-27T19:34:55.7056069Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.7056614Z 
2025-02-27T19:34:55.7056853Z     [0m [90m 234 |[39m     
2025-02-27T19:34:55.7059345Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7062578Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7063555Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7064198Z      [90m 237 |[39m     
2025-02-27T19:34:55.7065840Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7067255Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.7067838Z 
2025-02-27T19:34:55.7069215Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:55.7070725Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:189:21)
2025-02-27T19:34:55.7071239Z 
2025-02-27T19:34:55.7072377Z   ● WorkerManager › Changing worker count › should remove workers by delta
2025-02-27T19:34:55.7072832Z 
2025-02-27T19:34:55.7073907Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.7074344Z 
2025-02-27T19:34:55.7074571Z     [0m [90m 234 |[39m     
2025-02-27T19:34:55.7077549Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7080394Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7081606Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7082137Z      [90m 237 |[39m     
2025-02-27T19:34:55.7083523Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7085573Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.7085949Z 
2025-02-27T19:34:55.7087005Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:55.7088936Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:210:21)
2025-02-27T19:34:55.7089409Z 
2025-02-27T19:34:55.7091051Z   ● WorkerManager › Changing worker count › should limit addition by available workers
2025-02-27T19:34:55.7091576Z 
2025-02-27T19:34:55.7092134Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.7092572Z 
2025-02-27T19:34:55.7092802Z     [0m [90m 234 |[39m     
2025-02-27T19:34:55.7095739Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7098794Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7099944Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7100443Z      [90m 237 |[39m     
2025-02-27T19:34:55.7102060Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7103559Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.7103940Z 
2025-02-27T19:34:55.7105428Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:34:55.7107119Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:231:21)
2025-02-27T19:34:55.7107585Z 
2025-02-27T19:34:55.7109368Z   ● WorkerManager › Worker efficiency › should calculate worker efficiency correctly
2025-02-27T19:34:55.7109823Z 
2025-02-27T19:34:55.7110437Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.7110992Z 
2025-02-27T19:34:55.7111226Z     [0m [90m 287 |[39m     
2025-02-27T19:34:55.7114030Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.7117122Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7118381Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7119203Z      [90m 290 |[39m     
2025-02-27T19:34:55.7122264Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:34:55.7123341Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:34:55.7123690Z 
2025-02-27T19:34:55.7125536Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:34:55.7127210Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:246:28)
2025-02-27T19:34:55.7127676Z 
2025-02-27T19:34:55.7131553Z   ● WorkerManager › Worker efficiency › should handle nonexistent building for efficiency
2025-02-27T19:34:55.7132099Z 
2025-02-27T19:34:55.7132717Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:34:55.7133174Z 
2025-02-27T19:34:55.7133406Z     [0m [90m 287 |[39m     
2025-02-27T19:34:55.7136613Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.7139547Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7140735Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7141239Z      [90m 290 |[39m     
2025-02-27T19:34:55.7144520Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:34:55.7145896Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:34:55.7146247Z 
2025-02-27T19:34:55.7147878Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:34:55.7149452Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:283:28)
2025-02-27T19:34:55.7149905Z 
2025-02-27T19:34:55.7151542Z   ● WorkerManager › Auto-assignment › should auto-assign with balanced strategy
2025-02-27T19:34:55.7152018Z 
2025-02-27T19:34:55.7152332Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:55.7153181Z         at Function.values (<anonymous>)
2025-02-27T19:34:55.7153574Z 
2025-02-27T19:34:55.7153812Z     [0m [90m 318 |[39m     
2025-02-27T19:34:55.7157071Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.7162821Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:55.7164190Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:55.7165448Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:55.7167874Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:55.7169361Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:55.7169715Z 
2025-02-27T19:34:55.7171212Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:55.7172981Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:290:21)
2025-02-27T19:34:55.7173446Z 
2025-02-27T19:34:55.7174717Z   ● WorkerManager › Auto-assignment › should auto-assign with focused strategy
2025-02-27T19:34:55.7175389Z 
2025-02-27T19:34:55.7175799Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:55.7176688Z         at Function.values (<anonymous>)
2025-02-27T19:34:55.7176977Z 
2025-02-27T19:34:55.7177215Z     [0m [90m 318 |[39m     
2025-02-27T19:34:55.7180314Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.7186674Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:55.7187723Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:55.7188460Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:55.7190716Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:55.7192151Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:55.7192519Z 
2025-02-27T19:34:55.7193828Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:55.7195882Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:310:21)
2025-02-27T19:34:55.7196352Z 
2025-02-27T19:34:55.7197741Z   ● WorkerManager › Auto-assignment › should auto-assign with efficiency strategy
2025-02-27T19:34:55.7198242Z 
2025-02-27T19:34:55.7198644Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:55.7199433Z         at Function.values (<anonymous>)
2025-02-27T19:34:55.7199723Z 
2025-02-27T19:34:55.7200153Z     [0m [90m 318 |[39m     
2025-02-27T19:34:55.7203440Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:34:55.7209148Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:34:55.7210410Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:34:55.7211483Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:34:55.7214095Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:34:55.7215704Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:34:55.7216073Z 
2025-02-27T19:34:55.7217552Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:34:55.7219081Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:331:21)
2025-02-27T19:34:55.7219547Z 
2025-02-27T19:34:55.7220978Z FAIL src/systems/resourceManager.test.ts (9.242 s)
2025-02-27T19:34:55.7224231Z   ● ResourceManager › initializeResources › dispatches addResource action for each initial resource
2025-02-27T19:34:55.7224823Z 
2025-02-27T19:34:55.7225307Z     TypeError: this.actions.addResource is not a function
2025-02-27T19:34:55.7225689Z 
2025-02-27T19:34:55.7229193Z     [0m [90m 153 |[39m     [33mObject[39m[33m.[39mvalues([33mINITIAL_RESOURCES[39m)[33m.[39mforEach(resource [33m=>[39m {
2025-02-27T19:34:55.7236376Z      [90m 154 |[39m       [36mif[39m (validateObject(resource[33m,[39m [[32m'id'[39m[33m,[39m [32m'name'[39m[33m,[39m [32m'amount'[39m[33m,[39m [32m'perSecond'[39m[33m,[39m [32m'unlocked'[39m][33m,[39m [32m'initializeResources'[39m)) {
2025-02-27T19:34:55.7239925Z     [31m[1m>[22m[39m[90m 155 |[39m         [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddResource(resource))[33m;[39m
2025-02-27T19:34:55.7241217Z      [90m     |[39m                                    [31m[1m^[22m[39m
2025-02-27T19:34:55.7241872Z      [90m 156 |[39m       }
2025-02-27T19:34:55.7242785Z      [90m 157 |[39m     })[33m;[39m
2025-02-27T19:34:55.7243580Z      [90m 158 |[39m   }[0m
2025-02-27T19:34:55.7243808Z 
2025-02-27T19:34:55.7244733Z       at src/systems/resourceManager.ts:155:36
2025-02-27T19:34:55.7245824Z           at Array.forEach (<anonymous>)
2025-02-27T19:34:55.7248341Z       at ResourceManager.initializeResources (src/systems/resourceManager.ts:153:38)
2025-02-27T19:34:55.7250118Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:54:23)
2025-02-27T19:34:55.7250550Z 
2025-02-27T19:34:55.7253183Z   ● ResourceManager › updateResources › updates resource amounts based on perSecond rates and elapsed time
2025-02-27T19:34:55.7253653Z 
2025-02-27T19:34:55.7254366Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:55.7254877Z 
2025-02-27T19:34:55.7255251Z     [0m [90m 178 |[39m     
2025-02-27T19:34:55.7258379Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:55.7266298Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:55.7267939Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:55.7268319Z      [90m 181 |[39m     
2025-02-27T19:34:55.7268792Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:55.7271717Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:55.7272148Z 
2025-02-27T19:34:55.7273491Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:55.7275556Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:105:23)
2025-02-27T19:34:55.7275988Z 
2025-02-27T19:34:55.7281088Z   ● ResourceManager › calculateResourceGeneration › calculates and updates resource generation rates based on structures
2025-02-27T19:34:55.7281845Z 
2025-02-27T19:34:55.7282131Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:34:55.7282707Z         at Function.values (<anonymous>)
2025-02-27T19:34:55.7283003Z 
2025-02-27T19:34:55.7283247Z     [0m [90m 251 |[39m     
2025-02-27T19:34:55.7285627Z      [90m 252 |[39m     [90m// Add production from all structures[39m
2025-02-27T19:34:55.7289946Z     [31m[1m>[22m[39m[90m 253 |[39m     [33mObject[39m[33m.[39mvalues(structures)[33m.[39mforEach((structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:34:55.7290859Z      [90m     |[39m            [31m[1m^[22m[39m
2025-02-27T19:34:55.7293498Z      [90m 254 |[39m       [90m// Skip structures that aren't built or don't have workers assigned[39m
2025-02-27T19:34:55.7298032Z      [90m 255 |[39m       [36mif[39m ([33m![39mstructure [33m||[39m [36mtypeof[39m structure [33m!==[39m [32m'object'[39m [33m||[39m
2025-02-27T19:34:55.7302331Z      [90m 256 |[39m           [33m![39m([32m'unlocked'[39m [36min[39m structure) [33m||[39m [33m![39m([32m'level'[39m [36min[39m structure) [33m||[39m[0m
2025-02-27T19:34:55.7302995Z 
2025-02-27T19:34:55.7304024Z       at ResourceManager.calculateResourceGeneration (src/systems/resourceManager.ts:253:12)
2025-02-27T19:34:55.7305761Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:197:23)
2025-02-27T19:34:55.7306190Z 
2025-02-27T19:34:55.7308509Z   ● ResourceManager › canAfford › returns true when all resources are available and sufficient
2025-02-27T19:34:55.7309030Z 
2025-02-27T19:34:55.7309991Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:55.7310466Z 
2025-02-27T19:34:55.7314108Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:55.7316597Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:55.7319422Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:55.7320846Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7326062Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:55.7326937Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:55.7327544Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:55.7327803Z 
2025-02-27T19:34:55.7329653Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:55.7331548Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:256:38)
2025-02-27T19:34:55.7332155Z 
2025-02-27T19:34:55.7333498Z   ● ResourceManager › canAfford › returns false when any resource is insufficient
2025-02-27T19:34:55.7333957Z 
2025-02-27T19:34:55.7335417Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:55.7335912Z 
2025-02-27T19:34:55.7339337Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:55.7341630Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:55.7344445Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:55.7345987Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7350915Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:55.7352061Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:55.7352758Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:55.7352999Z 
2025-02-27T19:34:55.7354783Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:55.7356589Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:297:38)
2025-02-27T19:34:55.7357011Z 
2025-02-27T19:34:55.7359025Z   ● ResourceManager › canAfford › returns false when any resource is not unlocked
2025-02-27T19:34:55.7359458Z 
2025-02-27T19:34:55.7360541Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:55.7361015Z 
2025-02-27T19:34:55.7364687Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:55.7367286Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:55.7370146Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:55.7371513Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7376664Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:55.7377719Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:55.7378429Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:55.7378666Z 
2025-02-27T19:34:55.7380475Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:55.7382136Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:338:38)
2025-02-27T19:34:55.7382556Z 
2025-02-27T19:34:55.7384195Z   ● ResourceManager › canAfford › returns false when any resource is missing
2025-02-27T19:34:55.7384659Z 
2025-02-27T19:34:55.7385922Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:55.7386413Z 
2025-02-27T19:34:55.7390003Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:55.7392352Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:55.7395387Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:55.7396655Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7401595Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:55.7402740Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:55.7403406Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:55.7403658Z 
2025-02-27T19:34:55.7405398Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:55.7407434Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:369:38)
2025-02-27T19:34:55.7407856Z 
2025-02-27T19:34:55.7410321Z   ● ResourceManager › applyResourceCost › dispatches addResourceAmount with negative values for each cost
2025-02-27T19:34:55.7410852Z 
2025-02-27T19:34:55.7411706Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:34:55.7412178Z 
2025-02-27T19:34:55.7415966Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:34:55.7418302Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:34:55.7421095Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:34:55.7422445Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7427591Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:34:55.7428632Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:34:55.7429217Z      [90m 346 |[39m       }[0m
2025-02-27T19:34:55.7429460Z 
2025-02-27T19:34:55.7431393Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:34:55.7433413Z       at ResourceManager.applyResourceCost (src/systems/resourceManager.ts:363:15)
2025-02-27T19:34:55.7435418Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:415:38)
2025-02-27T19:34:55.7435832Z 
2025-02-27T19:34:55.7438977Z   ● ResourceManager › unlockResource › unlocks a locked resource and returns true
2025-02-27T19:34:55.7439529Z 
2025-02-27T19:34:55.7440250Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:55.7440757Z 
2025-02-27T19:34:55.7442265Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:55.7444549Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7447432Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:55.7448407Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:55.7449011Z      [90m 386 |[39m     
2025-02-27T19:34:55.7451042Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:55.7452367Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7452895Z 
2025-02-27T19:34:55.7453453Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:55.7454323Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:462:38)
2025-02-27T19:34:55.7454686Z 
2025-02-27T19:34:55.7455620Z   ● ResourceManager › unlockResource › returns false for already unlocked resources
2025-02-27T19:34:55.7456167Z 
2025-02-27T19:34:55.7457043Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:55.7457556Z 
2025-02-27T19:34:55.7458484Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:55.7459862Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7461970Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:55.7463201Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:55.7463694Z      [90m 386 |[39m     
2025-02-27T19:34:55.7464643Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:55.7467361Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7467857Z 
2025-02-27T19:34:55.7468305Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:55.7470328Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:499:38)
2025-02-27T19:34:55.7470596Z 
2025-02-27T19:34:55.7479883Z   ● ResourceManager › unlockResource › returns false for non-existent resources
2025-02-27T19:34:55.7480412Z 
2025-02-27T19:34:55.7480844Z     TypeError: Cannot read properties of undefined (reading 'non-existent')
2025-02-27T19:34:55.7481303Z 
2025-02-27T19:34:55.7481913Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:34:55.7482936Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7484119Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:55.7485041Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:55.7485730Z      [90m 386 |[39m     
2025-02-27T19:34:55.7486526Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:34:55.7487602Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7488070Z 
2025-02-27T19:34:55.7488502Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:34:55.7489320Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:527:38)
2025-02-27T19:34:55.7489736Z 
2025-02-27T19:34:55.7490482Z   ● ResourceManager › addResourceAmount and setResourceAmount › addResourceAmount adds to existing resource
2025-02-27T19:34:55.7491135Z 
2025-02-27T19:34:55.7491523Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:55.7491987Z 
2025-02-27T19:34:55.7492763Z     [0m [90m 407 |[39m   addResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:34:55.7493946Z      [90m 408 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7497267Z     [31m[1m>[22m[39m[90m 409 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:55.7498336Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:55.7498846Z      [90m 410 |[39m     
2025-02-27T19:34:55.7500889Z      [90m 411 |[39m     [90m// Can't add to a resource that doesn't exist[39m
2025-02-27T19:34:55.7502161Z      [90m 412 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:34:55.7502513Z 
2025-02-27T19:34:55.7504012Z       at ResourceManager.addResourceAmount (src/systems/resourceManager.ts:409:37)
2025-02-27T19:34:55.7505534Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:560:38)
2025-02-27T19:34:55.7505959Z 
2025-02-27T19:34:55.7508870Z   ● ResourceManager › addResourceAmount and setResourceAmount › setResourceAmount sets absolute value for resource
2025-02-27T19:34:55.7509941Z 
2025-02-27T19:34:55.7510348Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:34:55.7510808Z 
2025-02-27T19:34:55.7513031Z     [0m [90m 431 |[39m   setResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:34:55.7515044Z      [90m 432 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7518133Z     [31m[1m>[22m[39m[90m 433 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:34:55.7519350Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:34:55.7519855Z      [90m 434 |[39m     
2025-02-27T19:34:55.7521627Z      [90m 435 |[39m     [90m// Can't set a resource that doesn't exist[39m
2025-02-27T19:34:55.7523075Z      [90m 436 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:34:55.7523418Z 
2025-02-27T19:34:55.7524815Z       at ResourceManager.setResourceAmount (src/systems/resourceManager.ts:433:37)
2025-02-27T19:34:55.7526475Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:598:38)
2025-02-27T19:34:55.7526905Z 
2025-02-27T19:34:55.7544470Z FAIL src/managers/progression/ProgressionManager.test.ts (9.285 s)
2025-02-27T19:34:55.7546765Z   ● ProgressionManager › checkRequirements › should return true when all requirements are met
2025-02-27T19:34:55.7547366Z 
2025-02-27T19:34:55.7547653Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7548011Z 
2025-02-27T19:34:55.7548146Z     Expected: true
2025-02-27T19:34:55.7548460Z     Received: false
2025-02-27T19:34:55.7548649Z 
2025-02-27T19:34:55.7549251Z     [0m [90m 49 |[39m       ][33m;[39m
2025-02-27T19:34:55.7549686Z      [90m 50 |[39m
2025-02-27T19:34:55.7553807Z     [31m[1m>[22m[39m[90m 51 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7555346Z      [90m    |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:55.7558015Z      [90m 52 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
2025-02-27T19:34:55.7558752Z      [90m 53 |[39m     })[33m;[39m
2025-02-27T19:34:55.7559174Z      [90m 54 |[39m[0m
2025-02-27T19:34:55.7559382Z 
2025-02-27T19:34:55.7561220Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:55)
2025-02-27T19:34:55.7561744Z 
2025-02-27T19:34:55.7563286Z   ● ProgressionManager › checkRequirements › should return false if any requirement is not met
2025-02-27T19:34:55.7563886Z 
2025-02-27T19:34:55.7564167Z     expect(jest.fn()).toHaveBeenCalledTimes(expected)
2025-02-27T19:34:55.7564521Z 
2025-02-27T19:34:55.7564712Z     Expected number of calls: 2
2025-02-27T19:34:55.7565551Z     Received number of calls: 0
2025-02-27T19:34:55.7565808Z 
2025-02-27T19:34:55.7566139Z     [0m [90m 76 |[39m
2025-02-27T19:34:55.7569765Z      [90m 77 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-02-27T19:34:55.7572363Z     [31m[1m>[22m[39m[90m 78 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
2025-02-27T19:34:55.7573293Z      [90m    |[39m                            [31m[1m^[22m[39m
2025-02-27T19:34:55.7573976Z      [90m 79 |[39m     })[33m;[39m
2025-02-27T19:34:55.7574441Z      [90m 80 |[39m
2025-02-27T19:34:55.7577710Z      [90m 81 |[39m     it([32m'should handle empty requirements array'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:55.7578161Z 
2025-02-27T19:34:55.7579268Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:78:28)
2025-02-27T19:34:55.7579777Z 
2025-02-27T19:34:55.7581723Z   ● ProgressionManager › evaluateRequirement › should correctly evaluate gameStage requirement
2025-02-27T19:34:55.7582622Z 
2025-02-27T19:34:55.7582917Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7583283Z 
2025-02-27T19:34:55.7583409Z     Expected: true
2025-02-27T19:34:55.7583723Z     Received: false
2025-02-27T19:34:55.7584555Z 
2025-02-27T19:34:55.7584881Z     [0m [90m 116 |[39m
2025-02-27T19:34:55.7587103Z      [90m 117 |[39m       [90m// Use the private method for testing[39m
2025-02-27T19:34:55.7591237Z     [31m[1m>[22m[39m[90m 118 |[39m       expect((manager [36mas[39m any)[33m.[39mevaluateRequirement(requirement))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7592943Z      [90m     |[39m                                                                 [31m[1m^[22m[39m
2025-02-27T19:34:55.7593545Z      [90m 119 |[39m     })[33m;[39m
2025-02-27T19:34:55.7593978Z      [90m 120 |[39m
2025-02-27T19:34:55.7597116Z      [90m 121 |[39m     it([32m'should handle unknown requirement types'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:55.7597631Z 
2025-02-27T19:34:55.7598661Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:118:65)
2025-02-27T19:34:55.7599191Z 
2025-02-27T19:34:55.7601091Z   ● ProgressionManager › completeMilestone › should complete a milestone when requirements are met
2025-02-27T19:34:55.7601611Z 
2025-02-27T19:34:55.7601990Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7602384Z 
2025-02-27T19:34:55.7602531Z     Expected: true
2025-02-27T19:34:55.7602835Z     Received: false
2025-02-27T19:34:55.7603026Z 
2025-02-27T19:34:55.7603220Z     [0m [90m 143 |[39m
2025-02-27T19:34:55.7604729Z      [90m 144 |[39m       [90m// Complete the milestone[39m
2025-02-27T19:34:55.7608973Z     [31m[1m>[22m[39m[90m 145 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7610433Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:55.7612481Z      [90m 146 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:34:55.7613916Z      [90m 147 |[39m         id[33m:[39m [32m'milestone1'[39m[33m,[39m
2025-02-27T19:34:55.7615730Z      [90m 148 |[39m         completedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:34:55.7616101Z 
2025-02-27T19:34:55.7617708Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:55)
2025-02-27T19:34:55.7618222Z 
2025-02-27T19:34:55.7620208Z   ● ProgressionManager › completeMilestone › should not complete a milestone that is already completed
2025-02-27T19:34:55.7621358Z 
2025-02-27T19:34:55.7621641Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7622001Z 
2025-02-27T19:34:55.7622130Z     Expected: true
2025-02-27T19:34:55.7622440Z     Received: false
2025-02-27T19:34:55.7622609Z 
2025-02-27T19:34:55.7623428Z     [0m [90m 163 |[39m       [90m// Attempt to complete the milestone[39m
2025-02-27T19:34:55.7626226Z      [90m 164 |[39m       [90m// The implementation now returns true regardless of completion status[39m
2025-02-27T19:34:55.7629855Z     [31m[1m>[22m[39m[90m 165 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7631322Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:34:55.7634484Z      [90m 166 |[39m       [90m// The implementation now calls completeMilestone even for already completed milestones[39m
2025-02-27T19:34:55.7636462Z      [90m 167 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:55.7637201Z      [90m 168 |[39m     })[33m;[39m[0m
2025-02-27T19:34:55.7637484Z 
2025-02-27T19:34:55.7639004Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:55)
2025-02-27T19:34:55.7639558Z 
2025-02-27T19:34:55.7641880Z   ● ProgressionManager › unlockAchievement › should unlock an achievement when requirements are met
2025-02-27T19:34:55.7642526Z 
2025-02-27T19:34:55.7642803Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7643162Z 
2025-02-27T19:34:55.7643288Z     Expected: true
2025-02-27T19:34:55.7643597Z     Received: false
2025-02-27T19:34:55.7643803Z 
2025-02-27T19:34:55.7644050Z     [0m [90m 184 |[39m
2025-02-27T19:34:55.7645283Z      [90m 185 |[39m       [90m// Unlock the achievement[39m
2025-02-27T19:34:55.7649573Z     [31m[1m>[22m[39m[90m 186 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7650984Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:34:55.7653069Z      [90m 187 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:34:55.7654581Z      [90m 188 |[39m         id[33m:[39m [32m'achievement1'[39m[33m,[39m
2025-02-27T19:34:55.7656322Z      [90m 189 |[39m         unlockedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:34:55.7656679Z 
2025-02-27T19:34:55.7658427Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:57)
2025-02-27T19:34:55.7658943Z 
2025-02-27T19:34:55.7660981Z   ● ProgressionManager › unlockAchievement › should not unlock an achievement that is already unlocked
2025-02-27T19:34:55.7661827Z 
2025-02-27T19:34:55.7662192Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7662548Z 
2025-02-27T19:34:55.7662672Z     Expected: true
2025-02-27T19:34:55.7662984Z     Received: false
2025-02-27T19:34:55.7663102Z 
2025-02-27T19:34:55.7664211Z     [0m [90m 204 |[39m       [90m// Attempt to unlock the achievement[39m
2025-02-27T19:34:55.7666967Z      [90m 205 |[39m       [90m// The implementation now returns true regardless of unlock status[39m
2025-02-27T19:34:55.7670680Z     [31m[1m>[22m[39m[90m 206 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7672157Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:34:55.7675509Z      [90m 207 |[39m       [90m// The implementation now calls unlockAchievement even for already unlocked achievements[39m
2025-02-27T19:34:55.7677112Z      [90m 208 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:55.7677971Z      [90m 209 |[39m     })[33m;[39m[0m
2025-02-27T19:34:55.7678245Z 
2025-02-27T19:34:55.7680248Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:57)
2025-02-27T19:34:55.7680752Z 
2025-02-27T19:34:55.7682922Z   ● ProgressionManager › shouldFeatureBeUnlocked › should return true if a completed milestone unlocks the feature
2025-02-27T19:34:55.7683636Z 
2025-02-27T19:34:55.7683920Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7684274Z 
2025-02-27T19:34:55.7684399Z     Expected: true
2025-02-27T19:34:55.7684717Z     Received: false
2025-02-27T19:34:55.7684907Z 
2025-02-27T19:34:55.7685288Z     [0m [90m 288 |[39m       
2025-02-27T19:34:55.7686993Z      [90m 289 |[39m       [90m// Check if feature should be unlocked[39m
2025-02-27T19:34:55.7691237Z     [31m[1m>[22m[39m[90m 290 |[39m       expect(manager[33m.[39mshouldFeatureBeUnlocked([32m'feature1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7692675Z      [90m     |[39m                                                           [31m[1m^[22m[39m
2025-02-27T19:34:55.7693339Z      [90m 291 |[39m     })[33m;[39m
2025-02-27T19:34:55.7693763Z      [90m 292 |[39m
2025-02-27T19:34:55.7697883Z      [90m 293 |[39m     it([32m'should return false if no completed milestone unlocks the feature'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:34:55.7698316Z 
2025-02-27T19:34:55.7699444Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:59)
2025-02-27T19:34:55.7699894Z 
2025-02-27T19:34:55.7700559Z FAIL src/systems/__tests__/buildingManager.test.ts
2025-02-27T19:34:55.7702459Z   ● BuildingManager › initialization › should initialize a building
2025-02-27T19:34:55.7702890Z 
2025-02-27T19:34:55.7703344Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:34:55.7703809Z 
2025-02-27T19:34:55.7704244Z     [0m [90m 139 |[39m     }
2025-02-27T19:34:55.7704651Z      [90m 140 |[39m     
2025-02-27T19:34:55.7708898Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:34:55.7709726Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:55.7710352Z      [90m 142 |[39m   }
2025-02-27T19:34:55.7710864Z      [90m 143 |[39m   
2025-02-27T19:34:55.7711757Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:34:55.7712046Z 
2025-02-27T19:34:55.7713866Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:34:55.7715546Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:73:23)
2025-02-27T19:34:55.7716036Z 
2025-02-27T19:34:55.7717581Z   ● BuildingManager › initialization › should initialize multiple buildings
2025-02-27T19:34:55.7718078Z 
2025-02-27T19:34:55.7718399Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:34:55.7718778Z 
2025-02-27T19:34:55.7719007Z     [0m [90m 139 |[39m     }
2025-02-27T19:34:55.7719401Z      [90m 140 |[39m     
2025-02-27T19:34:55.7723785Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:34:55.7726095Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:55.7726703Z      [90m 142 |[39m   }
2025-02-27T19:34:55.7727078Z      [90m 143 |[39m   
2025-02-27T19:34:55.7727663Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:34:55.7727932Z 
2025-02-27T19:34:55.7729469Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:34:55.7730308Z       at src/systems/buildingManager.ts:153:40
2025-02-27T19:34:55.7730895Z           at Array.forEach (<anonymous>)
2025-02-27T19:34:55.7732878Z       at BuildingManager.initializeBuildings (src/systems/buildingManager.ts:153:15)
2025-02-27T19:34:55.7734462Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:108:23)
2025-02-27T19:34:55.7734933Z 
2025-02-27T19:34:55.7737114Z   ● BuildingManager › purchase validation › should correctly validate if player can afford a building
2025-02-27T19:34:55.7737570Z 
2025-02-27T19:34:55.7738243Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:55.7738799Z 
2025-02-27T19:34:55.7739040Z     [0m [90m 165 |[39m     
2025-02-27T19:34:55.7741285Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7744063Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7745321Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7745942Z      [90m 168 |[39m     
2025-02-27T19:34:55.7748194Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:55.7751879Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7752401Z 
2025-02-27T19:34:55.7756233Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:55.7757171Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:160:39)
2025-02-27T19:34:55.7757637Z 
2025-02-27T19:34:55.7758471Z   ● BuildingManager › purchase validation › should return false for non-existent buildings
2025-02-27T19:34:55.7759025Z 
2025-02-27T19:34:55.7759421Z     TypeError: Cannot read properties of undefined (reading 'non_existent')
2025-02-27T19:34:55.7759870Z 
2025-02-27T19:34:55.7760115Z     [0m [90m 165 |[39m     
2025-02-27T19:34:55.7760927Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7762853Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7764258Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7764768Z      [90m 168 |[39m     
2025-02-27T19:34:55.7767312Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:55.7769746Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7770267Z 
2025-02-27T19:34:55.7771012Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:55.7772674Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:193:38)
2025-02-27T19:34:55.7773155Z 
2025-02-27T19:34:55.7774824Z   ● BuildingManager › purchase validation › should return false for locked buildings
2025-02-27T19:34:55.7775480Z 
2025-02-27T19:34:55.7776149Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:55.7776601Z 
2025-02-27T19:34:55.7776838Z     [0m [90m 165 |[39m     
2025-02-27T19:34:55.7779442Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7782243Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7783343Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7783852Z      [90m 168 |[39m     
2025-02-27T19:34:55.7786380Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:55.7788973Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:55.7789359Z 
2025-02-27T19:34:55.7790163Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:55.7792041Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:226:38)
2025-02-27T19:34:55.7792523Z 
2025-02-27T19:34:55.7793734Z   ● BuildingManager › purchasing › should purchase a building and deduct resources
2025-02-27T19:34:55.7794220Z 
2025-02-27T19:34:55.7795293Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:55.7795859Z 
2025-02-27T19:34:55.7796099Z     [0m [90m 197 |[39m     
2025-02-27T19:34:55.7798326Z      [90m 198 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7801141Z     [31m[1m>[22m[39m[90m 199 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7802307Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7802828Z      [90m 200 |[39m     
2025-02-27T19:34:55.7804366Z      [90m 201 |[39m     [90m// Deduct resources[39m
2025-02-27T19:34:55.7808538Z      [90m 202 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mdeductResources(building[33m.[39mcost))[33m;[39m[0m
2025-02-27T19:34:55.7809085Z 
2025-02-27T19:34:55.7809537Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:199:38)
2025-02-27T19:34:55.7810993Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:273:38)
2025-02-27T19:34:55.7811477Z 
2025-02-27T19:34:55.7813991Z   ● BuildingManager › production calculation › should correctly calculate production based on level and workers
2025-02-27T19:34:55.7814568Z 
2025-02-27T19:34:55.7814968Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:34:55.7815580Z 
2025-02-27T19:34:55.7815825Z     [0m [90m 222 |[39m     
2025-02-27T19:34:55.7818018Z      [90m 223 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.7820855Z     [31m[1m>[22m[39m[90m 224 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.7821903Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7822409Z      [90m 225 |[39m     
2025-02-27T19:34:55.7823737Z      [90m 226 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.7825001Z      [90m 227 |[39m       [36mreturn[39m[33m;[39m[0m
2025-02-27T19:34:55.7825462Z 
2025-02-27T19:34:55.7827064Z       at BuildingManager.recalculateProduction (src/systems/buildingManager.ts:224:38)
2025-02-27T19:34:55.7828531Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:329:23)
2025-02-27T19:34:55.7828997Z 
2025-02-27T19:34:55.7830278Z FAIL src/systems/__tests__/saveManager.test.ts
2025-02-27T19:34:55.7831223Z   ● SaveManager › loadGame › should dispatch actions to restore game state
2025-02-27T19:34:55.7831690Z 
2025-02-27T19:34:55.7832012Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7832394Z 
2025-02-27T19:34:55.7832531Z     Expected: true
2025-02-27T19:34:55.7832877Z     Received: false
2025-02-27T19:34:55.7833084Z 
2025-02-27T19:34:55.7833338Z     [0m [90m 178 |[39m       
2025-02-27T19:34:55.7833887Z      [90m 179 |[39m       [90m// Assert[39m
2025-02-27T19:34:55.7834784Z     [31m[1m>[22m[39m[90m 180 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7835773Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7836319Z      [90m 181 |[39m       
2025-02-27T19:34:55.7837063Z      [90m 182 |[39m       [90m// Verify reset actions were dispatched[39m
2025-02-27T19:34:55.7839101Z      [90m 183 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({[0m
2025-02-27T19:34:55.7839774Z 
2025-02-27T19:34:55.7840119Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:180:22)
2025-02-27T19:34:55.7840401Z 
2025-02-27T19:34:55.7841571Z   ● SaveManager › resetGame › should dispatch reset actions for all state slices
2025-02-27T19:34:55.7842051Z 
2025-02-27T19:34:55.7842411Z     TypeError: this.actions.resetGame is not a function
2025-02-27T19:34:55.7842815Z 
2025-02-27T19:34:55.7844577Z     [0m [90m 217 |[39m     [36mthis[39m[33m.[39mensureInitialized()[33m;[39m
2025-02-27T19:34:55.7845299Z      [90m 218 |[39m     
2025-02-27T19:34:55.7848713Z     [31m[1m>[22m[39m[90m 219 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetGame())[33m;[39m
2025-02-27T19:34:55.7849547Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:34:55.7853767Z      [90m 220 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetResources())[33m;[39m
2025-02-27T19:34:55.7856749Z      [90m 221 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetStructures())[33m;[39m
2025-02-27T19:34:55.7857561Z      [90m 222 |[39m   }[0m
2025-02-27T19:34:55.7857796Z 
2025-02-27T19:34:55.7858136Z       at SaveManager.resetGame (src/systems/saveManager.ts:219:32)
2025-02-27T19:34:55.7859824Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:243:19)
2025-02-27T19:34:55.7860280Z 
2025-02-27T19:34:55.7861682Z   ● SaveManager › deleteSaveAndReset › should delete the save and reset the game
2025-02-27T19:34:55.7862172Z 
2025-02-27T19:34:55.7862773Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7863152Z 
2025-02-27T19:34:55.7863286Z     Expected: true
2025-02-27T19:34:55.7863594Z     Received: false
2025-02-27T19:34:55.7863789Z 
2025-02-27T19:34:55.7864047Z     [0m [90m 265 |[39m       
2025-02-27T19:34:55.7865251Z      [90m 266 |[39m       [90m// Assert[39m
2025-02-27T19:34:55.7867947Z     [31m[1m>[22m[39m[90m 267 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7868963Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7871141Z      [90m 268 |[39m       expect(saveUtils[33m.[39mdeleteSave)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:34:55.7873741Z      [90m 269 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7876031Z      [90m 270 |[39m         type[33m:[39m expect[33m.[39mstringContaining([32m'game/resetGame'[39m)[0m
2025-02-27T19:34:55.7876537Z 
2025-02-27T19:34:55.7877285Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:267:22)
2025-02-27T19:34:55.7877741Z 
2025-02-27T19:34:55.7878372Z FAIL src/integration/tasks.integration.test.ts
2025-02-27T19:34:55.7880196Z   ● Task System Integration › should start a task when requirements are met
2025-02-27T19:34:55.7880660Z 
2025-02-27T19:34:55.7881143Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7881496Z 
2025-02-27T19:34:55.7881644Z     Expected: true
2025-02-27T19:34:55.7881950Z     Received: false
2025-02-27T19:34:55.7882147Z 
2025-02-27T19:34:55.7885555Z     [0m [90m 151 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mstartTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7886291Z      [90m 152 |[39m     
2025-02-27T19:34:55.7887916Z     [31m[1m>[22m[39m[90m 153 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7888698Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:55.7890956Z      [90m 154 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:55.7891877Z      [90m 155 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7893941Z      [90m 156 |[39m         type[33m:[39m [32m'tasks/startTask'[39m[33m,[39m[0m
2025-02-27T19:34:55.7894351Z 
2025-02-27T19:34:55.7895390Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:153:20)
2025-02-27T19:34:55.7895864Z 
2025-02-27T19:34:55.7896976Z   ● Task System Integration › should check if task requirements are met
2025-02-27T19:34:55.7897402Z 
2025-02-27T19:34:55.7898025Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7898376Z 
2025-02-27T19:34:55.7898511Z     Expected: true
2025-02-27T19:34:55.7898822Z     Received: false
2025-02-27T19:34:55.7899011Z 
2025-02-27T19:34:55.7902398Z     [0m [90m 188 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39munlockTask([32m'locked-task'[39m)[33m;[39m
2025-02-27T19:34:55.7903093Z      [90m 189 |[39m     
2025-02-27T19:34:55.7904929Z     [31m[1m>[22m[39m[90m 190 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7905925Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:55.7908107Z      [90m 191 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:55.7909019Z      [90m 192 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7911115Z      [90m 193 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:34:55.7911532Z 
2025-02-27T19:34:55.7912362Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:190:20)
2025-02-27T19:34:55.7912830Z 
2025-02-27T19:34:55.7913821Z   ● Task System Integration › should complete an in-progress task
2025-02-27T19:34:55.7914232Z 
2025-02-27T19:34:55.7914777Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7915473Z 
2025-02-27T19:34:55.7915616Z     Expected: true
2025-02-27T19:34:55.7915930Z     Received: false
2025-02-27T19:34:55.7916115Z 
2025-02-27T19:34:55.7919315Z     [0m [90m 214 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcompleteTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7920003Z      [90m 215 |[39m     
2025-02-27T19:34:55.7921650Z     [31m[1m>[22m[39m[90m 216 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7922638Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:55.7924449Z      [90m 217 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:55.7925802Z      [90m 218 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7927955Z      [90m 219 |[39m         type[33m:[39m [32m'tasks/completeTask'[39m[33m,[39m[0m
2025-02-27T19:34:55.7928371Z 
2025-02-27T19:34:55.7929179Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:216:20)
2025-02-27T19:34:55.7929643Z 
2025-02-27T19:34:55.7930561Z   ● Task System Integration › should cancel an in-progress task
2025-02-27T19:34:55.7930950Z 
2025-02-27T19:34:55.7931626Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7931978Z 
2025-02-27T19:34:55.7932108Z     Expected: true
2025-02-27T19:34:55.7932410Z     Received: false
2025-02-27T19:34:55.7932591Z 
2025-02-27T19:34:55.7936063Z     [0m [90m 240 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcancelTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7936744Z      [90m 241 |[39m     
2025-02-27T19:34:55.7938398Z     [31m[1m>[22m[39m[90m 242 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:34:55.7939171Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:34:55.7941389Z      [90m 243 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:55.7942371Z      [90m 244 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7944342Z      [90m 245 |[39m         type[33m:[39m [32m'tasks/cancelTask'[39m[33m,[39m[0m
2025-02-27T19:34:55.7944729Z 
2025-02-27T19:34:55.7945928Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:242:20)
2025-02-27T19:34:55.7946344Z 
2025-02-27T19:34:55.7948113Z   ● Task System Integration › should check all task requirements and unlock eligible tasks
2025-02-27T19:34:55.7948798Z 
2025-02-27T19:34:55.7949277Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:34:55.7949655Z 
2025-02-27T19:34:55.7949797Z     Expected: 2
2025-02-27T19:34:55.7950207Z     Received: 0
2025-02-27T19:34:55.7950568Z 
2025-02-27T19:34:55.7951489Z     [0m [90m 271 |[39m     [36mconst[39m unlocked [33m=[39m taskManager[33m.[39mcheckAllTaskRequirements()[33m;[39m
2025-02-27T19:34:55.7952306Z      [90m 272 |[39m     
2025-02-27T19:34:55.7955585Z     [31m[1m>[22m[39m[90m 273 |[39m     expect(unlocked)[33m.[39mtoBe([35m2[39m)[33m;[39m [90m// Two tasks should be unlocked[39m
2025-02-27T19:34:55.7956718Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:34:55.7957543Z      [90m 274 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:34:55.7958211Z      [90m 275 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:34:55.7959038Z      [90m 276 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:34:55.7959458Z 
2025-02-27T19:34:55.7959949Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:273:22)
2025-02-27T19:34:55.7960415Z 
2025-02-27T19:34:55.7961572Z   ● Task System Integration › should emit events when task status changes
2025-02-27T19:34:55.7962007Z 
2025-02-27T19:34:55.7962554Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-02-27T19:34:55.7962901Z 
2025-02-27T19:34:55.7963048Z     Expected: "test-task"
2025-02-27T19:34:55.7963271Z 
2025-02-27T19:34:55.7963698Z     Number of calls: 0
2025-02-27T19:34:55.7963916Z 
2025-02-27T19:34:55.7964221Z     [0m [90m 314 |[39m     
2025-02-27T19:34:55.7965879Z      [90m 315 |[39m     [90m// Verify events were emitted[39m
2025-02-27T19:34:55.7969311Z     [31m[1m>[22m[39m[90m 316 |[39m     expect(startedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7970279Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-02-27T19:34:55.7972971Z      [90m 317 |[39m     expect(completedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7973813Z      [90m 318 |[39m   })[33m;[39m
2025-02-27T19:34:55.7974245Z      [90m 319 |[39m   [0m
2025-02-27T19:34:55.7974476Z 
2025-02-27T19:34:55.7975500Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:316:29)
2025-02-27T19:34:55.7975973Z 
2025-02-27T19:34:55.7977234Z   ● Task System Integration › should provide progress information for a task
2025-02-27T19:34:55.7977729Z 
2025-02-27T19:34:55.7977920Z     expect(received).not.toBeNull()
2025-02-27T19:34:55.7978199Z 
2025-02-27T19:34:55.7978328Z     Received: null
2025-02-27T19:34:55.7978522Z 
2025-02-27T19:34:55.7981857Z     [0m [90m 334 |[39m     [36mconst[39m progress [33m=[39m taskManager[33m.[39mgetTaskProgress([32m'test-task'[39m)[33m;[39m
2025-02-27T19:34:55.7982563Z      [90m 335 |[39m     
2025-02-27T19:34:55.7984317Z     [31m[1m>[22m[39m[90m 336 |[39m     expect(progress)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
2025-02-27T19:34:55.7985420Z      [90m     |[39m                          [31m[1m^[22m[39m
2025-02-27T19:34:55.7990138Z      [90m 337 |[39m     expect(progress[33m?[39m[33m.[39mstatus)[33m.[39mtoBe([33mTaskStatus[39m[33m.[39m[33mIN_PROGRESS[39m)[33m;[39m
2025-02-27T19:34:55.7992278Z      [90m 338 |[39m     expect(progress[33m?[39m[33m.[39mprogress)[33m.[39mtoBe([35m50[39m)[33m;[39m
2025-02-27T19:34:55.7995036Z      [90m 339 |[39m     expect(progress[33m?[39m[33m.[39mtimeRemaining)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-02-27T19:34:55.7995819Z 
2025-02-27T19:34:55.7996214Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:336:26)
2025-02-27T19:34:55.7996686Z 
2025-02-27T19:34:55.7997344Z FAIL src/systems/__tests__/eventManager.test.ts
2025-02-27T19:34:55.7997899Z   ● Test suite failed to run
2025-02-27T19:34:55.7998143Z 
2025-02-27T19:34:55.8009020Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m65[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8010470Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8014093Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8015475Z 
2025-02-27T19:34:55.8015962Z     [7m65[0m     expect(() => eventManager.initialize(store)).not.toThrow();
2025-02-27T19:34:55.8016719Z     [7m  [0m [91m                                         ~~~~~[0m
2025-02-27T19:34:55.8017048Z 
2025-02-27T19:34:55.8017379Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8018710Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8019354Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8020096Z         'tutorial' is declared here.
2025-02-27T19:34:55.8031343Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m72[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8032819Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8036423Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8037858Z 
2025-02-27T19:34:55.8038211Z     [7m72[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8038831Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8039130Z 
2025-02-27T19:34:55.8039467Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8040164Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8040779Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8041300Z         'tutorial' is declared here.
2025-02-27T19:34:55.8052368Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m85[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8053825Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8057580Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8058830Z 
2025-02-27T19:34:55.8059181Z     [7m85[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8059800Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8060096Z 
2025-02-27T19:34:55.8060424Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8061270Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8061937Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8062621Z         'tutorial' is declared here.
2025-02-27T19:34:55.8073692Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m113[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8076201Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8078945Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8080292Z 
2025-02-27T19:34:55.8080643Z     [7m113[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8081256Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8081563Z 
2025-02-27T19:34:55.8081894Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8082607Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8083269Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8083972Z         'tutorial' is declared here.
2025-02-27T19:34:55.8095246Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m131[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8097573Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8100243Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8101674Z 
2025-02-27T19:34:55.8102032Z     [7m131[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8102653Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8102954Z 
2025-02-27T19:34:55.8103280Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8103979Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8104603Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8105422Z         'tutorial' is declared here.
2025-02-27T19:34:55.8116617Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8118073Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8121738Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8123110Z 
2025-02-27T19:34:55.8123458Z     [7m165[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8124093Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8124393Z 
2025-02-27T19:34:55.8124797Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8126699Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8127328Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8127773Z         'tutorial' is declared here.
2025-02-27T19:34:55.8138672Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m185[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8140138Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8143792Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8145017Z 
2025-02-27T19:34:55.8145497Z     [7m185[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8146117Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8146412Z 
2025-02-27T19:34:55.8146743Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8147652Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8148353Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8149008Z         'tutorial' is declared here.
2025-02-27T19:34:55.8160420Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m226[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8162748Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8165604Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8167072Z 
2025-02-27T19:34:55.8167422Z     [7m226[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8168041Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8168339Z 
2025-02-27T19:34:55.8168673Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8169370Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8169964Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8170625Z         'tutorial' is declared here.
2025-02-27T19:34:55.8181670Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m258[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8184021Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8186871Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8188216Z 
2025-02-27T19:34:55.8188640Z     [7m258[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8189249Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8189551Z 
2025-02-27T19:34:55.8189879Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8190568Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8191236Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8191925Z         'tutorial' is declared here.
2025-02-27T19:34:55.8203116Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m284[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8205565Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8208204Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8209447Z 
2025-02-27T19:34:55.8209785Z     [7m284[0m     eventManager.initialize(store);
2025-02-27T19:34:55.8210398Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:34:55.8210695Z 
2025-02-27T19:34:55.8211025Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8211821Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8212452Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8213189Z         'tutorial' is declared here.
2025-02-27T19:34:55.8213456Z 
2025-02-27T19:34:55.8214436Z FAIL src/systems/__tests__/gameLoop.test.ts
2025-02-27T19:34:55.8214996Z   ● Test suite failed to run
2025-02-27T19:34:55.8215409Z 
2025-02-27T19:34:55.8226313Z     [96msrc/systems/__tests__/gameLoop.test.ts[0m:[93m87[0m:[93m25[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:34:55.8227771Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:34:55.8231305Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:34:55.8232740Z 
2025-02-27T19:34:55.8233073Z     [7m87[0m     gameLoop.initialize(store);
2025-02-27T19:34:55.8233655Z     [7m  [0m [91m                        ~~~~~[0m
2025-02-27T19:34:55.8233951Z 
2025-02-27T19:34:55.8234281Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8234987Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8235755Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8236223Z         'tutorial' is declared here.
2025-02-27T19:34:55.8237162Z 
2025-02-27T19:34:55.8237425Z FAIL src/gameCore.integration.test.tsx
2025-02-27T19:34:55.8239691Z   ● Game Core Systems Integration › Building purchase consumes resources correctly
2025-02-27T19:34:55.8240212Z 
2025-02-27T19:34:55.8240890Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:34:55.8241391Z 
2025-02-27T19:34:55.8241634Z     [0m [90m 165 |[39m     
2025-02-27T19:34:55.8244032Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.8246951Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.8248043Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.8248560Z      [90m 168 |[39m     
2025-02-27T19:34:55.8250938Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:34:55.8253491Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:34:55.8253937Z 
2025-02-27T19:34:55.8254709Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:34:55.8256615Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:194:58)
2025-02-27T19:34:55.8259007Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:171:36)
2025-02-27T19:34:55.8259426Z 
2025-02-27T19:34:55.8260643Z   ● Game Core Systems Integration › Building level affects production calculation
2025-02-27T19:34:55.8261621Z 
2025-02-27T19:34:55.8262208Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:34:55.8262773Z 
2025-02-27T19:34:55.8263015Z     [0m [90m 274 |[39m     
2025-02-27T19:34:55.8265373Z      [90m 275 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.8268158Z     [31m[1m>[22m[39m[90m 276 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.8269255Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.8269950Z      [90m 277 |[39m     
2025-02-27T19:34:55.8270818Z      [90m 278 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.8271469Z      [90m 279 |[39m       [36mreturn[39m {}[33m;[39m[0m
2025-02-27T19:34:55.8271781Z 
2025-02-27T19:34:55.8273636Z       at BuildingManager.calculateUpgradeCost (src/systems/buildingManager.ts:276:38)
2025-02-27T19:34:55.8274678Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:209:41)
2025-02-27T19:34:55.8275243Z 
2025-02-27T19:34:55.8275680Z FAIL src/state/selectors.test.ts
2025-02-27T19:34:55.8276481Z   ● Test suite failed to run
2025-02-27T19:34:55.8276738Z 
2025-02-27T19:34:55.8290640Z     [96msrc/state/selectors.test.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2352: [0mConversion of type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' to type 'RootState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-27T19:34:55.8297578Z       Property 'tutorial' is missing in type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' but required in type 'RootState'.
2025-02-27T19:34:55.8299247Z 
2025-02-27T19:34:55.8299587Z     [7m 94[0m   const mockState: RootState = {
2025-02-27T19:34:55.8300189Z     [7m   [0m [91m                               ~[0m
2025-02-27T19:34:55.8300716Z     [7m 95[0m     resources: {
2025-02-27T19:34:55.8301197Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:55.8301622Z     [7m...[0m 
2025-02-27T19:34:55.8301966Z     [7m163[0m     }
2025-02-27T19:34:55.8302377Z     [7m   [0m [91m~~~~~[0m
2025-02-27T19:34:55.8302843Z     [7m164[0m   } as RootState;
2025-02-27T19:34:55.8303329Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:55.8303597Z 
2025-02-27T19:34:55.8303925Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:34:55.8305360Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:34:55.8306002Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:34:55.8306708Z         'tutorial' is declared here.
2025-02-27T19:34:55.8306979Z 
2025-02-27T19:34:55.8307805Z FAIL src/workers.integration.test.tsx
2025-02-27T19:34:55.8310019Z   ● Worker System Integration Test › WorkerManager can assign and manage workers
2025-02-27T19:34:55.8310522Z 
2025-02-27T19:34:55.8311041Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:34:55.8311493Z 
2025-02-27T19:34:55.8311729Z     [0m [90m 190 |[39m     
2025-02-27T19:34:55.8314214Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:34:55.8317152Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:34:55.8318222Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:34:55.8318736Z      [90m 193 |[39m     
2025-02-27T19:34:55.8319955Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:34:55.8321856Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:34:55.8322225Z 
2025-02-27T19:34:55.8323278Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:34:55.8324655Z       at Object.<anonymous> (src/workers.integration.test.tsx:105:19)
2025-02-27T19:34:55.8325068Z 
2025-02-27T19:34:55.8325930Z FAIL src/systems/__tests__/oppressionSystem.test.ts
2025-02-27T19:34:55.8328105Z   ● Oppression System › oppression resource should generate at the specified rate
2025-02-27T19:34:55.8328581Z 
2025-02-27T19:34:55.8329053Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:55.8329567Z 
2025-02-27T19:34:55.8329809Z     [0m [90m 178 |[39m     
2025-02-27T19:34:55.8332388Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:55.8339393Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:55.8341057Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:55.8341565Z      [90m 181 |[39m     
2025-02-27T19:34:55.8341943Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:55.8343061Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:55.8343693Z 
2025-02-27T19:34:55.8344625Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:55.8346649Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:67:21)
2025-02-27T19:34:55.8347138Z 
2025-02-27T19:34:55.8348224Z   ● Oppression System › oppression should continue to generate in multiple ticks
2025-02-27T19:34:55.8348706Z 
2025-02-27T19:34:55.8349340Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:55.8349768Z 
2025-02-27T19:34:55.8349994Z     [0m [90m 178 |[39m     
2025-02-27T19:34:55.8352855Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:55.8359627Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:55.8361220Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:55.8361737Z      [90m 181 |[39m     
2025-02-27T19:34:55.8362242Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:55.8363398Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:55.8363845Z 
2025-02-27T19:34:55.8365074Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:55.8367065Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:85:23)
2025-02-27T19:34:55.8367555Z 
2025-02-27T19:34:55.8368946Z   ● Oppression System › oppression should generate even if its perSecond property is modified
2025-02-27T19:34:55.8369511Z 
2025-02-27T19:34:55.8370052Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:55.8370472Z 
2025-02-27T19:34:55.8370708Z     [0m [90m 178 |[39m     
2025-02-27T19:34:55.8373536Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:55.8380241Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:55.8381806Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:55.8382330Z      [90m 181 |[39m     
2025-02-27T19:34:55.8382843Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:55.8384118Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:55.8384607Z 
2025-02-27T19:34:55.8386066Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:55.8387563Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:107:21)
2025-02-27T19:34:55.8388059Z 
2025-02-27T19:34:55.8389580Z   ● Oppression System › oppression generation should scale with time delta correctly
2025-02-27T19:34:55.8390089Z 
2025-02-27T19:34:55.8390575Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:34:55.8390985Z 
2025-02-27T19:34:55.8391206Z     [0m [90m 178 |[39m     
2025-02-27T19:34:55.8395373Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:34:55.8401727Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:34:55.8403259Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:34:55.8403997Z      [90m 181 |[39m     
2025-02-27T19:34:55.8404526Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:34:55.8405677Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:34:55.8406127Z 
2025-02-27T19:34:55.8407208Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:34:55.8409186Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:127:23)
2025-02-27T19:34:55.8409684Z 
2025-02-27T19:34:55.8409925Z FAIL src/components/App.test.tsx
2025-02-27T19:34:55.8410429Z   ● Test suite failed to run
2025-02-27T19:34:55.8410679Z 
2025-02-27T19:34:55.8414661Z     [96msrc/managers/TutorialManager.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../state/store"' has no exported member 'AppState'.
2025-02-27T19:34:55.8415627Z 
2025-02-27T19:34:55.8415977Z     [7m3[0m import { AppState } from '../state/store';
2025-02-27T19:34:55.8416544Z     [7m [0m [91m         ~~~~~~~~[0m
2025-02-27T19:34:55.8422257Z     [96msrc/managers/TutorialManager.ts[0m:[93m79[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:55.8423426Z 
2025-02-27T19:34:55.8423826Z     [7m79[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:34:55.8424585Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:55.8430359Z     [96msrc/managers/TutorialManager.ts[0m:[93m99[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:55.8431516Z 
2025-02-27T19:34:55.8431909Z     [7m99[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:34:55.8432616Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:55.8438372Z     [96msrc/managers/TutorialManager.ts[0m:[93m155[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:34:55.8439729Z 
2025-02-27T19:34:55.8440100Z     [7m155[0m       return tutorialContent[currentStep];
2025-02-27T19:34:55.8440756Z     [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:34:55.8441066Z 
2025-02-27T19:34:55.8441074Z 
2025-02-27T19:34:55.8442642Z Test Suites: 13 failed, 45 passed, 58 total
2025-02-27T19:34:55.8443275Z Tests:       60 failed, 4 skipped, 299 passed, 363 total
2025-02-27T19:34:55.8443604Z Snapshots:   0 total
2025-02-27T19:34:55.8443821Z Time:        30.301 s
2025-02-27T19:34:55.8444037Z Ran all test suites.
2025-02-27T19:34:55.8623612Z ##[error]Process completed with exit code 1.
2025-02-27T19:34:55.8721518Z Post job cleanup.
2025-02-27T19:34:55.9458411Z [command]/usr/bin/git version
2025-02-27T19:34:55.9492090Z git version 2.48.1
2025-02-27T19:34:55.9533538Z Temporarily overriding HOME='/home/runner/work/_temp/cf83632f-7d25-4d63-8e92-49522538e8c1' before making global git config changes
2025-02-27T19:34:55.9534469Z Adding repository directory to the temporary git global config as a safe directory
2025-02-27T19:34:55.9537432Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-27T19:34:55.9567696Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-27T19:34:55.9595732Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-27T19:34:55.9832120Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-27T19:34:55.9852111Z http.https://github.com/.extraheader
2025-02-27T19:34:55.9864210Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-02-27T19:34:55.9893313Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-27T19:34:56.0220329Z Cleaning up orphan processes
