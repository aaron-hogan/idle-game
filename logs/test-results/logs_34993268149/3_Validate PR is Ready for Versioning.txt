2025-02-27T19:41:22.4739752Z Current runner version: '2.322.0'
2025-02-27T19:41:22.4765056Z ##[group]Operating System
2025-02-27T19:41:22.4766041Z Ubuntu
2025-02-27T19:41:22.4766594Z 24.04.2
2025-02-27T19:41:22.4767160Z LTS
2025-02-27T19:41:22.4767618Z ##[endgroup]
2025-02-27T19:41:22.4768166Z ##[group]Runner Image
2025-02-27T19:41:22.4768803Z Image: ubuntu-24.04
2025-02-27T19:41:22.4769355Z Version: 20250223.1.0
2025-02-27T19:41:22.4770388Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250223.1/images/ubuntu/Ubuntu2404-Readme.md
2025-02-27T19:41:22.4771830Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250223.1
2025-02-27T19:41:22.4772751Z ##[endgroup]
2025-02-27T19:41:22.4773291Z ##[group]Runner Image Provisioner
2025-02-27T19:41:22.4773964Z 2.0.422.1
2025-02-27T19:41:22.4774471Z ##[endgroup]
2025-02-27T19:41:22.4775601Z ##[group]GITHUB_TOKEN Permissions
2025-02-27T19:41:22.4777536Z Contents: read
2025-02-27T19:41:22.4778184Z Metadata: read
2025-02-27T19:41:22.4778981Z Packages: read
2025-02-27T19:41:22.4779644Z ##[endgroup]
2025-02-27T19:41:22.4782551Z Secret source: Actions
2025-02-27T19:41:22.4783279Z Prepare workflow directory
2025-02-27T19:41:22.5098756Z Prepare all required actions
2025-02-27T19:41:22.5136557Z Getting action download info
2025-02-27T19:41:22.7165362Z Download action repository 'actions/checkout@v3' (SHA:f43a0e5ff2bd294095638e18286ca9a3d1956744)
2025-02-27T19:41:22.7986343Z Download action repository 'actions/setup-node@v3' (SHA:1a4442cacd436585916779262731d5b162bc6ec7)
2025-02-27T19:41:22.9609456Z Complete job name: Validate PR is Ready for Versioning
2025-02-27T19:41:23.0357535Z ##[group]Run actions/checkout@v3
2025-02-27T19:41:23.0358419Z with:
2025-02-27T19:41:23.0358857Z   repository: aaron-hogan/idle-game
2025-02-27T19:41:23.0359558Z   token: ***
2025-02-27T19:41:23.0359963Z   ssh-strict: true
2025-02-27T19:41:23.0360407Z   persist-credentials: true
2025-02-27T19:41:23.0360865Z   clean: true
2025-02-27T19:41:23.0361287Z   sparse-checkout-cone-mode: true
2025-02-27T19:41:23.0361809Z   fetch-depth: 1
2025-02-27T19:41:23.0362219Z   fetch-tags: false
2025-02-27T19:41:23.0362624Z   lfs: false
2025-02-27T19:41:23.0363013Z   submodules: false
2025-02-27T19:41:23.0363433Z   set-safe-directory: true
2025-02-27T19:41:23.0364078Z ##[endgroup]
2025-02-27T19:41:23.1896994Z Syncing repository: aaron-hogan/idle-game
2025-02-27T19:41:23.1899252Z ##[group]Getting Git version info
2025-02-27T19:41:23.1900002Z Working directory is '/home/runner/work/idle-game/idle-game'
2025-02-27T19:41:23.1900976Z [command]/usr/bin/git version
2025-02-27T19:41:23.1948920Z git version 2.48.1
2025-02-27T19:41:23.1979559Z ##[endgroup]
2025-02-27T19:41:23.1996106Z Temporarily overriding HOME='/home/runner/work/_temp/e4fa973b-4b38-4d03-8632-381699131986' before making global git config changes
2025-02-27T19:41:23.1997490Z Adding repository directory to the temporary git global config as a safe directory
2025-02-27T19:41:23.2000025Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-27T19:41:23.2036843Z Deleting the contents of '/home/runner/work/idle-game/idle-game'
2025-02-27T19:41:23.2040762Z ##[group]Initializing the repository
2025-02-27T19:41:23.2043849Z [command]/usr/bin/git init /home/runner/work/idle-game/idle-game
2025-02-27T19:41:23.2105693Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-02-27T19:41:23.2107424Z hint: is subject to change. To configure the initial branch name to use in all
2025-02-27T19:41:23.2108410Z hint: of your new repositories, which will suppress this warning, call:
2025-02-27T19:41:23.2109638Z hint:
2025-02-27T19:41:23.2110486Z hint: 	git config --global init.defaultBranch <name>
2025-02-27T19:41:23.2111493Z hint:
2025-02-27T19:41:23.2112399Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-02-27T19:41:23.2113857Z hint: 'development'. The just-created branch can be renamed via this command:
2025-02-27T19:41:23.2114618Z hint:
2025-02-27T19:41:23.2115268Z hint: 	git branch -m <name>
2025-02-27T19:41:23.2116457Z Initialized empty Git repository in /home/runner/work/idle-game/idle-game/.git/
2025-02-27T19:41:23.2122853Z [command]/usr/bin/git remote add origin https://github.com/aaron-hogan/idle-game
2025-02-27T19:41:23.2154347Z ##[endgroup]
2025-02-27T19:41:23.2155088Z ##[group]Disabling automatic garbage collection
2025-02-27T19:41:23.2157308Z [command]/usr/bin/git config --local gc.auto 0
2025-02-27T19:41:23.2183987Z ##[endgroup]
2025-02-27T19:41:23.2184687Z ##[group]Setting up auth
2025-02-27T19:41:23.2189708Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-27T19:41:23.2217542Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-27T19:41:23.2493969Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-27T19:41:23.2521290Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-27T19:41:23.2755146Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-02-27T19:41:23.2788698Z ##[endgroup]
2025-02-27T19:41:23.2789512Z ##[group]Fetching the repository
2025-02-27T19:41:23.2797737Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --progress --no-recurse-submodules --depth=1 origin +a3095fa873568973de1df0051a8861d8b5e686be:refs/remotes/origin/main
2025-02-27T19:41:23.7802985Z remote: Enumerating objects: 591, done.        
2025-02-27T19:41:23.7804383Z remote: Counting objects:   0% (1/591)        
2025-02-27T19:41:23.7805672Z remote: Counting objects:   1% (6/591)        
2025-02-27T19:41:23.7806887Z remote: Counting objects:   2% (12/591)        
2025-02-27T19:41:23.7807981Z remote: Counting objects:   3% (18/591)        
2025-02-27T19:41:23.7808820Z remote: Counting objects:   4% (24/591)        
2025-02-27T19:41:23.7809486Z remote: Counting objects:   5% (30/591)        
2025-02-27T19:41:23.7810140Z remote: Counting objects:   6% (36/591)        
2025-02-27T19:41:23.7810799Z remote: Counting objects:   7% (42/591)        
2025-02-27T19:41:23.7811460Z remote: Counting objects:   8% (48/591)        
2025-02-27T19:41:23.7812114Z remote: Counting objects:   9% (54/591)        
2025-02-27T19:41:23.7812764Z remote: Counting objects:  10% (60/591)        
2025-02-27T19:41:23.7813420Z remote: Counting objects:  11% (66/591)        
2025-02-27T19:41:23.7814074Z remote: Counting objects:  12% (71/591)        
2025-02-27T19:41:23.7814728Z remote: Counting objects:  13% (77/591)        
2025-02-27T19:41:23.7815394Z remote: Counting objects:  14% (83/591)        
2025-02-27T19:41:23.7816260Z remote: Counting objects:  15% (89/591)        
2025-02-27T19:41:23.7816900Z remote: Counting objects:  16% (95/591)        
2025-02-27T19:41:23.7817638Z remote: Counting objects:  17% (101/591)        
2025-02-27T19:41:23.7818256Z remote: Counting objects:  18% (107/591)        
2025-02-27T19:41:23.7818837Z remote: Counting objects:  19% (113/591)        
2025-02-27T19:41:23.7819420Z remote: Counting objects:  20% (119/591)        
2025-02-27T19:41:23.7820010Z remote: Counting objects:  21% (125/591)        
2025-02-27T19:41:23.7820606Z remote: Counting objects:  22% (131/591)        
2025-02-27T19:41:23.7821196Z remote: Counting objects:  23% (136/591)        
2025-02-27T19:41:23.7821798Z remote: Counting objects:  24% (142/591)        
2025-02-27T19:41:23.7822390Z remote: Counting objects:  25% (148/591)        
2025-02-27T19:41:23.7822991Z remote: Counting objects:  26% (154/591)        
2025-02-27T19:41:23.7823578Z remote: Counting objects:  27% (160/591)        
2025-02-27T19:41:23.7824159Z remote: Counting objects:  28% (166/591)        
2025-02-27T19:41:23.7824737Z remote: Counting objects:  29% (172/591)        
2025-02-27T19:41:23.7825707Z remote: Counting objects:  30% (178/591)        
2025-02-27T19:41:23.7826444Z remote: Counting objects:  31% (184/591)        
2025-02-27T19:41:23.7827067Z remote: Counting objects:  32% (190/591)        
2025-02-27T19:41:23.7827648Z remote: Counting objects:  33% (196/591)        
2025-02-27T19:41:23.7828225Z remote: Counting objects:  34% (201/591)        
2025-02-27T19:41:23.7828795Z remote: Counting objects:  35% (207/591)        
2025-02-27T19:41:23.7829368Z remote: Counting objects:  36% (213/591)        
2025-02-27T19:41:23.7829953Z remote: Counting objects:  37% (219/591)        
2025-02-27T19:41:23.7830530Z remote: Counting objects:  38% (225/591)        
2025-02-27T19:41:23.7831108Z remote: Counting objects:  39% (231/591)        
2025-02-27T19:41:23.7831681Z remote: Counting objects:  40% (237/591)        
2025-02-27T19:41:23.7832258Z remote: Counting objects:  41% (243/591)        
2025-02-27T19:41:23.7832828Z remote: Counting objects:  42% (249/591)        
2025-02-27T19:41:23.7833420Z remote: Counting objects:  43% (255/591)        
2025-02-27T19:41:23.7834008Z remote: Counting objects:  44% (261/591)        
2025-02-27T19:41:23.7834585Z remote: Counting objects:  45% (266/591)        
2025-02-27T19:41:23.7835162Z remote: Counting objects:  46% (272/591)        
2025-02-27T19:41:23.7835741Z remote: Counting objects:  47% (278/591)        
2025-02-27T19:41:23.7836419Z remote: Counting objects:  48% (284/591)        
2025-02-27T19:41:23.7836996Z remote: Counting objects:  49% (290/591)        
2025-02-27T19:41:23.7837731Z remote: Counting objects:  50% (296/591)        
2025-02-27T19:41:23.7838326Z remote: Counting objects:  51% (302/591)        
2025-02-27T19:41:23.7838906Z remote: Counting objects:  52% (308/591)        
2025-02-27T19:41:23.7839486Z remote: Counting objects:  53% (314/591)        
2025-02-27T19:41:23.7840064Z remote: Counting objects:  54% (320/591)        
2025-02-27T19:41:23.7840641Z remote: Counting objects:  55% (326/591)        
2025-02-27T19:41:23.7841220Z remote: Counting objects:  56% (331/591)        
2025-02-27T19:41:23.7841806Z remote: Counting objects:  57% (337/591)        
2025-02-27T19:41:23.7842383Z remote: Counting objects:  58% (343/591)        
2025-02-27T19:41:23.7842959Z remote: Counting objects:  59% (349/591)        
2025-02-27T19:41:23.7843537Z remote: Counting objects:  60% (355/591)        
2025-02-27T19:41:23.7844109Z remote: Counting objects:  61% (361/591)        
2025-02-27T19:41:23.7844685Z remote: Counting objects:  62% (367/591)        
2025-02-27T19:41:23.7845265Z remote: Counting objects:  63% (373/591)        
2025-02-27T19:41:23.7845987Z remote: Counting objects:  64% (379/591)        
2025-02-27T19:41:23.7846765Z remote: Counting objects:  65% (385/591)        
2025-02-27T19:41:23.7847354Z remote: Counting objects:  66% (391/591)        
2025-02-27T19:41:23.7847928Z remote: Counting objects:  67% (396/591)        
2025-02-27T19:41:23.7848507Z remote: Counting objects:  68% (402/591)        
2025-02-27T19:41:23.7849111Z remote: Counting objects:  69% (408/591)        
2025-02-27T19:41:23.7933447Z remote: Counting objects:  70% (414/591)        
2025-02-27T19:41:23.7934569Z remote: Counting objects:  71% (420/591)        
2025-02-27T19:41:23.7935788Z remote: Counting objects:  72% (426/591)        
2025-02-27T19:41:23.7937027Z remote: Counting objects:  73% (432/591)        
2025-02-27T19:41:23.7937875Z remote: Counting objects:  74% (438/591)        
2025-02-27T19:41:23.7938482Z remote: Counting objects:  75% (444/591)        
2025-02-27T19:41:23.7939066Z remote: Counting objects:  76% (450/591)        
2025-02-27T19:41:23.7939686Z remote: Counting objects:  77% (456/591)        
2025-02-27T19:41:23.7940268Z remote: Counting objects:  78% (461/591)        
2025-02-27T19:41:23.7940853Z remote: Counting objects:  79% (467/591)        
2025-02-27T19:41:23.7941438Z remote: Counting objects:  80% (473/591)        
2025-02-27T19:41:23.7942024Z remote: Counting objects:  81% (479/591)        
2025-02-27T19:41:23.7942595Z remote: Counting objects:  82% (485/591)        
2025-02-27T19:41:23.7943516Z remote: Counting objects:  83% (491/591)        
2025-02-27T19:41:23.7944112Z remote: Counting objects:  84% (497/591)        
2025-02-27T19:41:23.7944707Z remote: Counting objects:  85% (503/591)        
2025-02-27T19:41:23.7945315Z remote: Counting objects:  86% (509/591)        
2025-02-27T19:41:23.7946181Z remote: Counting objects:  87% (515/591)        
2025-02-27T19:41:23.7946814Z remote: Counting objects:  88% (521/591)        
2025-02-27T19:41:23.7947409Z remote: Counting objects:  89% (526/591)        
2025-02-27T19:41:23.7948006Z remote: Counting objects:  90% (532/591)        
2025-02-27T19:41:23.7948602Z remote: Counting objects:  91% (538/591)        
2025-02-27T19:41:23.7949181Z remote: Counting objects:  92% (544/591)        
2025-02-27T19:41:23.7949762Z remote: Counting objects:  93% (550/591)        
2025-02-27T19:41:23.7950343Z remote: Counting objects:  94% (556/591)        
2025-02-27T19:41:23.7950923Z remote: Counting objects:  95% (562/591)        
2025-02-27T19:41:23.7951521Z remote: Counting objects:  96% (568/591)        
2025-02-27T19:41:23.7952107Z remote: Counting objects:  97% (574/591)        
2025-02-27T19:41:23.7952683Z remote: Counting objects:  98% (580/591)        
2025-02-27T19:41:23.7953256Z remote: Counting objects:  99% (586/591)        
2025-02-27T19:41:23.7953840Z remote: Counting objects: 100% (591/591)        
2025-02-27T19:41:23.7954459Z remote: Counting objects: 100% (591/591), done.        
2025-02-27T19:41:23.8192539Z remote: Compressing objects:   0% (1/566)        
2025-02-27T19:41:23.8193847Z remote: Compressing objects:   1% (6/566)        
2025-02-27T19:41:23.8194580Z remote: Compressing objects:   2% (12/566)        
2025-02-27T19:41:23.8195220Z remote: Compressing objects:   3% (17/566)        
2025-02-27T19:41:23.8196150Z remote: Compressing objects:   4% (23/566)        
2025-02-27T19:41:23.8197137Z remote: Compressing objects:   5% (29/566)        
2025-02-27T19:41:23.8197762Z remote: Compressing objects:   6% (34/566)        
2025-02-27T19:41:23.8198399Z remote: Compressing objects:   7% (40/566)        
2025-02-27T19:41:23.8199002Z remote: Compressing objects:   8% (46/566)        
2025-02-27T19:41:23.8199624Z remote: Compressing objects:   9% (51/566)        
2025-02-27T19:41:23.8200239Z remote: Compressing objects:  10% (57/566)        
2025-02-27T19:41:23.8200906Z remote: Compressing objects:  11% (63/566)        
2025-02-27T19:41:23.8201501Z remote: Compressing objects:  12% (68/566)        
2025-02-27T19:41:23.8202111Z remote: Compressing objects:  13% (74/566)        
2025-02-27T19:41:23.8202729Z remote: Compressing objects:  14% (80/566)        
2025-02-27T19:41:23.8203330Z remote: Compressing objects:  15% (85/566)        
2025-02-27T19:41:23.8203930Z remote: Compressing objects:  16% (91/566)        
2025-02-27T19:41:23.8204525Z remote: Compressing objects:  17% (97/566)        
2025-02-27T19:41:23.8205121Z remote: Compressing objects:  18% (102/566)        
2025-02-27T19:41:23.8205733Z remote: Compressing objects:  19% (108/566)        
2025-02-27T19:41:23.8206559Z remote: Compressing objects:  20% (114/566)        
2025-02-27T19:41:23.8207174Z remote: Compressing objects:  21% (119/566)        
2025-02-27T19:41:23.8207781Z remote: Compressing objects:  22% (125/566)        
2025-02-27T19:41:23.8208376Z remote: Compressing objects:  23% (131/566)        
2025-02-27T19:41:23.8208979Z remote: Compressing objects:  24% (136/566)        
2025-02-27T19:41:23.8209582Z remote: Compressing objects:  25% (142/566)        
2025-02-27T19:41:23.8210187Z remote: Compressing objects:  26% (148/566)        
2025-02-27T19:41:23.8210781Z remote: Compressing objects:  27% (153/566)        
2025-02-27T19:41:23.8211373Z remote: Compressing objects:  28% (159/566)        
2025-02-27T19:41:23.8211967Z remote: Compressing objects:  29% (165/566)        
2025-02-27T19:41:23.8212564Z remote: Compressing objects:  30% (170/566)        
2025-02-27T19:41:23.8213171Z remote: Compressing objects:  31% (176/566)        
2025-02-27T19:41:23.8213970Z remote: Compressing objects:  32% (182/566)        
2025-02-27T19:41:23.8214577Z remote: Compressing objects:  33% (187/566)        
2025-02-27T19:41:23.8215172Z remote: Compressing objects:  34% (193/566)        
2025-02-27T19:41:23.8215771Z remote: Compressing objects:  35% (199/566)        
2025-02-27T19:41:23.8216501Z remote: Compressing objects:  36% (204/566)        
2025-02-27T19:41:23.8217388Z remote: Compressing objects:  37% (210/566)        
2025-02-27T19:41:23.8218152Z remote: Compressing objects:  38% (216/566)        
2025-02-27T19:41:23.8219112Z remote: Compressing objects:  39% (221/566)        
2025-02-27T19:41:23.8220085Z remote: Compressing objects:  40% (227/566)        
2025-02-27T19:41:23.8220783Z remote: Compressing objects:  41% (233/566)        
2025-02-27T19:41:23.8221765Z remote: Compressing objects:  42% (238/566)        
2025-02-27T19:41:23.8222466Z remote: Compressing objects:  43% (244/566)        
2025-02-27T19:41:23.8223067Z remote: Compressing objects:  44% (250/566)        
2025-02-27T19:41:23.8223679Z remote: Compressing objects:  45% (255/566)        
2025-02-27T19:41:23.8224280Z remote: Compressing objects:  46% (261/566)        
2025-02-27T19:41:23.8224880Z remote: Compressing objects:  47% (267/566)        
2025-02-27T19:41:23.8225478Z remote: Compressing objects:  48% (272/566)        
2025-02-27T19:41:23.8226207Z remote: Compressing objects:  49% (278/566)        
2025-02-27T19:41:23.8226803Z remote: Compressing objects:  50% (283/566)        
2025-02-27T19:41:23.8227401Z remote: Compressing objects:  51% (289/566)        
2025-02-27T19:41:23.8228167Z remote: Compressing objects:  52% (295/566)        
2025-02-27T19:41:23.8228850Z remote: Compressing objects:  53% (300/566)        
2025-02-27T19:41:23.8229474Z remote: Compressing objects:  54% (306/566)        
2025-02-27T19:41:23.8233893Z remote: Compressing objects:  55% (312/566)        
2025-02-27T19:41:23.8246211Z remote: Compressing objects:  56% (317/566)        
2025-02-27T19:41:23.8332369Z remote: Compressing objects:  57% (323/566)        
2025-02-27T19:41:23.8333693Z remote: Compressing objects:  58% (329/566)        
2025-02-27T19:41:23.8334707Z remote: Compressing objects:  59% (334/566)        
2025-02-27T19:41:23.8335485Z remote: Compressing objects:  60% (340/566)        
2025-02-27T19:41:23.8336489Z remote: Compressing objects:  61% (346/566)        
2025-02-27T19:41:23.8337124Z remote: Compressing objects:  62% (351/566)        
2025-02-27T19:41:23.8337744Z remote: Compressing objects:  63% (357/566)        
2025-02-27T19:41:23.8338379Z remote: Compressing objects:  64% (363/566)        
2025-02-27T19:41:23.8338999Z remote: Compressing objects:  65% (368/566)        
2025-02-27T19:41:23.8339603Z remote: Compressing objects:  66% (374/566)        
2025-02-27T19:41:23.8348935Z remote: Compressing objects:  67% (380/566)        
2025-02-27T19:41:23.8361600Z remote: Compressing objects:  68% (385/566)        
2025-02-27T19:41:23.8363782Z remote: Compressing objects:  69% (391/566)        
2025-02-27T19:41:23.8364668Z remote: Compressing objects:  70% (397/566)        
2025-02-27T19:41:23.8365275Z remote: Compressing objects:  71% (402/566)        
2025-02-27T19:41:23.8381277Z remote: Compressing objects:  72% (408/566)        
2025-02-27T19:41:23.8386913Z remote: Compressing objects:  73% (414/566)        
2025-02-27T19:41:23.8390681Z remote: Compressing objects:  74% (419/566)        
2025-02-27T19:41:23.8392435Z remote: Compressing objects:  75% (425/566)        
2025-02-27T19:41:23.8400174Z remote: Compressing objects:  76% (431/566)        
2025-02-27T19:41:23.8405654Z remote: Compressing objects:  77% (436/566)        
2025-02-27T19:41:23.8416291Z remote: Compressing objects:  78% (442/566)        
2025-02-27T19:41:23.8417543Z remote: Compressing objects:  79% (448/566)        
2025-02-27T19:41:23.8418932Z remote: Compressing objects:  80% (453/566)        
2025-02-27T19:41:23.8421285Z remote: Compressing objects:  81% (459/566)        
2025-02-27T19:41:23.8422455Z remote: Compressing objects:  82% (465/566)        
2025-02-27T19:41:23.8428888Z remote: Compressing objects:  83% (470/566)        
2025-02-27T19:41:23.8430065Z remote: Compressing objects:  84% (476/566)        
2025-02-27T19:41:23.8431098Z remote: Compressing objects:  85% (482/566)        
2025-02-27T19:41:23.8432048Z remote: Compressing objects:  86% (487/566)        
2025-02-27T19:41:23.8432963Z remote: Compressing objects:  87% (493/566)        
2025-02-27T19:41:23.8433989Z remote: Compressing objects:  88% (499/566)        
2025-02-27T19:41:23.8434934Z remote: Compressing objects:  89% (504/566)        
2025-02-27T19:41:23.8435587Z remote: Compressing objects:  90% (510/566)        
2025-02-27T19:41:23.8436772Z remote: Compressing objects:  91% (516/566)        
2025-02-27T19:41:23.8437800Z remote: Compressing objects:  92% (521/566)        
2025-02-27T19:41:23.8438631Z remote: Compressing objects:  93% (527/566)        
2025-02-27T19:41:23.8439236Z remote: Compressing objects:  94% (533/566)        
2025-02-27T19:41:23.8439854Z remote: Compressing objects:  95% (538/566)        
2025-02-27T19:41:23.8440449Z remote: Compressing objects:  96% (544/566)        
2025-02-27T19:41:23.8441055Z remote: Compressing objects:  97% (550/566)        
2025-02-27T19:41:23.8441644Z remote: Compressing objects:  98% (555/566)        
2025-02-27T19:41:23.8442241Z remote: Compressing objects:  99% (561/566)        
2025-02-27T19:41:23.8442854Z remote: Compressing objects: 100% (566/566)        
2025-02-27T19:41:23.8443486Z remote: Compressing objects: 100% (566/566), done.        
2025-02-27T19:41:23.8753245Z Receiving objects:   0% (1/591)
2025-02-27T19:41:23.8754178Z Receiving objects:   1% (6/591)
2025-02-27T19:41:23.8868642Z Receiving objects:   2% (12/591)
2025-02-27T19:41:23.8869770Z Receiving objects:   3% (18/591)
2025-02-27T19:41:23.8921086Z Receiving objects:   4% (24/591)
2025-02-27T19:41:23.8938614Z Receiving objects:   5% (30/591)
2025-02-27T19:41:23.8941433Z Receiving objects:   6% (36/591)
2025-02-27T19:41:23.8951904Z Receiving objects:   7% (42/591)
2025-02-27T19:41:23.8955078Z Receiving objects:   8% (48/591)
2025-02-27T19:41:23.8957189Z Receiving objects:   9% (54/591)
2025-02-27T19:41:23.8965339Z Receiving objects:  10% (60/591)
2025-02-27T19:41:23.8968323Z Receiving objects:  11% (66/591)
2025-02-27T19:41:23.8969635Z Receiving objects:  12% (71/591)
2025-02-27T19:41:23.9261015Z Receiving objects:  13% (77/591)
2025-02-27T19:41:23.9288974Z Receiving objects:  14% (83/591)
2025-02-27T19:41:23.9401053Z Receiving objects:  15% (89/591)
2025-02-27T19:41:23.9416694Z Receiving objects:  16% (95/591)
2025-02-27T19:41:23.9457465Z Receiving objects:  17% (101/591)
2025-02-27T19:41:23.9472649Z Receiving objects:  18% (107/591)
2025-02-27T19:41:23.9474245Z Receiving objects:  19% (113/591)
2025-02-27T19:41:23.9476572Z Receiving objects:  20% (119/591)
2025-02-27T19:41:23.9486670Z Receiving objects:  21% (125/591)
2025-02-27T19:41:23.9489331Z Receiving objects:  22% (131/591)
2025-02-27T19:41:23.9490809Z Receiving objects:  23% (136/591)
2025-02-27T19:41:23.9493570Z Receiving objects:  24% (142/591)
2025-02-27T19:41:23.9495552Z Receiving objects:  25% (148/591)
2025-02-27T19:41:23.9499794Z Receiving objects:  26% (154/591)
2025-02-27T19:41:23.9501663Z Receiving objects:  27% (160/591)
2025-02-27T19:41:23.9504162Z Receiving objects:  28% (166/591)
2025-02-27T19:41:23.9506121Z Receiving objects:  29% (172/591)
2025-02-27T19:41:23.9508207Z Receiving objects:  30% (178/591)
2025-02-27T19:41:23.9511744Z Receiving objects:  31% (184/591)
2025-02-27T19:41:23.9516441Z Receiving objects:  32% (190/591)
2025-02-27T19:41:23.9518483Z Receiving objects:  33% (196/591)
2025-02-27T19:41:23.9520168Z Receiving objects:  34% (201/591)
2025-02-27T19:41:23.9794239Z Receiving objects:  35% (207/591)
2025-02-27T19:41:23.9826683Z Receiving objects:  36% (213/591)
2025-02-27T19:41:23.9836509Z Receiving objects:  37% (219/591)
2025-02-27T19:41:24.0011259Z Receiving objects:  38% (225/591)
2025-02-27T19:41:24.0012341Z Receiving objects:  39% (231/591)
2025-02-27T19:41:24.0015710Z Receiving objects:  40% (237/591)
2025-02-27T19:41:24.0021402Z Receiving objects:  41% (243/591)
2025-02-27T19:41:24.0022742Z Receiving objects:  42% (249/591)
2025-02-27T19:41:24.0024859Z Receiving objects:  43% (255/591)
2025-02-27T19:41:24.0026077Z Receiving objects:  44% (261/591)
2025-02-27T19:41:24.0030565Z Receiving objects:  45% (266/591)
2025-02-27T19:41:24.0033564Z Receiving objects:  46% (272/591)
2025-02-27T19:41:24.0035213Z Receiving objects:  47% (278/591)
2025-02-27T19:41:24.0036808Z Receiving objects:  48% (284/591)
2025-02-27T19:41:24.0038296Z Receiving objects:  49% (290/591)
2025-02-27T19:41:24.0040306Z Receiving objects:  50% (296/591)
2025-02-27T19:41:24.0041225Z Receiving objects:  51% (302/591)
2025-02-27T19:41:24.0042221Z Receiving objects:  52% (308/591)
2025-02-27T19:41:24.0045401Z Receiving objects:  53% (314/591)
2025-02-27T19:41:24.0050871Z Receiving objects:  54% (320/591)
2025-02-27T19:41:24.0051797Z Receiving objects:  55% (326/591)
2025-02-27T19:41:24.0053781Z Receiving objects:  56% (331/591)
2025-02-27T19:41:24.0057202Z Receiving objects:  57% (337/591)
2025-02-27T19:41:24.0058982Z Receiving objects:  58% (343/591)
2025-02-27T19:41:24.0060332Z Receiving objects:  59% (349/591)
2025-02-27T19:41:24.0062491Z Receiving objects:  60% (355/591)
2025-02-27T19:41:24.0063990Z Receiving objects:  61% (361/591)
2025-02-27T19:41:24.0066553Z Receiving objects:  62% (367/591)
2025-02-27T19:41:24.0067455Z Receiving objects:  63% (373/591)
2025-02-27T19:41:24.0068814Z Receiving objects:  64% (379/591)
2025-02-27T19:41:24.0071277Z Receiving objects:  65% (385/591)
2025-02-27T19:41:24.0072310Z Receiving objects:  66% (391/591)
2025-02-27T19:41:24.0073451Z Receiving objects:  67% (396/591)
2025-02-27T19:41:24.0075464Z Receiving objects:  68% (402/591)
2025-02-27T19:41:24.0077194Z Receiving objects:  69% (408/591)
2025-02-27T19:41:24.0082855Z Receiving objects:  70% (414/591)
2025-02-27T19:41:24.0086048Z Receiving objects:  71% (420/591)
2025-02-27T19:41:24.0087365Z Receiving objects:  72% (426/591)
2025-02-27T19:41:24.0090489Z Receiving objects:  73% (432/591)
2025-02-27T19:41:24.0093550Z Receiving objects:  74% (438/591)
2025-02-27T19:41:24.0097023Z Receiving objects:  75% (444/591)
2025-02-27T19:41:24.0097884Z Receiving objects:  76% (450/591)
2025-02-27T19:41:24.0100216Z Receiving objects:  77% (456/591)
2025-02-27T19:41:24.0101577Z Receiving objects:  78% (461/591)
2025-02-27T19:41:24.0105594Z Receiving objects:  79% (467/591)
2025-02-27T19:41:24.0326799Z Receiving objects:  80% (473/591)
2025-02-27T19:41:24.0328197Z Receiving objects:  81% (479/591)
2025-02-27T19:41:24.0329417Z Receiving objects:  82% (485/591)
2025-02-27T19:41:24.0332154Z Receiving objects:  83% (491/591)
2025-02-27T19:41:24.0333332Z Receiving objects:  84% (497/591)
2025-02-27T19:41:24.0356801Z Receiving objects:  85% (503/591)
2025-02-27T19:41:24.0359835Z Receiving objects:  86% (509/591)
2025-02-27T19:41:24.0363437Z Receiving objects:  87% (515/591)
2025-02-27T19:41:24.0364406Z Receiving objects:  88% (521/591)
2025-02-27T19:41:24.0366148Z Receiving objects:  89% (526/591)
2025-02-27T19:41:24.0370726Z Receiving objects:  90% (532/591)
2025-02-27T19:41:24.0374003Z Receiving objects:  91% (538/591)
2025-02-27T19:41:24.0552991Z Receiving objects:  92% (544/591)
2025-02-27T19:41:24.0555556Z Receiving objects:  93% (550/591)
2025-02-27T19:41:24.0556625Z Receiving objects:  94% (556/591)
2025-02-27T19:41:24.0557419Z Receiving objects:  95% (562/591)
2025-02-27T19:41:24.0558157Z remote: Total 591 (delta 16), reused 435 (delta 14), pack-reused 0 (from 0)        
2025-02-27T19:41:24.0558946Z Receiving objects:  96% (568/591)
2025-02-27T19:41:24.0559460Z Receiving objects:  97% (574/591)
2025-02-27T19:41:24.0559981Z Receiving objects:  98% (580/591)
2025-02-27T19:41:24.0560685Z Receiving objects:  99% (586/591)
2025-02-27T19:41:24.0561577Z Receiving objects: 100% (591/591)
2025-02-27T19:41:24.0562635Z Receiving objects: 100% (591/591), 731.03 KiB | 4.06 MiB/s, done.
2025-02-27T19:41:24.0563714Z Resolving deltas:   0% (0/16)
2025-02-27T19:41:24.0564962Z Resolving deltas:   6% (1/16)
2025-02-27T19:41:24.0566695Z Resolving deltas:  12% (2/16)
2025-02-27T19:41:24.0567750Z Resolving deltas:  18% (3/16)
2025-02-27T19:41:24.0568794Z Resolving deltas:  25% (4/16)
2025-02-27T19:41:24.0570347Z Resolving deltas:  31% (5/16)
2025-02-27T19:41:24.0571340Z Resolving deltas:  37% (6/16)
2025-02-27T19:41:24.0572437Z Resolving deltas:  43% (7/16)
2025-02-27T19:41:24.0573567Z Resolving deltas:  50% (8/16)
2025-02-27T19:41:24.0574646Z Resolving deltas:  56% (9/16)
2025-02-27T19:41:24.0575709Z Resolving deltas:  62% (10/16)
2025-02-27T19:41:24.0577113Z Resolving deltas:  68% (11/16)
2025-02-27T19:41:24.0578850Z Resolving deltas:  75% (12/16)
2025-02-27T19:41:24.0579727Z Resolving deltas:  81% (13/16)
2025-02-27T19:41:24.0580905Z Resolving deltas:  87% (14/16)
2025-02-27T19:41:24.0582067Z Resolving deltas:  93% (15/16)
2025-02-27T19:41:24.0583205Z Resolving deltas: 100% (16/16)
2025-02-27T19:41:24.0584515Z Resolving deltas: 100% (16/16), done.
2025-02-27T19:41:24.0608915Z From https://github.com/aaron-hogan/idle-game
2025-02-27T19:41:24.0610794Z  * [new ref]         a3095fa873568973de1df0051a8861d8b5e686be -> origin/main
2025-02-27T19:41:24.0638975Z ##[endgroup]
2025-02-27T19:41:24.0640753Z ##[group]Determining the checkout info
2025-02-27T19:41:24.0642601Z ##[endgroup]
2025-02-27T19:41:24.0644094Z ##[group]Checking out the ref
2025-02-27T19:41:24.0646500Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2025-02-27T19:41:24.0974280Z Switched to a new branch 'main'
2025-02-27T19:41:24.0977519Z branch 'main' set up to track 'origin/main'.
2025-02-27T19:41:24.0985091Z ##[endgroup]
2025-02-27T19:41:24.1023114Z [command]/usr/bin/git log -1 --format='%H'
2025-02-27T19:41:24.1045989Z 'a3095fa873568973de1df0051a8861d8b5e686be'
2025-02-27T19:41:24.1342110Z ##[group]Run actions/setup-node@v3
2025-02-27T19:41:24.1343292Z with:
2025-02-27T19:41:24.1344111Z   node-version: 16
2025-02-27T19:41:24.1345022Z   always-auth: false
2025-02-27T19:41:24.1346129Z   check-latest: false
2025-02-27T19:41:24.1347362Z   token: ***
2025-02-27T19:41:24.1348195Z ##[endgroup]
2025-02-27T19:41:24.3212064Z Attempting to download 16...
2025-02-27T19:41:25.0422661Z Acquiring 16.20.2 - x64 from https://github.com/actions/node-versions/releases/download/16.20.2-5819740093/node-16.20.2-linux-x64.tar.gz
2025-02-27T19:41:25.8045109Z Extracting ...
2025-02-27T19:41:25.8153030Z [command]/usr/bin/tar xz --strip 1 --warning=no-unknown-keyword -C /home/runner/work/_temp/f549a6b6-a8d0-4f6e-968c-5d5876c15394 -f /home/runner/work/_temp/87b54b30-fc2b-43eb-836f-1c5e078632f1
2025-02-27T19:41:26.4730698Z Adding to the cache ...
2025-02-27T19:41:27.5118073Z ##[group]Environment details
2025-02-27T19:41:27.7818752Z node: v16.20.2
2025-02-27T19:41:27.7819156Z npm: 8.19.4
2025-02-27T19:41:27.7819606Z yarn: 1.22.22
2025-02-27T19:41:27.7820590Z ##[endgroup]
2025-02-27T19:41:27.7992625Z ##[group]Run npm ci
2025-02-27T19:41:27.7992943Z [36;1mnpm ci[0m
2025-02-27T19:41:27.8046235Z shell: /usr/bin/bash -e {0}
2025-02-27T19:41:27.8046542Z ##[endgroup]
2025-02-27T19:41:28.6181484Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6184443Z npm WARN EBADENGINE   package: '@eslint/config-array@0.19.2',
2025-02-27T19:41:28.6185447Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6186898Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6187560Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6189664Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6190411Z npm WARN EBADENGINE   package: '@eslint/core@0.12.0',
2025-02-27T19:41:28.6191409Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6192398Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6193067Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6193730Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6196318Z npm WARN EBADENGINE   package: '@eslint/eslintrc@3.3.0',
2025-02-27T19:41:28.6197716Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6198639Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6199234Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6199802Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6200542Z npm WARN EBADENGINE   package: 'globals@14.0.0',
2025-02-27T19:41:28.6201288Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6202067Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6202705Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6203302Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6203989Z npm WARN EBADENGINE   package: '@eslint/js@9.21.0',
2025-02-27T19:41:28.6204852Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6205780Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6206669Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6207254Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6208062Z npm WARN EBADENGINE   package: '@eslint/object-schema@2.1.6',
2025-02-27T19:41:28.6208986Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6209870Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6210483Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6211015Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6211753Z npm WARN EBADENGINE   package: '@eslint/plugin-kit@0.2.7',
2025-02-27T19:41:28.6212612Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6213456Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6214056Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6216189Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6216939Z npm WARN EBADENGINE   package: '@humanfs/core@0.19.1',
2025-02-27T19:41:28.6217737Z npm WARN EBADENGINE   required: { node: '>=18.18.0' },
2025-02-27T19:41:28.6218593Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6219225Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6219762Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6220486Z npm WARN EBADENGINE   package: '@humanfs/node@0.16.6',
2025-02-27T19:41:28.6221263Z npm WARN EBADENGINE   required: { node: '>=18.18.0' },
2025-02-27T19:41:28.6222084Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6222729Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6223274Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6224036Z npm WARN EBADENGINE   package: '@humanwhocodes/retry@0.3.1',
2025-02-27T19:41:28.6224832Z npm WARN EBADENGINE   required: { node: '>=18.18' },
2025-02-27T19:41:28.6226201Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6226958Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6227517Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6228270Z npm WARN EBADENGINE   package: '@humanwhocodes/retry@0.4.2',
2025-02-27T19:41:28.6229048Z npm WARN EBADENGINE   required: { node: '>=18.18' },
2025-02-27T19:41:28.6229846Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6230469Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6235716Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6236726Z npm WARN EBADENGINE   package: '@testing-library/dom@10.4.0',
2025-02-27T19:41:28.6237521Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6238364Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6239017Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6239585Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6240385Z npm WARN EBADENGINE   package: '@testing-library/react@16.2.0',
2025-02-27T19:41:28.6241150Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6241992Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6242972Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6243748Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6244599Z npm WARN EBADENGINE   package: '@typescript-eslint/eslint-plugin@8.25.0',
2025-02-27T19:41:28.6245612Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6246727Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6247376Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6247912Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6248721Z npm WARN EBADENGINE   package: '@typescript-eslint/parser@8.25.0',
2025-02-27T19:41:28.6249643Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6250582Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6251213Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6251760Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6252580Z npm WARN EBADENGINE   package: '@typescript-eslint/scope-manager@8.25.0',
2025-02-27T19:41:28.6253573Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6254481Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6255144Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6255703Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6256739Z npm WARN EBADENGINE   package: '@typescript-eslint/type-utils@8.25.0',
2025-02-27T19:41:28.6257745Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6258692Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6259297Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6259829Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6260676Z npm WARN EBADENGINE   package: '@typescript-eslint/types@8.25.0',
2025-02-27T19:41:28.6261658Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6262610Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6263219Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6263747Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6264630Z npm WARN EBADENGINE   package: '@typescript-eslint/typescript-estree@8.25.0',
2025-02-27T19:41:28.6265613Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6266722Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6267370Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6267914Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6268646Z npm WARN EBADENGINE   package: '@typescript-eslint/utils@8.25.0',
2025-02-27T19:41:28.6269611Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6270799Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6271427Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6271969Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6272807Z npm WARN EBADENGINE   package: '@typescript-eslint/visitor-keys@8.25.0',
2025-02-27T19:41:28.6307646Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6308752Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6309414Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6309930Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6310742Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:41:28.6311684Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6312631Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6313302Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6313838Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6314568Z npm WARN EBADENGINE   package: '@webpack-cli/configtest@3.0.1',
2025-02-27T19:41:28.6315676Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:41:28.6316728Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6317340Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6317823Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6318534Z npm WARN EBADENGINE   package: '@webpack-cli/info@3.0.1',
2025-02-27T19:41:28.6319309Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:41:28.6320219Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6320862Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6321366Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6322100Z npm WARN EBADENGINE   package: '@webpack-cli/serve@3.0.1',
2025-02-27T19:41:28.6322894Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:41:28.6323685Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6324302Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6324827Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6325503Z npm WARN EBADENGINE   package: 'bundle-name@4.1.0',
2025-02-27T19:41:28.6326415Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6327211Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6327832Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6328336Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6328975Z npm WARN EBADENGINE   package: 'css-loader@7.1.2',
2025-02-27T19:41:28.6329669Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:41:28.6330488Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6331093Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6331590Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6332270Z npm WARN EBADENGINE   package: 'default-browser@5.2.1',
2025-02-27T19:41:28.6332904Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6333600Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6334179Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6334672Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6335380Z npm WARN EBADENGINE   package: 'default-browser-id@5.0.0',
2025-02-27T19:41:28.6336336Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6337157Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6337786Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6338274Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6338894Z npm WARN EBADENGINE   package: 'eslint@9.21.0',
2025-02-27T19:41:28.6339713Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6340589Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6341212Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6342047Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6342749Z npm WARN EBADENGINE   package: 'eslint-scope@8.2.0',
2025-02-27T19:41:28.6343590Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6344442Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6345038Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6345527Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6346484Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:41:28.6347363Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6348215Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6348825Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6349311Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6349924Z npm WARN EBADENGINE   package: 'espree@10.3.0',
2025-02-27T19:41:28.6350732Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6351604Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6352431Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6352904Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6353612Z npm WARN EBADENGINE   package: 'eslint-visitor-keys@4.2.0',
2025-02-27T19:41:28.6354522Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6355443Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6356251Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6370016Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6370701Z npm WARN EBADENGINE   package: 'open@10.1.0',
2025-02-27T19:41:28.6371420Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6372270Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6372907Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6379005Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6381244Z npm WARN EBADENGINE   package: 'react-router@7.2.0',
2025-02-27T19:41:28.6382047Z npm WARN EBADENGINE   required: { node: '>=20.0.0' },
2025-02-27T19:41:28.6382916Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6383553Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6384064Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6384818Z npm WARN EBADENGINE   package: 'react-router-dom@7.2.0',
2025-02-27T19:41:28.6385590Z npm WARN EBADENGINE   required: { node: '>=20.0.0' },
2025-02-27T19:41:28.6386603Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6387264Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6387847Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6388494Z npm WARN EBADENGINE   package: 'cookie@1.0.2',
2025-02-27T19:41:28.6389171Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6389995Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6390641Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6391178Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6391876Z npm WARN EBADENGINE   package: 'run-applescript@7.0.0',
2025-02-27T19:41:28.6392586Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6393384Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6394001Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6396501Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6397233Z npm WARN EBADENGINE   package: 'style-loader@4.0.0',
2025-02-27T19:41:28.6397957Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:41:28.6398761Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6399391Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6401699Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6403898Z npm WARN EBADENGINE   package: 'ts-api-utils@2.0.1',
2025-02-27T19:41:28.6404696Z npm WARN EBADENGINE   required: { node: '>=18.12' },
2025-02-27T19:41:28.6405800Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6406681Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6407214Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6407960Z npm WARN EBADENGINE   package: 'typescript-eslint@8.25.0',
2025-02-27T19:41:28.6408894Z npm WARN EBADENGINE   required: { node: '^18.18.0 || ^20.9.0 || >=21.1.0' },
2025-02-27T19:41:28.6409864Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6410510Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6411475Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6412153Z npm WARN EBADENGINE   package: 'webpack-cli@6.0.1',
2025-02-27T19:41:28.6412906Z npm WARN EBADENGINE   required: { node: '>=18.12.0' },
2025-02-27T19:41:28.6413744Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6414360Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6414874Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6415566Z npm WARN EBADENGINE   package: 'commander@12.1.0',
2025-02-27T19:41:28.6416531Z npm WARN EBADENGINE   required: { node: '>=18' },
2025-02-27T19:41:28.6417576Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6418193Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6418721Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6419514Z npm WARN EBADENGINE   package: 'webpack-dev-middleware@7.4.2',
2025-02-27T19:41:28.6420312Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:41:28.6421081Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6421687Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6422233Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6422991Z npm WARN EBADENGINE   package: 'webpack-dev-server@5.2.0',
2025-02-27T19:41:28.6423723Z npm WARN EBADENGINE   required: { node: '>= 18.12.0' },
2025-02-27T19:41:28.6424503Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6425110Z npm WARN EBADENGINE }
2025-02-27T19:41:28.6425637Z npm WARN EBADENGINE Unsupported engine {
2025-02-27T19:41:28.6426545Z npm WARN EBADENGINE   package: 'webpack-merge@6.0.1',
2025-02-27T19:41:28.6427283Z npm WARN EBADENGINE   required: { node: '>=18.0.0' },
2025-02-27T19:41:28.6428049Z npm WARN EBADENGINE   current: { node: 'v16.20.2', npm: '8.19.4' }
2025-02-27T19:41:28.6428606Z npm WARN EBADENGINE }
2025-02-27T19:41:31.8271045Z npm WARN deprecated react-testing-library@8.0.1: 🚨  react-testing-library has moved to @testing-library/react. Please uninstall react-testing-library and install @testing-library/react instead, or use an older version of react-testing-library. Learn more about this change here: https://github.com/testing-library/dom-testing-library/issues/260 Thanks! :)
2025-02-27T19:41:32.8070044Z npm WARN deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-02-27T19:41:32.9794874Z npm WARN deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-02-27T19:41:33.4567132Z npm WARN deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-02-27T19:41:33.8931198Z npm WARN deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-02-27T19:41:37.3355367Z 
2025-02-27T19:41:37.3356500Z added 900 packages, and audited 901 packages in 9s
2025-02-27T19:41:37.3357035Z 
2025-02-27T19:41:37.3357355Z 193 packages are looking for funding
2025-02-27T19:41:37.3357954Z   run `npm fund` for details
2025-02-27T19:41:37.3371455Z 
2025-02-27T19:41:37.3371795Z found 0 vulnerabilities
2025-02-27T19:41:37.3659552Z ##[group]Run npm test
2025-02-27T19:41:37.3659820Z [36;1mnpm test[0m
2025-02-27T19:41:37.3708307Z shell: /usr/bin/bash -e {0}
2025-02-27T19:41:37.3708560Z ##[endgroup]
2025-02-27T19:41:37.6303078Z 
2025-02-27T19:41:37.6303615Z > idle-game@0.5.0-4 test
2025-02-27T19:41:37.6303974Z > jest
2025-02-27T19:41:37.6304101Z 
2025-02-27T19:41:48.2498518Z FAIL src/managers/progression/ProgressionManager.test.ts (9.382 s)
2025-02-27T19:41:48.3246396Z   ● Console
2025-02-27T19:41:48.3246609Z 
2025-02-27T19:41:48.3252162Z     console.error
2025-02-27T19:41:48.3253091Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3254194Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3255527Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:41:48.3257120Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:51:22)
2025-02-27T19:41:48.3260751Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3261705Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3263287Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3264870Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3266194Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3267252Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3268614Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3270036Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3271470Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3272717Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3274378Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3276497Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3278036Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3279284Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3280578Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3281249Z 
2025-02-27T19:41:48.3281803Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3282506Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3283618Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3284583Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3285284Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3286195Z      [90m 119 |[39m     }
2025-02-27T19:41:48.3286644Z      [90m 120 |[39m   }[0m
2025-02-27T19:41:48.3286883Z 
2025-02-27T19:41:48.3287835Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:41:48.3288979Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:22)
2025-02-27T19:41:48.3289536Z 
2025-02-27T19:41:48.3289673Z     console.error
2025-02-27T19:41:48.3290439Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3292063Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3293983Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:41:48.3295751Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:77:22)
2025-02-27T19:41:48.3297514Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3298469Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3299470Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3300812Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3302283Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3303368Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3304710Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3306387Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3307887Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3309113Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3310758Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3312652Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3314141Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3315390Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3316822Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3317517Z 
2025-02-27T19:41:48.3318013Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3318721Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3319876Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3320917Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3321651Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3322233Z      [90m 119 |[39m     }
2025-02-27T19:41:48.3322659Z      [90m 120 |[39m   }[0m
2025-02-27T19:41:48.3322915Z 
2025-02-27T19:41:48.3323539Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:41:48.3324681Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:77:22)
2025-02-27T19:41:48.3325248Z 
2025-02-27T19:41:48.3325645Z     console.error
2025-02-27T19:41:48.3326649Z       Error checking requirements: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3328186Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3330003Z           at ProgressionManager.checkRequirements (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:100:12)
2025-02-27T19:41:48.3331666Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:83:22)
2025-02-27T19:41:48.3333134Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3334034Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3334981Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3336467Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3337557Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3338619Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3340154Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3341605Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3343017Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3344259Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3346068Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3347965Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3349414Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3350693Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3351934Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3352615Z 
2025-02-27T19:41:48.3353084Z     [0m [90m 115 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3353779Z      [90m 116 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3354899Z     [31m[1m>[22m[39m[90m 117 |[39m       console[33m.[39merror([32m'Error checking requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3356033Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3356751Z      [90m 118 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3357309Z      [90m 119 |[39m     }
2025-02-27T19:41:48.3357744Z      [90m 120 |[39m   }[0m
2025-02-27T19:41:48.3357978Z 
2025-02-27T19:41:48.3358616Z       at ProgressionManager.checkRequirements (src/managers/progression/ProgressionManager.ts:117:15)
2025-02-27T19:41:48.3359741Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:83:22)
2025-02-27T19:41:48.3360292Z 
2025-02-27T19:41:48.3360425Z     console.error
2025-02-27T19:41:48.3361258Z       Error completing milestone milestone1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3363043Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3364803Z           at ProgressionManager.completeMilestone (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:348:12)
2025-02-27T19:41:48.3366664Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:145:22)
2025-02-27T19:41:48.3368109Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3368993Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3369906Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3371197Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3372248Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3373295Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3374556Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3376162Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3377874Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3379123Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3380690Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3382585Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3384080Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3385305Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3386770Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3387475Z 
2025-02-27T19:41:48.3387974Z     [0m [90m 379 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3388675Z      [90m 380 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3389887Z     [31m[1m>[22m[39m[90m 381 |[39m       console[33m.[39merror([32m`Error completing milestone ${milestoneId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3390983Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3391734Z      [90m 382 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3392325Z      [90m 383 |[39m     }
2025-02-27T19:41:48.3392776Z      [90m 384 |[39m   }[0m
2025-02-27T19:41:48.3393035Z 
2025-02-27T19:41:48.3393685Z       at ProgressionManager.completeMilestone (src/managers/progression/ProgressionManager.ts:381:15)
2025-02-27T19:41:48.3394868Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:22)
2025-02-27T19:41:48.3395470Z 
2025-02-27T19:41:48.3395613Z     console.error
2025-02-27T19:41:48.3396648Z       Error completing milestone milestone1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3398228Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3400027Z           at ProgressionManager.completeMilestone (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:348:12)
2025-02-27T19:41:48.3401936Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:165:22)
2025-02-27T19:41:48.3403405Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3404353Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3405305Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3406818Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3407903Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3408946Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3410304Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3411736Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3413168Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3414391Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3416550Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3418458Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3419887Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3421280Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3422593Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3423216Z 
2025-02-27T19:41:48.3423727Z     [0m [90m 379 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3424481Z      [90m 380 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3425705Z     [31m[1m>[22m[39m[90m 381 |[39m       console[33m.[39merror([32m`Error completing milestone ${milestoneId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3427085Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3427906Z      [90m 382 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3428663Z      [90m 383 |[39m     }
2025-02-27T19:41:48.3429172Z      [90m 384 |[39m   }[0m
2025-02-27T19:41:48.3429413Z 
2025-02-27T19:41:48.3430089Z       at ProgressionManager.completeMilestone (src/managers/progression/ProgressionManager.ts:381:15)
2025-02-27T19:41:48.3431297Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:22)
2025-02-27T19:41:48.3431847Z 
2025-02-27T19:41:48.3431994Z     console.error
2025-02-27T19:41:48.3432928Z       Error unlocking achievement achievement1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3434648Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3436794Z           at ProgressionManager.unlockAchievement (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:518:12)
2025-02-27T19:41:48.3438563Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:186:22)
2025-02-27T19:41:48.3440352Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3441336Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3442327Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3443708Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3444869Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3446179Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3447566Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3449107Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3450598Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3451933Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3453648Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3456014Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3457616Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3458937Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3460281Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3461035Z 
2025-02-27T19:41:48.3461575Z     [0m [90m 534 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3462337Z      [90m 535 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3463683Z     [31m[1m>[22m[39m[90m 536 |[39m       console[33m.[39merror([32m`Error unlocking achievement ${achievementId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3464883Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3465660Z      [90m 537 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3466465Z      [90m 538 |[39m     }
2025-02-27T19:41:48.3466900Z      [90m 539 |[39m   }[0m
2025-02-27T19:41:48.3467153Z 
2025-02-27T19:41:48.3467804Z       at ProgressionManager.unlockAchievement (src/managers/progression/ProgressionManager.ts:536:15)
2025-02-27T19:41:48.3468972Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:22)
2025-02-27T19:41:48.3469560Z 
2025-02-27T19:41:48.3469719Z     console.error
2025-02-27T19:41:48.3470600Z       Error unlocking achievement achievement1: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3472255Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3474202Z           at ProgressionManager.unlockAchievement (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:518:12)
2025-02-27T19:41:48.3476094Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:206:22)
2025-02-27T19:41:48.3477620Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3478582Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3479864Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3481293Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3482390Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3483522Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3484802Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3486468Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3487975Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3489273Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3490976Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3492887Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3494749Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3496222Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3497538Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3498262Z 
2025-02-27T19:41:48.3498805Z     [0m [90m 534 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:48.3499586Z      [90m 535 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3500942Z     [31m[1m>[22m[39m[90m 536 |[39m       console[33m.[39merror([32m`Error unlocking achievement ${achievementId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3502051Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3502834Z      [90m 537 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3503485Z      [90m 538 |[39m     }
2025-02-27T19:41:48.3503918Z      [90m 539 |[39m   }[0m
2025-02-27T19:41:48.3504179Z 
2025-02-27T19:41:48.3504848Z       at ProgressionManager.unlockAchievement (src/managers/progression/ProgressionManager.ts:536:15)
2025-02-27T19:41:48.3506368Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:22)
2025-02-27T19:41:48.3506906Z 
2025-02-27T19:41:48.3507056Z     console.error
2025-02-27T19:41:48.3508055Z       Error checking if feature feature1 should be unlocked: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3509816Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3511719Z           at ProgressionManager.shouldFeatureBeUnlocked (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:682:12)
2025-02-27T19:41:48.3513470Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:290:22)
2025-02-27T19:41:48.3514696Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3515629Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3516847Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3518236Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3519738Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3520962Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3522320Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3523796Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3525173Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3526707Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3528447Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3530361Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3531932Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3533300Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3534940Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3535677Z 
2025-02-27T19:41:48.3536436Z     [0m [90m 693 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3537240Z      [90m 694 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3538778Z     [31m[1m>[22m[39m[90m 695 |[39m       console[33m.[39merror([32m`Error checking if feature ${featureId} should be unlocked:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3539981Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3540709Z      [90m 696 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3541266Z      [90m 697 |[39m     }
2025-02-27T19:41:48.3541702Z      [90m 698 |[39m   }[0m
2025-02-27T19:41:48.3541967Z 
2025-02-27T19:41:48.3542701Z       at ProgressionManager.shouldFeatureBeUnlocked (src/managers/progression/ProgressionManager.ts:695:15)
2025-02-27T19:41:48.3543961Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:22)
2025-02-27T19:41:48.3544540Z 
2025-02-27T19:41:48.3544694Z     console.error
2025-02-27T19:41:48.3545674Z       Error checking if feature feature1 should be unlocked: Error: ProgressionManager not properly initialized with Redux store
2025-02-27T19:41:48.3547614Z           at ProgressionManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:89:13)
2025-02-27T19:41:48.3549528Z           at ProgressionManager.shouldFeatureBeUnlocked (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:682:12)
2025-02-27T19:41:48.3551259Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.test.ts:306:22)
2025-02-27T19:41:48.3552708Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:48.3553611Z           at new Promise (<anonymous>)
2025-02-27T19:41:48.3554578Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:48.3556128Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:48.3557285Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:48.3558375Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:48.3559981Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:48.3561547Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3563014Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:48.3564294Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:48.3566132Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:48.3568110Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:48.3569660Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:48.3570946Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:48.3572234Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:48.3573267Z 
2025-02-27T19:41:48.3573786Z     [0m [90m 693 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3574542Z      [90m 694 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:48.3576155Z     [31m[1m>[22m[39m[90m 695 |[39m       console[33m.[39merror([32m`Error checking if feature ${featureId} should be unlocked:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:48.3577309Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:48.3578067Z      [90m 696 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3578816Z      [90m 697 |[39m     }
2025-02-27T19:41:48.3579251Z      [90m 698 |[39m   }[0m
2025-02-27T19:41:48.3579497Z 
2025-02-27T19:41:48.3580196Z       at ProgressionManager.shouldFeatureBeUnlocked (src/managers/progression/ProgressionManager.ts:695:15)
2025-02-27T19:41:48.3581406Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:306:22)
2025-02-27T19:41:48.3581965Z 
2025-02-27T19:41:48.3582685Z   ● ProgressionManager › checkRequirements › should return true when all requirements are met
2025-02-27T19:41:48.3583290Z 
2025-02-27T19:41:48.3583587Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3583961Z 
2025-02-27T19:41:48.3584088Z     Expected: true
2025-02-27T19:41:48.3584404Z     Received: false
2025-02-27T19:41:48.3584603Z 
2025-02-27T19:41:48.3584890Z     [0m [90m 49 |[39m       ][33m;[39m
2025-02-27T19:41:48.3585345Z      [90m 50 |[39m
2025-02-27T19:41:48.3586653Z     [31m[1m>[22m[39m[90m 51 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3587849Z      [90m    |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:41:48.3588836Z      [90m 52 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
2025-02-27T19:41:48.3589620Z      [90m 53 |[39m     })[33m;[39m
2025-02-27T19:41:48.3590136Z      [90m 54 |[39m[0m
2025-02-27T19:41:48.3590364Z 
2025-02-27T19:41:48.3590853Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:55)
2025-02-27T19:41:48.3591409Z 
2025-02-27T19:41:48.3592116Z   ● ProgressionManager › checkRequirements › should return false if any requirement is not met
2025-02-27T19:41:48.3592733Z 
2025-02-27T19:41:48.3593016Z     expect(jest.fn()).toHaveBeenCalledTimes(expected)
2025-02-27T19:41:48.3593384Z 
2025-02-27T19:41:48.3593573Z     Expected number of calls: 2
2025-02-27T19:41:48.3594016Z     Received number of calls: 0
2025-02-27T19:41:48.3594278Z 
2025-02-27T19:41:48.3594708Z     [0m [90m 76 |[39m
2025-02-27T19:41:48.3595757Z      [90m 77 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-02-27T19:41:48.3597309Z     [31m[1m>[22m[39m[90m 78 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
2025-02-27T19:41:48.3598321Z      [90m    |[39m                            [31m[1m^[22m[39m
2025-02-27T19:41:48.3598898Z      [90m 79 |[39m     })[33m;[39m
2025-02-27T19:41:48.3599332Z      [90m 80 |[39m
2025-02-27T19:41:48.3600179Z      [90m 81 |[39m     it([32m'should handle empty requirements array'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:41:48.3600725Z 
2025-02-27T19:41:48.3601200Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:78:28)
2025-02-27T19:41:48.3601722Z 
2025-02-27T19:41:48.3602413Z   ● ProgressionManager › evaluateRequirement › should correctly evaluate gameStage requirement
2025-02-27T19:41:48.3603040Z 
2025-02-27T19:41:48.3603320Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3603690Z 
2025-02-27T19:41:48.3603828Z     Expected: true
2025-02-27T19:41:48.3604147Z     Received: false
2025-02-27T19:41:48.3604342Z 
2025-02-27T19:41:48.3604553Z     [0m [90m 116 |[39m
2025-02-27T19:41:48.3605187Z      [90m 117 |[39m       [90m// Use the private method for testing[39m
2025-02-27T19:41:48.3607066Z     [31m[1m>[22m[39m[90m 118 |[39m       expect((manager [36mas[39m any)[33m.[39mevaluateRequirement(requirement))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3608431Z      [90m     |[39m                                                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3609066Z      [90m 119 |[39m     })[33m;[39m
2025-02-27T19:41:48.3609555Z      [90m 120 |[39m
2025-02-27T19:41:48.3610499Z      [90m 121 |[39m     it([32m'should handle unknown requirement types'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:41:48.3611127Z 
2025-02-27T19:41:48.3611646Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:118:65)
2025-02-27T19:41:48.3612234Z 
2025-02-27T19:41:48.3612995Z   ● ProgressionManager › completeMilestone › should complete a milestone when requirements are met
2025-02-27T19:41:48.3613659Z 
2025-02-27T19:41:48.3613967Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3614395Z 
2025-02-27T19:41:48.3614543Z     Expected: true
2025-02-27T19:41:48.3614899Z     Received: false
2025-02-27T19:41:48.3615113Z 
2025-02-27T19:41:48.3615375Z     [0m [90m 143 |[39m
2025-02-27T19:41:48.3616342Z      [90m 144 |[39m       [90m// Complete the milestone[39m
2025-02-27T19:41:48.3617718Z     [31m[1m>[22m[39m[90m 145 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3618950Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:41:48.3619893Z      [90m 146 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:41:48.3620850Z      [90m 147 |[39m         id[33m:[39m [32m'milestone1'[39m[33m,[39m
2025-02-27T19:41:48.3621676Z      [90m 148 |[39m         completedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:41:48.3622062Z 
2025-02-27T19:41:48.3622588Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:55)
2025-02-27T19:41:48.3623154Z 
2025-02-27T19:41:48.3623945Z   ● ProgressionManager › completeMilestone › should not complete a milestone that is already completed
2025-02-27T19:41:48.3624632Z 
2025-02-27T19:41:48.3624914Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3625298Z 
2025-02-27T19:41:48.3625441Z     Expected: true
2025-02-27T19:41:48.3625784Z     Received: false
2025-02-27T19:41:48.3626204Z 
2025-02-27T19:41:48.3627023Z     [0m [90m 163 |[39m       [90m// Attempt to complete the milestone[39m
2025-02-27T19:41:48.3628210Z      [90m 164 |[39m       [90m// The implementation now returns true regardless of completion status[39m
2025-02-27T19:41:48.3629790Z     [31m[1m>[22m[39m[90m 165 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3631007Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:41:48.3632184Z      [90m 166 |[39m       [90m// The implementation now calls completeMilestone even for already completed milestones[39m
2025-02-27T19:41:48.3633456Z      [90m 167 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:41:48.3634272Z      [90m 168 |[39m     })[33m;[39m[0m
2025-02-27T19:41:48.3634586Z 
2025-02-27T19:41:48.3635092Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:55)
2025-02-27T19:41:48.3635681Z 
2025-02-27T19:41:48.3636686Z   ● ProgressionManager › unlockAchievement › should unlock an achievement when requirements are met
2025-02-27T19:41:48.3637390Z 
2025-02-27T19:41:48.3637700Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3638087Z 
2025-02-27T19:41:48.3638238Z     Expected: true
2025-02-27T19:41:48.3638571Z     Received: false
2025-02-27T19:41:48.3638778Z 
2025-02-27T19:41:48.3639340Z     [0m [90m 184 |[39m
2025-02-27T19:41:48.3639996Z      [90m 185 |[39m       [90m// Unlock the achievement[39m
2025-02-27T19:41:48.3641405Z     [31m[1m>[22m[39m[90m 186 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3642617Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:41:48.3643437Z      [90m 187 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:41:48.3644428Z      [90m 188 |[39m         id[33m:[39m [32m'achievement1'[39m[33m,[39m
2025-02-27T19:41:48.3645270Z      [90m 189 |[39m         unlockedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:41:48.3645644Z 
2025-02-27T19:41:48.3646368Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:57)
2025-02-27T19:41:48.3646916Z 
2025-02-27T19:41:48.3647672Z   ● ProgressionManager › unlockAchievement › should not unlock an achievement that is already unlocked
2025-02-27T19:41:48.3648340Z 
2025-02-27T19:41:48.3648624Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3648997Z 
2025-02-27T19:41:48.3649130Z     Expected: true
2025-02-27T19:41:48.3649451Z     Received: false
2025-02-27T19:41:48.3649645Z 
2025-02-27T19:41:48.3650095Z     [0m [90m 204 |[39m       [90m// Attempt to unlock the achievement[39m
2025-02-27T19:41:48.3651090Z      [90m 205 |[39m       [90m// The implementation now returns true regardless of unlock status[39m
2025-02-27T19:41:48.3652601Z     [31m[1m>[22m[39m[90m 206 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3653885Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:41:48.3655112Z      [90m 207 |[39m       [90m// The implementation now calls unlockAchievement even for already unlocked achievements[39m
2025-02-27T19:41:48.3656599Z      [90m 208 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:41:48.3657470Z      [90m 209 |[39m     })[33m;[39m[0m
2025-02-27T19:41:48.3657777Z 
2025-02-27T19:41:48.3658273Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:57)
2025-02-27T19:41:48.3658846Z 
2025-02-27T19:41:48.3659745Z   ● ProgressionManager › shouldFeatureBeUnlocked › should return true if a completed milestone unlocks the feature
2025-02-27T19:41:48.3660471Z 
2025-02-27T19:41:48.3661048Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:48.3661462Z 
2025-02-27T19:41:48.3661604Z     Expected: true
2025-02-27T19:41:48.3661933Z     Received: false
2025-02-27T19:41:48.3662140Z 
2025-02-27T19:41:48.3662412Z     [0m [90m 288 |[39m       
2025-02-27T19:41:48.3663093Z      [90m 289 |[39m       [90m// Check if feature should be unlocked[39m
2025-02-27T19:41:48.3664407Z     [31m[1m>[22m[39m[90m 290 |[39m       expect(manager[33m.[39mshouldFeatureBeUnlocked([32m'feature1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:48.3665702Z      [90m     |[39m                                                           [31m[1m^[22m[39m
2025-02-27T19:41:48.3666548Z      [90m 291 |[39m     })[33m;[39m
2025-02-27T19:41:48.3667001Z      [90m 292 |[39m
2025-02-27T19:41:48.3668082Z      [90m 293 |[39m     it([32m'should return false if no completed milestone unlocks the feature'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:41:48.3668755Z 
2025-02-27T19:41:48.3669276Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:59)
2025-02-27T19:41:48.3669863Z 
2025-02-27T19:41:48.3670424Z FAIL src/systems/resourceManager.test.ts (9.329 s)
2025-02-27T19:41:48.3671620Z   ● ResourceManager › initializeResources › dispatches addResource action for each initial resource
2025-02-27T19:41:48.3672289Z 
2025-02-27T19:41:48.3672576Z     TypeError: this.actions.addResource is not a function
2025-02-27T19:41:48.3673366Z 
2025-02-27T19:41:48.3674268Z     [0m [90m 153 |[39m     [33mObject[39m[33m.[39mvalues([33mINITIAL_RESOURCES[39m)[33m.[39mforEach(resource [33m=>[39m {
2025-02-27T19:41:48.3676639Z      [90m 154 |[39m       [36mif[39m (validateObject(resource[33m,[39m [[32m'id'[39m[33m,[39m [32m'name'[39m[33m,[39m [32m'amount'[39m[33m,[39m [32m'perSecond'[39m[33m,[39m [32m'unlocked'[39m][33m,[39m [32m'initializeResources'[39m)) {
2025-02-27T19:41:48.3678803Z     [31m[1m>[22m[39m[90m 155 |[39m         [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddResource(resource))[33m;[39m
2025-02-27T19:41:48.3679950Z      [90m     |[39m                                    [31m[1m^[22m[39m
2025-02-27T19:41:48.3680529Z      [90m 156 |[39m       }
2025-02-27T19:41:48.3681082Z      [90m 157 |[39m     })[33m;[39m
2025-02-27T19:41:48.3681571Z      [90m 158 |[39m   }[0m
2025-02-27T19:41:48.3681841Z 
2025-02-27T19:41:48.3682091Z       at src/systems/resourceManager.ts:155:36
2025-02-27T19:41:48.3682651Z           at Array.forEach (<anonymous>)
2025-02-27T19:41:48.3683453Z       at ResourceManager.initializeResources (src/systems/resourceManager.ts:153:38)
2025-02-27T19:41:48.3684396Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:54:23)
2025-02-27T19:41:48.3684867Z 
2025-02-27T19:41:48.3685705Z   ● ResourceManager › updateResources › updates resource amounts based on perSecond rates and elapsed time
2025-02-27T19:41:48.3686651Z 
2025-02-27T19:41:48.3687065Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:41:48.3687534Z 
2025-02-27T19:41:48.3687838Z     [0m [90m 178 |[39m     
2025-02-27T19:41:48.3688837Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:41:48.3691224Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:41:48.3693013Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:41:48.3693633Z      [90m 181 |[39m     
2025-02-27T19:41:48.3694189Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:41:48.3695060Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:41:48.3695537Z 
2025-02-27T19:41:48.3696446Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:41:48.3697388Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:105:23)
2025-02-27T19:41:48.3697864Z 
2025-02-27T19:41:48.3698830Z   ● ResourceManager › calculateResourceGeneration › calculates and updates resource generation rates based on structures
2025-02-27T19:41:48.3699645Z 
2025-02-27T19:41:48.3699981Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:41:48.3700604Z         at Function.values (<anonymous>)
2025-02-27T19:41:48.3700934Z 
2025-02-27T19:41:48.3701228Z     [0m [90m 251 |[39m     
2025-02-27T19:41:48.3701902Z      [90m 252 |[39m     [90m// Add production from all structures[39m
2025-02-27T19:41:48.3703287Z     [31m[1m>[22m[39m[90m 253 |[39m     [33mObject[39m[33m.[39mvalues(structures)[33m.[39mforEach((structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:41:48.3704337Z      [90m     |[39m            [31m[1m^[22m[39m
2025-02-27T19:41:48.3705296Z      [90m 254 |[39m       [90m// Skip structures that aren't built or don't have workers assigned[39m
2025-02-27T19:41:48.3706931Z      [90m 255 |[39m       [36mif[39m ([33m![39mstructure [33m||[39m [36mtypeof[39m structure [33m!==[39m [32m'object'[39m [33m||[39m
2025-02-27T19:41:48.3708554Z      [90m 256 |[39m           [33m![39m([32m'unlocked'[39m [36min[39m structure) [33m||[39m [33m![39m([32m'level'[39m [36min[39m structure) [33m||[39m[0m
2025-02-27T19:41:48.3709566Z 
2025-02-27T19:41:48.3710167Z       at ResourceManager.calculateResourceGeneration (src/systems/resourceManager.ts:253:12)
2025-02-27T19:41:48.3711211Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:197:23)
2025-02-27T19:41:48.3711683Z 
2025-02-27T19:41:48.3712403Z   ● ResourceManager › canAfford › returns true when all resources are available and sufficient
2025-02-27T19:41:48.3713023Z 
2025-02-27T19:41:48.3713495Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:41:48.3714034Z 
2025-02-27T19:41:48.3714957Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:41:48.3716575Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:41:48.3717897Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:41:48.3718919Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3720347Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:41:48.3721702Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3722361Z      [90m 346 |[39m       }[0m
2025-02-27T19:41:48.3722667Z 
2025-02-27T19:41:48.3723111Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:41:48.3723964Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:256:38)
2025-02-27T19:41:48.3724417Z 
2025-02-27T19:41:48.3725060Z   ● ResourceManager › canAfford › returns false when any resource is insufficient
2025-02-27T19:41:48.3725601Z 
2025-02-27T19:41:48.3726273Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:41:48.3726800Z 
2025-02-27T19:41:48.3727714Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:41:48.3729059Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:41:48.3730322Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:41:48.3731576Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3733009Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:41:48.3734231Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3734830Z      [90m 346 |[39m       }[0m
2025-02-27T19:41:48.3735117Z 
2025-02-27T19:41:48.3735546Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:41:48.3736632Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:297:38)
2025-02-27T19:41:48.3737093Z 
2025-02-27T19:41:48.3737723Z   ● ResourceManager › canAfford › returns false when any resource is not unlocked
2025-02-27T19:41:48.3738274Z 
2025-02-27T19:41:48.3738739Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:41:48.3739248Z 
2025-02-27T19:41:48.3740197Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:41:48.3741635Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:41:48.3742902Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:41:48.3744123Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3746056Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:41:48.3747488Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3748259Z      [90m 346 |[39m       }[0m
2025-02-27T19:41:48.3748871Z 
2025-02-27T19:41:48.3749390Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:41:48.3750487Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:338:38)
2025-02-27T19:41:48.3751029Z 
2025-02-27T19:41:48.3751840Z   ● ResourceManager › canAfford › returns false when any resource is missing
2025-02-27T19:41:48.3752473Z 
2025-02-27T19:41:48.3753051Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:41:48.3753678Z 
2025-02-27T19:41:48.3754808Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:41:48.3756844Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:41:48.3758329Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:41:48.3853844Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3855719Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:41:48.3857273Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3857903Z      [90m 346 |[39m       }[0m
2025-02-27T19:41:48.3858184Z 
2025-02-27T19:41:48.3858613Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:41:48.3859509Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:369:38)
2025-02-27T19:41:48.3859979Z 
2025-02-27T19:41:48.3860760Z   ● ResourceManager › applyResourceCost › dispatches addResourceAmount with negative values for each cost
2025-02-27T19:41:48.3861464Z 
2025-02-27T19:41:48.3861924Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:41:48.3862459Z 
2025-02-27T19:41:48.3863770Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:41:48.3865095Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:41:48.3866789Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:41:48.3867654Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:41:48.3869032Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:41:48.3870250Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:48.3870862Z      [90m 346 |[39m       }[0m
2025-02-27T19:41:48.3871140Z 
2025-02-27T19:41:48.3871561Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:41:48.3872513Z       at ResourceManager.applyResourceCost (src/systems/resourceManager.ts:363:15)
2025-02-27T19:41:48.3873447Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:415:38)
2025-02-27T19:41:48.3873899Z 
2025-02-27T19:41:48.3874507Z   ● ResourceManager › unlockResource › unlocks a locked resource and returns true
2025-02-27T19:41:48.3875050Z 
2025-02-27T19:41:48.3875483Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:41:48.3876497Z 
2025-02-27T19:41:48.3877142Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:41:48.3878299Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3879562Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:41:48.3880611Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:41:48.3881173Z      [90m 386 |[39m     
2025-02-27T19:41:48.3882050Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:41:48.3883127Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:41:48.3883668Z 
2025-02-27T19:41:48.3884123Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:41:48.3885005Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:462:38)
2025-02-27T19:41:48.3885473Z 
2025-02-27T19:41:48.3886442Z   ● ResourceManager › unlockResource › returns false for already unlocked resources
2025-02-27T19:41:48.3887003Z 
2025-02-27T19:41:48.3887431Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:41:48.3887923Z 
2025-02-27T19:41:48.3888498Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:41:48.3889620Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3890913Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:41:48.3891908Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:41:48.3892423Z      [90m 386 |[39m     
2025-02-27T19:41:48.3893262Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:41:48.3894415Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:41:48.3894942Z 
2025-02-27T19:41:48.3895421Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:41:48.3896564Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:499:38)
2025-02-27T19:41:48.3897021Z 
2025-02-27T19:41:48.3897667Z   ● ResourceManager › unlockResource › returns false for non-existent resources
2025-02-27T19:41:48.3898208Z 
2025-02-27T19:41:48.3898888Z     TypeError: Cannot read properties of undefined (reading 'non-existent')
2025-02-27T19:41:48.3899408Z 
2025-02-27T19:41:48.3899979Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:41:48.3901157Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3902505Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:41:48.3903584Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:41:48.3916329Z      [90m 386 |[39m     
2025-02-27T19:41:48.3917296Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:41:48.3918445Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:41:48.3918988Z 
2025-02-27T19:41:48.3919470Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:41:48.3920365Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:527:38)
2025-02-27T19:41:48.3920878Z 
2025-02-27T19:41:48.3921729Z   ● ResourceManager › addResourceAmount and setResourceAmount › addResourceAmount adds to existing resource
2025-02-27T19:41:48.3922795Z 
2025-02-27T19:41:48.3923240Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:41:48.3923779Z 
2025-02-27T19:41:48.3924649Z     [0m [90m 407 |[39m   addResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:41:48.3926184Z      [90m 408 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3927513Z     [31m[1m>[22m[39m[90m 409 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:41:48.3928593Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:41:48.3929166Z      [90m 410 |[39m     
2025-02-27T19:41:48.3929868Z      [90m 411 |[39m     [90m// Can't add to a resource that doesn't exist[39m
2025-02-27T19:41:48.3930671Z      [90m 412 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:41:48.3931048Z 
2025-02-27T19:41:48.3931530Z       at ResourceManager.addResourceAmount (src/systems/resourceManager.ts:409:37)
2025-02-27T19:41:48.3932459Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:560:38)
2025-02-27T19:41:48.3932939Z 
2025-02-27T19:41:48.3933861Z   ● ResourceManager › addResourceAmount and setResourceAmount › setResourceAmount sets absolute value for resource
2025-02-27T19:41:48.3934606Z 
2025-02-27T19:41:48.3935050Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:41:48.3935579Z 
2025-02-27T19:41:48.3936712Z     [0m [90m 431 |[39m   setResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:41:48.3937994Z      [90m 432 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3939333Z     [31m[1m>[22m[39m[90m 433 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:41:48.3940375Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:41:48.3940964Z      [90m 434 |[39m     
2025-02-27T19:41:48.3941684Z      [90m 435 |[39m     [90m// Can't set a resource that doesn't exist[39m
2025-02-27T19:41:48.3942491Z      [90m 436 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:41:48.3942892Z 
2025-02-27T19:41:48.3943381Z       at ResourceManager.setResourceAmount (src/systems/resourceManager.ts:433:37)
2025-02-27T19:41:48.3944334Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:598:38)
2025-02-27T19:41:48.3944814Z 
2025-02-27T19:41:48.3945561Z FAIL src/systems/__tests__/workerManager.test.ts (9.394 s)
2025-02-27T19:41:48.3947114Z   ● WorkerManager › Worker counting › should get total available workers based on game stage
2025-02-27T19:41:48.3947703Z 
2025-02-27T19:41:48.3948095Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:41:48.3948560Z 
2025-02-27T19:41:48.3949173Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:41:48.3950110Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:41:48.3951443Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:41:48.3952500Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:41:48.3953068Z      [90m 145 |[39m   }
2025-02-27T19:41:48.3953508Z      [90m 146 |[39m   
2025-02-27T19:41:48.3954019Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:41:48.3954326Z 
2025-02-27T19:41:48.3954834Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:41:48.3955818Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:89:28)
2025-02-27T19:41:48.3956604Z 
2025-02-27T19:41:48.3957169Z   ● WorkerManager › Worker counting › should get total assigned workers
2025-02-27T19:41:48.3957921Z 
2025-02-27T19:41:48.3958233Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:41:48.3958829Z         at Function.values (<anonymous>)
2025-02-27T19:41:48.3959118Z 
2025-02-27T19:41:48.3959876Z     [0m [90m 153 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.3960652Z      [90m 154 |[39m     
2025-02-27T19:41:48.3961673Z     [31m[1m>[22m[39m[90m 155 |[39m     [36mreturn[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mreduce(
2025-02-27T19:41:48.3962713Z      [90m     |[39m                   [31m[1m^[22m[39m
2025-02-27T19:41:48.3963708Z      [90m 156 |[39m       (total[33m:[39m number[33m,[39m structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:41:48.3965440Z      [90m 157 |[39m         [36mif[39m (structure [33m&&[39m [36mtypeof[39m structure [33m===[39m [32m'object'[39m [33m&&[39m [32m'workers'[39m [36min[39m structure [33m&&[39m 
2025-02-27T19:41:48.3967244Z      [90m 158 |[39m             [36mtypeof[39m structure[33m.[39mworkers [33m===[39m [32m'number'[39m) {[0m
2025-02-27T19:41:48.3967838Z 
2025-02-27T19:41:48.3968391Z       at WorkerManager.getTotalAssignedWorkers (src/systems/workerManager.ts:155:19)
2025-02-27T19:41:48.3969403Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:102:28)
2025-02-27T19:41:48.3969902Z 
2025-02-27T19:41:48.3970478Z   ● WorkerManager › Worker counting › should get remaining workers correctly
2025-02-27T19:41:48.3970996Z 
2025-02-27T19:41:48.3971422Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:41:48.3971888Z 
2025-02-27T19:41:48.3972510Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:41:48.3973481Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:41:48.3974828Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:41:48.3976167Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:41:48.3976739Z      [90m 145 |[39m   }
2025-02-27T19:41:48.3977145Z      [90m 146 |[39m   
2025-02-27T19:41:48.3977633Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:41:48.3977933Z 
2025-02-27T19:41:48.3978406Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:41:48.3979725Z       at WorkerManager.getRemainingWorkers (src/systems/workerManager.ts:172:17)
2025-02-27T19:41:48.3980740Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:118:28)
2025-02-27T19:41:48.3981216Z 
2025-02-27T19:41:48.3981801Z   ● WorkerManager › Worker assignment › should assign workers to buildings
2025-02-27T19:41:48.3982306Z 
2025-02-27T19:41:48.3982735Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.3983264Z 
2025-02-27T19:41:48.3983548Z     [0m [90m 190 |[39m     
2025-02-27T19:41:48.3984413Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3985698Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.3987133Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.3987725Z      [90m 193 |[39m     
2025-02-27T19:41:48.3988377Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.3989233Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.3989668Z 
2025-02-27T19:41:48.3990185Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:41:48.3991231Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:137:36)
2025-02-27T19:41:48.3992008Z 
2025-02-27T19:41:48.3992670Z   ● WorkerManager › Worker assignment › should limit assignment to available workers
2025-02-27T19:41:48.3993235Z 
2025-02-27T19:41:48.3993644Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.3994129Z 
2025-02-27T19:41:48.3994418Z     [0m [90m 190 |[39m     
2025-02-27T19:41:48.3995321Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.3996951Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.3998034Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.3998603Z      [90m 193 |[39m     
2025-02-27T19:41:48.3999172Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.3999974Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4000407Z 
2025-02-27T19:41:48.4000949Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:41:48.4001938Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:148:21)
2025-02-27T19:41:48.4002441Z 
2025-02-27T19:41:48.4003054Z   ● WorkerManager › Worker assignment › should limit assignment to maxWorkers
2025-02-27T19:41:48.4003584Z 
2025-02-27T19:41:48.4004005Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.4004523Z 
2025-02-27T19:41:48.4004837Z     [0m [90m 190 |[39m     
2025-02-27T19:41:48.4005743Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.4007299Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4008366Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4008952Z      [90m 193 |[39m     
2025-02-27T19:41:48.4009536Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.4010317Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4010723Z 
2025-02-27T19:41:48.4011232Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:41:48.4012233Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:159:21)
2025-02-27T19:41:48.4012731Z 
2025-02-27T19:41:48.4013518Z   ● WorkerManager › Worker assignment › should handle nonexistent building
2025-02-27T19:41:48.4014031Z 
2025-02-27T19:41:48.4014476Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:41:48.4014965Z 
2025-02-27T19:41:48.4015242Z     [0m [90m 190 |[39m     
2025-02-27T19:41:48.4016287Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.4017514Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4018579Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4019143Z      [90m 193 |[39m     
2025-02-27T19:41:48.4019778Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.4020601Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4021004Z 
2025-02-27T19:41:48.4021533Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:41:48.4022528Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:169:36)
2025-02-27T19:41:48.4023007Z 
2025-02-27T19:41:48.4023574Z   ● WorkerManager › Changing worker count › should add workers by delta
2025-02-27T19:41:48.4024060Z 
2025-02-27T19:41:48.4024429Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.4025214Z 
2025-02-27T19:41:48.4025508Z     [0m [90m 234 |[39m     
2025-02-27T19:41:48.4026706Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.4027949Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4029007Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4029556Z      [90m 237 |[39m     
2025-02-27T19:41:48.4030133Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.4030909Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4031301Z 
2025-02-27T19:41:48.4031748Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:41:48.4032679Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:189:21)
2025-02-27T19:41:48.4033172Z 
2025-02-27T19:41:48.4033708Z   ● WorkerManager › Changing worker count › should remove workers by delta
2025-02-27T19:41:48.4034182Z 
2025-02-27T19:41:48.4034564Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.4035069Z 
2025-02-27T19:41:48.4035353Z     [0m [90m 234 |[39m     
2025-02-27T19:41:48.4036430Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.4037740Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4038787Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4039347Z      [90m 237 |[39m     
2025-02-27T19:41:48.4039942Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.4040727Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4041116Z 
2025-02-27T19:41:48.4041558Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:41:48.4042411Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:210:21)
2025-02-27T19:41:48.4042905Z 
2025-02-27T19:41:48.4043544Z   ● WorkerManager › Changing worker count › should limit addition by available workers
2025-02-27T19:41:48.4044103Z 
2025-02-27T19:41:48.4044502Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.4044996Z 
2025-02-27T19:41:48.4045289Z     [0m [90m 234 |[39m     
2025-02-27T19:41:48.4046651Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:48.4048065Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4049088Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4049611Z      [90m 237 |[39m     
2025-02-27T19:41:48.4050245Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:48.4051024Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:48.4051434Z 
2025-02-27T19:41:48.4051903Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:41:48.4052907Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:231:21)
2025-02-27T19:41:48.4053421Z 
2025-02-27T19:41:48.4054079Z   ● WorkerManager › Worker efficiency › should calculate worker efficiency correctly
2025-02-27T19:41:48.4054636Z 
2025-02-27T19:41:48.4055064Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:48.4055495Z 
2025-02-27T19:41:48.4055771Z     [0m [90m 287 |[39m     
2025-02-27T19:41:48.4057072Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.4058352Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4059650Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4060214Z      [90m 290 |[39m     
2025-02-27T19:41:48.4061177Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:41:48.4062157Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:41:48.4062520Z 
2025-02-27T19:41:48.4063026Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:41:48.4064060Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:246:28)
2025-02-27T19:41:48.4064561Z 
2025-02-27T19:41:48.4065204Z   ● WorkerManager › Worker efficiency › should handle nonexistent building for efficiency
2025-02-27T19:41:48.4065778Z 
2025-02-27T19:41:48.4066385Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:41:48.4066967Z 
2025-02-27T19:41:48.4067265Z     [0m [90m 287 |[39m     
2025-02-27T19:41:48.4068192Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.4069550Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:48.4070538Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:48.4071081Z      [90m 290 |[39m     
2025-02-27T19:41:48.4072046Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:41:48.4073012Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:41:48.4073377Z 
2025-02-27T19:41:48.4073859Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:41:48.4074892Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:283:28)
2025-02-27T19:41:48.4075390Z 
2025-02-27T19:41:48.4076211Z   ● WorkerManager › Auto-assignment › should auto-assign with balanced strategy
2025-02-27T19:41:48.4076742Z 
2025-02-27T19:41:48.4077054Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:41:48.4077638Z         at Function.values (<anonymous>)
2025-02-27T19:41:48.4077951Z 
2025-02-27T19:41:48.4078224Z     [0m [90m 318 |[39m     
2025-02-27T19:41:48.4079417Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.4081478Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:41:48.4083061Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:41:48.4083961Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:41:48.4084986Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:41:48.4086144Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:41:48.4086557Z 
2025-02-27T19:41:48.4087019Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:41:48.4088004Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:290:21)
2025-02-27T19:41:48.4088500Z 
2025-02-27T19:41:48.4089137Z   ● WorkerManager › Auto-assignment › should auto-assign with focused strategy
2025-02-27T19:41:48.4089692Z 
2025-02-27T19:41:48.4089979Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:41:48.4090585Z         at Function.values (<anonymous>)
2025-02-27T19:41:48.4090901Z 
2025-02-27T19:41:48.4091198Z     [0m [90m 318 |[39m     
2025-02-27T19:41:48.4092434Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.4094454Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:41:48.4096171Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:41:48.4097086Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:41:48.4098141Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:41:48.4099063Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:41:48.4099448Z 
2025-02-27T19:41:48.4099924Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:41:48.4100888Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:310:21)
2025-02-27T19:41:48.4101385Z 
2025-02-27T19:41:48.4102008Z   ● WorkerManager › Auto-assignment › should auto-assign with efficiency strategy
2025-02-27T19:41:48.4102555Z 
2025-02-27T19:41:48.4102868Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:41:48.4103457Z         at Function.values (<anonymous>)
2025-02-27T19:41:48.4103762Z 
2025-02-27T19:41:48.4104047Z     [0m [90m 318 |[39m     
2025-02-27T19:41:48.4105023Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:41:48.4107218Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:41:48.4108767Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:41:48.4109660Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:41:48.4110611Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:41:48.4111535Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:41:48.4111935Z 
2025-02-27T19:41:48.4112382Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:41:48.4113353Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:331:21)
2025-02-27T19:41:48.4113870Z 
2025-02-27T19:41:49.8192194Z PASS src/state/tasksSlice.test.ts
2025-02-27T19:41:50.2406824Z FAIL src/systems/__tests__/buildingManager.test.ts
2025-02-27T19:41:50.2418374Z   ● BuildingManager › initialization › should initialize a building
2025-02-27T19:41:50.2418892Z 
2025-02-27T19:41:50.2419236Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:41:50.2419712Z 
2025-02-27T19:41:50.2420059Z     [0m [90m 139 |[39m     }
2025-02-27T19:41:50.2420513Z      [90m 140 |[39m     
2025-02-27T19:41:50.2421748Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:41:50.2422863Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:41:50.2423411Z      [90m 142 |[39m   }
2025-02-27T19:41:50.2423814Z      [90m 143 |[39m   
2025-02-27T19:41:50.2424308Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:41:50.2424627Z 
2025-02-27T19:41:50.2425165Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:41:50.2426390Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:73:23)
2025-02-27T19:41:50.2426897Z 
2025-02-27T19:41:50.2427513Z   ● BuildingManager › initialization › should initialize multiple buildings
2025-02-27T19:41:50.2428038Z 
2025-02-27T19:41:50.2428851Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:41:50.2429280Z 
2025-02-27T19:41:50.2429585Z     [0m [90m 139 |[39m     }
2025-02-27T19:41:50.2430103Z      [90m 140 |[39m     
2025-02-27T19:41:50.2431318Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:41:50.2432437Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:41:50.2432979Z      [90m 142 |[39m   }
2025-02-27T19:41:50.2433424Z      [90m 143 |[39m   
2025-02-27T19:41:50.2434005Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:41:50.2434282Z 
2025-02-27T19:41:50.2434789Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:41:50.2435595Z       at src/systems/buildingManager.ts:153:40
2025-02-27T19:41:50.2436448Z           at Array.forEach (<anonymous>)
2025-02-27T19:41:50.2437259Z       at BuildingManager.initializeBuildings (src/systems/buildingManager.ts:153:15)
2025-02-27T19:41:50.2438308Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:108:23)
2025-02-27T19:41:50.2438837Z 
2025-02-27T19:41:50.2439661Z   ● BuildingManager › purchase validation › should correctly validate if player can afford a building
2025-02-27T19:41:50.2440335Z 
2025-02-27T19:41:50.2440779Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:41:50.2441287Z 
2025-02-27T19:41:50.2441594Z     [0m [90m 165 |[39m     
2025-02-27T19:41:50.2442514Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:50.2443849Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:50.2444915Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:50.2445505Z      [90m 168 |[39m     
2025-02-27T19:41:50.2447619Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:41:50.2448808Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:41:50.2449336Z 
2025-02-27T19:41:50.2449843Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:41:50.2450817Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:160:39)
2025-02-27T19:41:50.2451316Z 
2025-02-27T19:41:50.2452321Z   ● BuildingManager › purchase validation › should return false for non-existent buildings
2025-02-27T19:41:50.2452974Z 
2025-02-27T19:41:50.2453416Z     TypeError: Cannot read properties of undefined (reading 'non_existent')
2025-02-27T19:41:50.2453923Z 
2025-02-27T19:41:50.2454177Z     [0m [90m 165 |[39m     
2025-02-27T19:41:50.2455001Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:50.2456507Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:50.2457530Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:50.2458120Z      [90m 168 |[39m     
2025-02-27T19:41:50.2458924Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:41:50.2460142Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:41:50.2460697Z 
2025-02-27T19:41:50.2461194Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:41:50.2462236Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:193:38)
2025-02-27T19:41:50.2462766Z 
2025-02-27T19:41:50.2463432Z   ● BuildingManager › purchase validation › should return false for locked buildings
2025-02-27T19:41:50.2464271Z 
2025-02-27T19:41:50.2464731Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:41:50.2465249Z 
2025-02-27T19:41:50.2465548Z     [0m [90m 165 |[39m     
2025-02-27T19:41:50.2466625Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:50.2467887Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:50.2468929Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:50.2469505Z      [90m 168 |[39m     
2025-02-27T19:41:50.2470321Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:41:50.2471505Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:41:50.2472071Z 
2025-02-27T19:41:50.2472593Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:41:50.2473591Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:226:38)
2025-02-27T19:41:50.2474081Z 
2025-02-27T19:41:50.2474678Z   ● BuildingManager › purchasing › should purchase a building and deduct resources
2025-02-27T19:41:50.2475208Z 
2025-02-27T19:41:50.2475612Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:41:50.2476297Z 
2025-02-27T19:41:50.2476536Z     [0m [90m 197 |[39m     
2025-02-27T19:41:50.2477376Z      [90m 198 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:50.2478590Z     [31m[1m>[22m[39m[90m 199 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:50.2479548Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:50.2480071Z      [90m 200 |[39m     
2025-02-27T19:41:50.2480612Z      [90m 201 |[39m     [90m// Deduct resources[39m
2025-02-27T19:41:50.2481898Z      [90m 202 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mdeductResources(building[33m.[39mcost))[33m;[39m[0m
2025-02-27T19:41:50.2482661Z 
2025-02-27T19:41:50.2483117Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:199:38)
2025-02-27T19:41:50.2484050Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:273:38)
2025-02-27T19:41:50.2484539Z 
2025-02-27T19:41:50.2485564Z   ● BuildingManager › production calculation › should correctly calculate production based on level and workers
2025-02-27T19:41:50.2486425Z 
2025-02-27T19:41:50.2486836Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:41:50.2487318Z 
2025-02-27T19:41:50.2487561Z     [0m [90m 222 |[39m     
2025-02-27T19:41:50.2488388Z      [90m 223 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:50.2489615Z     [31m[1m>[22m[39m[90m 224 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:50.2490619Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:50.2491146Z      [90m 225 |[39m     
2025-02-27T19:41:50.2491708Z      [90m 226 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:50.2492368Z      [90m 227 |[39m       [36mreturn[39m[33m;[39m[0m
2025-02-27T19:41:50.2492696Z 
2025-02-27T19:41:50.2493208Z       at BuildingManager.recalculateProduction (src/systems/buildingManager.ts:224:38)
2025-02-27T19:41:50.2494180Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:329:23)
2025-02-27T19:41:50.2494607Z 
2025-02-27T19:41:50.3583495Z FAIL src/systems/__tests__/saveManager.test.ts
2025-02-27T19:41:50.3671855Z   ● Console
2025-02-27T19:41:50.3680231Z 
2025-02-27T19:41:50.3680455Z     console.error
2025-02-27T19:41:50.3681659Z       [ERROR in SaveManager.loadGame]: this.actions.resetGame is not a function undefined
2025-02-27T19:41:50.3682172Z 
2025-02-27T19:41:50.3683271Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:41:50.3684747Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:41:50.3686595Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:41:50.3687694Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:50.3688501Z      [90m 138 |[39m     }
2025-02-27T19:41:50.3717185Z      [90m 139 |[39m     
2025-02-27T19:41:50.3718247Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:41:50.3718757Z 
2025-02-27T19:41:50.3719111Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:41:50.3722009Z       at SaveManager.loadGame (src/systems/saveManager.ts:205:19)
2025-02-27T19:41:50.3722915Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:177:34)
2025-02-27T19:41:50.3723425Z 
2025-02-27T19:41:50.3723580Z     console.error
2025-02-27T19:41:50.3724383Z       [ERROR in SaveManager.deleteSaveAndReset]: this.actions.resetGame is not a function undefined
2025-02-27T19:41:50.3725026Z 
2025-02-27T19:41:50.3726398Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:41:50.3728112Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:41:50.3729885Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:41:50.3731108Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:50.3731661Z      [90m 138 |[39m     }
2025-02-27T19:41:50.3732107Z      [90m 139 |[39m     
2025-02-27T19:41:50.3732843Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:41:50.3733300Z 
2025-02-27T19:41:50.3733637Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:41:50.3734870Z       at SaveManager.deleteSaveAndReset (src/systems/saveManager.ts:237:19)
2025-02-27T19:41:50.3736075Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:264:34)
2025-02-27T19:41:50.3736630Z 
2025-02-27T19:41:50.3737243Z   ● SaveManager › loadGame › should dispatch actions to restore game state
2025-02-27T19:41:50.3737766Z 
2025-02-27T19:41:50.3738085Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:50.3738506Z 
2025-02-27T19:41:50.3738664Z     Expected: true
2025-02-27T19:41:50.3739007Z     Received: false
2025-02-27T19:41:50.3739213Z 
2025-02-27T19:41:50.3739508Z     [0m [90m 178 |[39m       
2025-02-27T19:41:50.3740034Z      [90m 179 |[39m       [90m// Assert[39m
2025-02-27T19:41:50.3740965Z     [31m[1m>[22m[39m[90m 180 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:50.3741762Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:41:50.3742343Z      [90m 181 |[39m       
2025-02-27T19:41:50.3743084Z      [90m 182 |[39m       [90m// Verify reset actions were dispatched[39m
2025-02-27T19:41:50.3744315Z      [90m 183 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({[0m
2025-02-27T19:41:50.3745009Z 
2025-02-27T19:41:50.3745434Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:180:22)
2025-02-27T19:41:50.3746530Z 
2025-02-27T19:41:50.3747180Z   ● SaveManager › resetGame › should dispatch reset actions for all state slices
2025-02-27T19:41:50.3747703Z 
2025-02-27T19:41:50.3748008Z     TypeError: this.actions.resetGame is not a function
2025-02-27T19:41:50.3748400Z 
2025-02-27T19:41:50.3748941Z     [0m [90m 217 |[39m     [36mthis[39m[33m.[39mensureInitialized()[33m;[39m
2025-02-27T19:41:50.3749613Z      [90m 218 |[39m     
2025-02-27T19:41:50.3750742Z     [31m[1m>[22m[39m[90m 219 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetGame())[33m;[39m
2025-02-27T19:41:50.3751872Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:41:50.3753073Z      [90m 220 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetResources())[33m;[39m
2025-02-27T19:41:50.3754590Z      [90m 221 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetStructures())[33m;[39m
2025-02-27T19:41:50.3755499Z      [90m 222 |[39m   }[0m
2025-02-27T19:41:50.3755767Z 
2025-02-27T19:41:50.3756339Z       at SaveManager.resetGame (src/systems/saveManager.ts:219:32)
2025-02-27T19:41:50.3757215Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:243:19)
2025-02-27T19:41:50.3757725Z 
2025-02-27T19:41:50.3758304Z   ● SaveManager › deleteSaveAndReset › should delete the save and reset the game
2025-02-27T19:41:50.3758818Z 
2025-02-27T19:41:50.3759138Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:50.3759522Z 
2025-02-27T19:41:50.3759673Z     Expected: true
2025-02-27T19:41:50.3760029Z     Received: false
2025-02-27T19:41:50.3760243Z 
2025-02-27T19:41:50.3760532Z     [0m [90m 265 |[39m       
2025-02-27T19:41:50.3761096Z      [90m 266 |[39m       [90m// Assert[39m
2025-02-27T19:41:50.3762011Z     [31m[1m>[22m[39m[90m 267 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:50.3762893Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:41:50.3763945Z      [90m 268 |[39m       expect(saveUtils[33m.[39mdeleteSave)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:41:50.3765270Z      [90m 269 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({
2025-02-27T19:41:50.3766815Z      [90m 270 |[39m         type[33m:[39m expect[33m.[39mstringContaining([32m'game/resetGame'[39m)[0m
2025-02-27T19:41:50.3767386Z 
2025-02-27T19:41:50.3767808Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:267:22)
2025-02-27T19:41:50.3768318Z 
2025-02-27T19:41:51.5401399Z PASS src/core/GameLoop.test.ts
2025-02-27T19:41:51.5459339Z   ● Console
2025-02-27T19:41:51.5459547Z 
2025-02-27T19:41:51.5459677Z     console.log
2025-02-27T19:41:51.5460116Z       GameLoop: Registered handler, total: 1
2025-02-27T19:41:51.5460429Z 
2025-02-27T19:41:51.5460767Z       at GameLoop.registerHandler (src/core/GameLoop.ts:290:17)
2025-02-27T19:41:51.5461212Z 
2025-02-27T19:41:51.5461354Z     console.log
2025-02-27T19:41:51.5461735Z       GameLoop: Started with tick rate 1Hz
2025-02-27T19:41:51.5462058Z 
2025-02-27T19:41:51.5462321Z       at GameLoop.start (src/core/GameLoop.ts:119:15)
2025-02-27T19:41:51.5462672Z 
2025-02-27T19:41:51.5462812Z     console.log
2025-02-27T19:41:51.5463383Z       Warning not called, but this is acceptable in the mock environment
2025-02-27T19:41:51.5463825Z 
2025-02-27T19:41:51.5464159Z       at Object.<anonymous> (src/core/GameLoop.test.ts:309:15)
2025-02-27T19:41:51.5464530Z 
2025-02-27T19:41:51.5464668Z     console.log
2025-02-27T19:41:51.5465126Z       GameLoop: Stopped after 2 ticks and 1 frames
2025-02-27T19:41:51.5465472Z 
2025-02-27T19:41:51.5465711Z       at GameLoop.stop (src/core/GameLoop.ts:137:15)
2025-02-27T19:41:51.5466296Z 
2025-02-27T19:41:51.5466428Z     console.log
2025-02-27T19:41:51.5466868Z       GameLoop: Unregistered handler, remaining: 0
2025-02-27T19:41:51.5467211Z 
2025-02-27T19:41:51.5467962Z       at GameLoop.unregisterHandler (src/core/GameLoop.ts:307:17)
2025-02-27T19:41:51.5468385Z 
2025-02-27T19:41:51.5767450Z PASS src/utils/resourceUtils.test.ts
2025-02-27T19:41:51.7898445Z FAIL src/integration/tasks.integration.test.ts
2025-02-27T19:41:51.8397986Z   ● Console
2025-02-27T19:41:51.8398234Z 
2025-02-27T19:41:51.8398376Z     console.log
2025-02-27T19:41:51.8398842Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:51.8399201Z 
2025-02-27T19:41:51.8399664Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:51.8400223Z 
2025-02-27T19:41:51.8400405Z     console.error
2025-02-27T19:41:51.8401153Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8402431Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8403775Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:41:51.8405136Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:151:32)
2025-02-27T19:41:51.8406777Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8407721Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8408680Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8410012Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8411128Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8412161Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8413437Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8414887Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8416333Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8417931Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8420502Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8422042Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8423308Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8424601Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8425465Z 
2025-02-27T19:41:51.8429770Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8430693Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8432026Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8433171Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8434167Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8434983Z      [90m 315 |[39m     }
2025-02-27T19:41:51.8435561Z      [90m 316 |[39m   }[0m
2025-02-27T19:41:51.8436115Z 
2025-02-27T19:41:51.8436696Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:41:51.8437587Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:151:32)
2025-02-27T19:41:51.8438428Z 
2025-02-27T19:41:51.8438582Z     console.error
2025-02-27T19:41:51.8439328Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8440700Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8442060Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:41:51.8443434Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:168:32)
2025-02-27T19:41:51.8444861Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8445795Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8446940Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8448257Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8449582Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8450829Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8452335Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8454005Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8455480Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8457518Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8459647Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8461353Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8462822Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8464294Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8465425Z 
2025-02-27T19:41:51.8503937Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8504995Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8506406Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8507473Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8508372Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8509048Z      [90m 315 |[39m     }
2025-02-27T19:41:51.8509493Z      [90m 316 |[39m   }[0m
2025-02-27T19:41:51.8509738Z 
2025-02-27T19:41:51.8510095Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:41:51.8510955Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:168:32)
2025-02-27T19:41:51.8511450Z 
2025-02-27T19:41:51.8511587Z     console.error
2025-02-27T19:41:51.8512323Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8513562Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8514856Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:41:51.8516728Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:178:32)
2025-02-27T19:41:51.8557743Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8558692Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8559659Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8561005Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8562088Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8563161Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8564471Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8566128Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8567412Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8569128Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8571063Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8572556Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8573821Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8575134Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8576012Z 
2025-02-27T19:41:51.8576604Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8577327Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8578489Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8579479Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8580823Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8581533Z      [90m 315 |[39m     }
2025-02-27T19:41:51.8581991Z      [90m 316 |[39m   }[0m
2025-02-27T19:41:51.8582239Z 
2025-02-27T19:41:51.8582612Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:41:51.8583458Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:178:32)
2025-02-27T19:41:51.8583964Z 
2025-02-27T19:41:51.8584098Z     console.error
2025-02-27T19:41:51.8584888Z       Error unlocking task locked-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8586404Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8587764Z           at TaskManager.unlockTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:417:12)
2025-02-27T19:41:51.8589075Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:188:32)
2025-02-27T19:41:51.8590478Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8591381Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8592325Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8593903Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8594972Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8596196Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8597418Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8598831Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8600018Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8601646Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8603560Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8605058Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8606555Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8607815Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8608458Z 
2025-02-27T19:41:51.8608966Z     [0m [90m 439 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8609694Z      [90m 440 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8610849Z     [31m[1m>[22m[39m[90m 441 |[39m       console[33m.[39merror([32m`Error unlocking task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8611908Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8612759Z      [90m 442 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8613438Z      [90m 443 |[39m     }
2025-02-27T19:41:51.8613888Z      [90m 444 |[39m   }[0m
2025-02-27T19:41:51.8614133Z 
2025-02-27T19:41:51.8614508Z       at TaskManager.unlockTask (src/managers/TaskManager.ts:441:15)
2025-02-27T19:41:51.8615346Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:188:32)
2025-02-27T19:41:51.8616044Z 
2025-02-27T19:41:51.8616192Z     console.error
2025-02-27T19:41:51.8617232Z       Error unlocking task locked-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8618547Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8619845Z           at TaskManager.unlockTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:417:12)
2025-02-27T19:41:51.8621180Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:203:32)
2025-02-27T19:41:51.8622530Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8623418Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8624366Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8625654Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8626994Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8628060Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8629360Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8631091Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8632311Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8633939Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8636093Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8637541Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8638754Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8640044Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8640707Z 
2025-02-27T19:41:51.8641191Z     [0m [90m 439 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8641868Z      [90m 440 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8642981Z     [31m[1m>[22m[39m[90m 441 |[39m       console[33m.[39merror([32m`Error unlocking task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8643915Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8644723Z      [90m 442 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8645353Z      [90m 443 |[39m     }
2025-02-27T19:41:51.8645762Z      [90m 444 |[39m   }[0m
2025-02-27T19:41:51.8646171Z 
2025-02-27T19:41:51.8646539Z       at TaskManager.unlockTask (src/managers/TaskManager.ts:441:15)
2025-02-27T19:41:51.8647353Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:203:32)
2025-02-27T19:41:51.8647835Z 
2025-02-27T19:41:51.8647966Z     console.error
2025-02-27T19:41:51.8648684Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8649928Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8651225Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:41:51.8652734Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:214:32)
2025-02-27T19:41:51.8654073Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8654928Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8655818Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8657220Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8658221Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8659216Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8660478Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8661911Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8663046Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8664665Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8667028Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8668550Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8669808Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8671066Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8671750Z 
2025-02-27T19:41:51.8672272Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8672971Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8674145Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8675141Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8676198Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8676876Z      [90m 376 |[39m     }
2025-02-27T19:41:51.8677313Z      [90m 377 |[39m   }[0m
2025-02-27T19:41:51.8677558Z 
2025-02-27T19:41:51.8677954Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:41:51.8678847Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:214:32)
2025-02-27T19:41:51.8679328Z 
2025-02-27T19:41:51.8679475Z     console.error
2025-02-27T19:41:51.8680217Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8681474Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8682810Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:41:51.8684109Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:229:32)
2025-02-27T19:41:51.8685482Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8686543Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8687395Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8688810Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8689871Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8690806Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8691954Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8693204Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8694320Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8695736Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8697648Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8699069Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8700232Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8701618Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8702232Z 
2025-02-27T19:41:51.8702683Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8703301Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8704336Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8705185Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8706094Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8706674Z      [90m 376 |[39m     }
2025-02-27T19:41:51.8707045Z      [90m 377 |[39m   }[0m
2025-02-27T19:41:51.8707257Z 
2025-02-27T19:41:51.8707601Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:41:51.8708358Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:229:32)
2025-02-27T19:41:51.8708785Z 
2025-02-27T19:41:51.8708910Z     console.error
2025-02-27T19:41:51.8709539Z       Error canceling task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8710641Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8711790Z           at TaskManager.cancelTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:386:12)
2025-02-27T19:41:51.8712943Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:240:32)
2025-02-27T19:41:51.8714156Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8714946Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8715735Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8716996Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8717888Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8718814Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8719918Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8721361Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8722478Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8723908Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8725669Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8727185Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8728342Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8729583Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8730265Z 
2025-02-27T19:41:51.8730707Z     [0m [90m 403 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8731400Z      [90m 404 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8732527Z     [31m[1m>[22m[39m[90m 405 |[39m       console[33m.[39merror([32m`Error canceling task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8733726Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8734551Z      [90m 406 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8735200Z      [90m 407 |[39m     }
2025-02-27T19:41:51.8735625Z      [90m 408 |[39m   }[0m
2025-02-27T19:41:51.8736050Z 
2025-02-27T19:41:51.8736400Z       at TaskManager.cancelTask (src/managers/TaskManager.ts:405:15)
2025-02-27T19:41:51.8737155Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:240:32)
2025-02-27T19:41:51.8737584Z 
2025-02-27T19:41:51.8737727Z     console.error
2025-02-27T19:41:51.8738466Z       Error checking task requirements: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8739642Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8741016Z           at TaskManager.checkAllTaskRequirements (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:452:12)
2025-02-27T19:41:51.8742468Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:271:34)
2025-02-27T19:41:51.8743852Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8744778Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8746398Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8747803Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8748901Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8749968Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8751305Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8752748Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8753968Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8755605Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8758050Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8759595Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8760862Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8762106Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8762820Z 
2025-02-27T19:41:51.8763298Z     [0m [90m 465 |[39m       [36mreturn[39m unlocked[33m;[39m
2025-02-27T19:41:51.8763988Z      [90m 466 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8765182Z     [31m[1m>[22m[39m[90m 467 |[39m       console[33m.[39merror([32m'Error checking task requirements:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8766395Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8767224Z      [90m 468 |[39m       [36mreturn[39m [35m0[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8767881Z      [90m 469 |[39m     }
2025-02-27T19:41:51.8768329Z      [90m 470 |[39m   }[0m
2025-02-27T19:41:51.8768588Z 
2025-02-27T19:41:51.8769076Z       at TaskManager.checkAllTaskRequirements (src/managers/TaskManager.ts:467:15)
2025-02-27T19:41:51.8770298Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:271:34)
2025-02-27T19:41:51.8770773Z 
2025-02-27T19:41:51.8770911Z     console.error
2025-02-27T19:41:51.8771617Z       Error starting task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8772865Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8774174Z           at TaskManager.startTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:263:12)
2025-02-27T19:41:51.8775479Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:306:17)
2025-02-27T19:41:51.8779619Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8780566Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8781531Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8798934Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8800111Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8801168Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8802481Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8803917Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8805151Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8807029Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8808905Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8810406Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8811674Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8813253Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8813952Z 
2025-02-27T19:41:51.8814483Z     [0m [90m 311 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8815190Z      [90m 312 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8816541Z     [31m[1m>[22m[39m[90m 313 |[39m       console[33m.[39merror([32m`Error starting task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8817441Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8818216Z      [90m 314 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8818825Z      [90m 315 |[39m     }
2025-02-27T19:41:51.8819212Z      [90m 316 |[39m   }[0m
2025-02-27T19:41:51.8819445Z 
2025-02-27T19:41:51.8819796Z       at TaskManager.startTask (src/managers/TaskManager.ts:313:15)
2025-02-27T19:41:51.8820561Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:306:17)
2025-02-27T19:41:51.8821026Z 
2025-02-27T19:41:51.8821172Z     console.error
2025-02-27T19:41:51.8821897Z       Error completing task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8823122Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8824457Z           at TaskManager.completeTask (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:325:12)
2025-02-27T19:41:51.8826225Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:313:17)
2025-02-27T19:41:51.8827591Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8828480Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8829409Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8830671Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8831729Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8832752Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8834032Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8835436Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8836800Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8838407Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8840330Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8841814Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8843063Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8844313Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8844995Z 
2025-02-27T19:41:51.8845459Z     [0m [90m 372 |[39m       [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:51.8846314Z      [90m 373 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8847487Z     [31m[1m>[22m[39m[90m 374 |[39m       console[33m.[39merror([32m`Error completing task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8848454Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8849560Z      [90m 375 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8850239Z      [90m 376 |[39m     }
2025-02-27T19:41:51.8850671Z      [90m 377 |[39m   }[0m
2025-02-27T19:41:51.8850900Z 
2025-02-27T19:41:51.8851278Z       at TaskManager.completeTask (src/managers/TaskManager.ts:374:15)
2025-02-27T19:41:51.8852106Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:313:17)
2025-02-27T19:41:51.8852584Z 
2025-02-27T19:41:51.8852735Z     console.error
2025-02-27T19:41:51.8853536Z       Error getting progress for task test-task: Error: TaskManager not properly initialized with Redux store
2025-02-27T19:41:51.8854853Z           at TaskManager.ensureInitialized (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:91:13)
2025-02-27T19:41:51.8856406Z           at TaskManager.getTaskProgress (/home/runner/work/idle-game/idle-game/src/managers/TaskManager.ts:500:12)
2025-02-27T19:41:51.8857783Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/integration/tasks.integration.test.ts:334:34)
2025-02-27T19:41:51.8859171Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:51.8860076Z           at new Promise (<anonymous>)
2025-02-27T19:41:51.8861025Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:51.8862570Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:51.8863642Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:51.8864705Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:51.8866168Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:51.8867593Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:51.8868826Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:51.8870476Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:51.8872378Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:51.8873860Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:51.8875126Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:51.8876559Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:51.8877185Z 
2025-02-27T19:41:51.8877512Z     [0m [90m 519 |[39m       }[33m;[39m
2025-02-27T19:41:51.8878052Z      [90m 520 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:51.8879242Z     [31m[1m>[22m[39m[90m 521 |[39m       console[33m.[39merror([32m`Error getting progress for task ${taskId}:`[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:51.8880252Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:51.8881067Z      [90m 522 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m [90m// Fail safe[39m
2025-02-27T19:41:51.8881699Z      [90m 523 |[39m     }
2025-02-27T19:41:51.8882124Z      [90m 524 |[39m   }[0m
2025-02-27T19:41:51.8882362Z 
2025-02-27T19:41:51.8882756Z       at TaskManager.getTaskProgress (src/managers/TaskManager.ts:521:15)
2025-02-27T19:41:51.8883619Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:334:34)
2025-02-27T19:41:51.8884103Z 
2025-02-27T19:41:51.8884889Z   ● Task System Integration › should start a task when requirements are met
2025-02-27T19:41:51.8885384Z 
2025-02-27T19:41:51.8885669Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:51.8886209Z 
2025-02-27T19:41:51.8886349Z     Expected: true
2025-02-27T19:41:51.8886673Z     Received: false
2025-02-27T19:41:51.8886865Z 
2025-02-27T19:41:51.8887668Z     [0m [90m 151 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mstartTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8888456Z      [90m 152 |[39m     
2025-02-27T19:41:51.8889241Z     [31m[1m>[22m[39m[90m 153 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:51.8890047Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:41:51.8890881Z      [90m 154 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:41:51.8891690Z      [90m 155 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:41:51.8892522Z      [90m 156 |[39m         type[33m:[39m [32m'tasks/startTask'[39m[33m,[39m[0m
2025-02-27T19:41:51.8892943Z 
2025-02-27T19:41:51.8893505Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:153:20)
2025-02-27T19:41:51.8894004Z 
2025-02-27T19:41:51.8894478Z   ● Task System Integration › should check if task requirements are met
2025-02-27T19:41:51.8895152Z 
2025-02-27T19:41:51.8895437Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:51.8895805Z 
2025-02-27T19:41:51.8896092Z     Expected: true
2025-02-27T19:41:51.8896416Z     Received: false
2025-02-27T19:41:51.8896610Z 
2025-02-27T19:41:51.8897398Z     [0m [90m 188 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39munlockTask([32m'locked-task'[39m)[33m;[39m
2025-02-27T19:41:51.8898197Z      [90m 189 |[39m     
2025-02-27T19:41:51.8898972Z     [31m[1m>[22m[39m[90m 190 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:51.8899773Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:41:51.8900613Z      [90m 191 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:41:51.8901436Z      [90m 192 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:41:51.8902247Z      [90m 193 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:41:51.8902672Z 
2025-02-27T19:41:51.8903077Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:190:20)
2025-02-27T19:41:51.8903548Z 
2025-02-27T19:41:51.8903973Z   ● Task System Integration › should complete an in-progress task
2025-02-27T19:41:51.8904373Z 
2025-02-27T19:41:51.8904656Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:51.8905015Z 
2025-02-27T19:41:51.8905145Z     Expected: true
2025-02-27T19:41:51.8905461Z     Received: false
2025-02-27T19:41:51.8905660Z 
2025-02-27T19:41:51.8906604Z     [0m [90m 214 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcompleteTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8907356Z      [90m 215 |[39m     
2025-02-27T19:41:51.8908064Z     [31m[1m>[22m[39m[90m 216 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:51.8908845Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:41:51.8909683Z      [90m 217 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:41:51.8910507Z      [90m 218 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:41:51.8911339Z      [90m 219 |[39m         type[33m:[39m [32m'tasks/completeTask'[39m[33m,[39m[0m
2025-02-27T19:41:51.8911767Z 
2025-02-27T19:41:51.8912167Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:216:20)
2025-02-27T19:41:51.8912636Z 
2025-02-27T19:41:51.8913057Z   ● Task System Integration › should cancel an in-progress task
2025-02-27T19:41:51.8913455Z 
2025-02-27T19:41:51.8913975Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:51.8914356Z 
2025-02-27T19:41:51.8914494Z     Expected: true
2025-02-27T19:41:51.8914816Z     Received: false
2025-02-27T19:41:51.8915008Z 
2025-02-27T19:41:51.8915764Z     [0m [90m 240 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcancelTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8919567Z      [90m 241 |[39m     
2025-02-27T19:41:51.8920401Z     [31m[1m>[22m[39m[90m 242 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:41:51.8921232Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:41:51.8922104Z      [90m 243 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:41:51.8922959Z      [90m 244 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:41:51.8923784Z      [90m 245 |[39m         type[33m:[39m [32m'tasks/cancelTask'[39m[33m,[39m[0m
2025-02-27T19:41:51.8924217Z 
2025-02-27T19:41:51.8924641Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:242:20)
2025-02-27T19:41:51.8925138Z 
2025-02-27T19:41:51.8925754Z   ● Task System Integration › should check all task requirements and unlock eligible tasks
2025-02-27T19:41:51.8926516Z 
2025-02-27T19:41:51.8926802Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:41:51.8927423Z 
2025-02-27T19:41:51.8927550Z     Expected: 2
2025-02-27T19:41:51.8927857Z     Received: 0
2025-02-27T19:41:51.8928037Z 
2025-02-27T19:41:51.8928804Z     [0m [90m 271 |[39m     [36mconst[39m unlocked [33m=[39m taskManager[33m.[39mcheckAllTaskRequirements()[33m;[39m
2025-02-27T19:41:51.8929600Z      [90m 272 |[39m     
2025-02-27T19:41:51.8930622Z     [31m[1m>[22m[39m[90m 273 |[39m     expect(unlocked)[33m.[39mtoBe([35m2[39m)[33m;[39m [90m// Two tasks should be unlocked[39m
2025-02-27T19:41:51.8931609Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:41:51.8932471Z      [90m 274 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:41:51.8933313Z      [90m 275 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:41:51.8934124Z      [90m 276 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:41:51.8934538Z 
2025-02-27T19:41:51.8934945Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:273:22)
2025-02-27T19:41:51.8935419Z 
2025-02-27T19:41:51.8936069Z   ● Task System Integration › should emit events when task status changes
2025-02-27T19:41:51.8936478Z 
2025-02-27T19:41:51.8936764Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-02-27T19:41:51.8937138Z 
2025-02-27T19:41:51.8937284Z     Expected: "test-task"
2025-02-27T19:41:51.8937523Z 
2025-02-27T19:41:51.8937658Z     Number of calls: 0
2025-02-27T19:41:51.8937880Z 
2025-02-27T19:41:51.8938133Z     [0m [90m 314 |[39m     
2025-02-27T19:41:51.8938754Z      [90m 315 |[39m     [90m// Verify events were emitted[39m
2025-02-27T19:41:51.8939894Z     [31m[1m>[22m[39m[90m 316 |[39m     expect(startedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8940934Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-02-27T19:41:51.8941925Z      [90m 317 |[39m     expect(completedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8942772Z      [90m 318 |[39m   })[33m;[39m
2025-02-27T19:41:51.8943249Z      [90m 319 |[39m   [0m
2025-02-27T19:41:51.8943491Z 
2025-02-27T19:41:51.8943915Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:316:29)
2025-02-27T19:41:51.8944396Z 
2025-02-27T19:41:51.8944937Z   ● Task System Integration › should provide progress information for a task
2025-02-27T19:41:51.8945419Z 
2025-02-27T19:41:51.8945623Z     expect(received).not.toBeNull()
2025-02-27T19:41:51.8946093Z 
2025-02-27T19:41:51.8946239Z     Received: null
2025-02-27T19:41:51.8946446Z 
2025-02-27T19:41:51.8947534Z     [0m [90m 334 |[39m     [36mconst[39m progress [33m=[39m taskManager[33m.[39mgetTaskProgress([32m'test-task'[39m)[33m;[39m
2025-02-27T19:41:51.8948457Z      [90m 335 |[39m     
2025-02-27T19:41:51.8949306Z     [31m[1m>[22m[39m[90m 336 |[39m     expect(progress)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
2025-02-27T19:41:51.8950199Z      [90m     |[39m                          [31m[1m^[22m[39m
2025-02-27T19:41:51.8951431Z      [90m 337 |[39m     expect(progress[33m?[39m[33m.[39mstatus)[33m.[39mtoBe([33mTaskStatus[39m[33m.[39m[33mIN_PROGRESS[39m)[33m;[39m
2025-02-27T19:41:51.8952793Z      [90m 338 |[39m     expect(progress[33m?[39m[33m.[39mprogress)[33m.[39mtoBe([35m50[39m)[33m;[39m
2025-02-27T19:41:51.8954164Z      [90m 339 |[39m     expect(progress[33m?[39m[33m.[39mtimeRemaining)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-02-27T19:41:51.8954827Z 
2025-02-27T19:41:51.8955267Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:336:26)
2025-02-27T19:41:51.8955763Z 
2025-02-27T19:41:52.5009510Z FAIL src/systems/__tests__/eventManager.test.ts
2025-02-27T19:41:52.5010894Z   ● Test suite failed to run
2025-02-27T19:41:52.5011420Z 
2025-02-27T19:41:52.5017876Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m65[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5022858Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5026670Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5029346Z 
2025-02-27T19:41:52.5031020Z     [7m65[0m     expect(() => eventManager.initialize(store)).not.toThrow();
2025-02-27T19:41:52.5033010Z     [7m  [0m [91m                                         ~~~~~[0m
2025-02-27T19:41:52.5034562Z 
2025-02-27T19:41:52.5036504Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5038734Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5046116Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5046655Z         'tutorial' is declared here.
2025-02-27T19:41:52.5049902Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m72[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5079028Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5080861Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5082161Z 
2025-02-27T19:41:52.5082614Z     [7m72[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5083263Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5083569Z 
2025-02-27T19:41:52.5083915Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5084635Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5085253Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5085700Z         'tutorial' is declared here.
2025-02-27T19:41:52.5089292Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m85[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5091800Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5093594Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5094855Z 
2025-02-27T19:41:52.5095220Z     [7m85[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5096119Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5096469Z 
2025-02-27T19:41:52.5096847Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5097666Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5098309Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5098763Z         'tutorial' is declared here.
2025-02-27T19:41:52.5101798Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m113[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5104537Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5106502Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5107780Z 
2025-02-27T19:41:52.5108146Z     [7m113[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5108798Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5109113Z 
2025-02-27T19:41:52.5109467Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5110202Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5110849Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5111306Z         'tutorial' is declared here.
2025-02-27T19:41:52.5114366Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m131[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5117016Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5118773Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5119985Z 
2025-02-27T19:41:52.5120349Z     [7m131[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5120996Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5121323Z 
2025-02-27T19:41:52.5121657Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5122376Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5122988Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5123434Z         'tutorial' is declared here.
2025-02-27T19:41:52.5126847Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5129335Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5131131Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5132406Z 
2025-02-27T19:41:52.5132771Z     [7m165[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5133404Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5133717Z 
2025-02-27T19:41:52.5134050Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5134770Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5135381Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5135813Z         'tutorial' is declared here.
2025-02-27T19:41:52.5139019Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m185[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5141704Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5143503Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5144766Z 
2025-02-27T19:41:52.5145107Z     [7m185[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5145746Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5146211Z 
2025-02-27T19:41:52.5146569Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5147277Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5147901Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5148363Z         'tutorial' is declared here.
2025-02-27T19:41:52.5151466Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m226[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5153935Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5155649Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5157127Z 
2025-02-27T19:41:52.5157506Z     [7m226[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5158179Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5158487Z 
2025-02-27T19:41:52.5158835Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5159565Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5160191Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5160632Z         'tutorial' is declared here.
2025-02-27T19:41:52.5163978Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m258[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5166634Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5168431Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5169746Z 
2025-02-27T19:41:52.5170146Z     [7m258[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5170772Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5171110Z 
2025-02-27T19:41:52.5171468Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5172229Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5172878Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5173331Z         'tutorial' is declared here.
2025-02-27T19:41:52.5176587Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m284[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:52.5179336Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:52.5181139Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:52.5182419Z 
2025-02-27T19:41:52.5182797Z     [7m284[0m     eventManager.initialize(store);
2025-02-27T19:41:52.5183447Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:41:52.5183766Z 
2025-02-27T19:41:52.5184106Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:52.5184832Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:52.5185448Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:52.5186193Z         'tutorial' is declared here.
2025-02-27T19:41:52.5186494Z 
2025-02-27T19:41:52.6318251Z PASS src/utils/__tests__/saveUtils.test.ts
2025-02-27T19:41:52.6491878Z   ● Console
2025-02-27T19:41:52.6492463Z 
2025-02-27T19:41:52.6492804Z     console.error
2025-02-27T19:41:52.6493469Z       Failed to save game: Error: Storage quota exceeded
2025-02-27T19:41:52.6494635Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:123:15)
2025-02-27T19:41:52.6496160Z           at /home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:397:39
2025-02-27T19:41:52.6499168Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:404:13)
2025-02-27T19:41:52.6510105Z           at Object.mockConstructor [as setItem] (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:108:19)
2025-02-27T19:41:52.6511380Z           at saveGame (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:56:18)
2025-02-27T19:41:52.6512566Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:127:30)
2025-02-27T19:41:52.6513844Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:52.6514790Z           at new Promise (<anonymous>)
2025-02-27T19:41:52.6515776Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:52.6517731Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:52.6518875Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:52.6520201Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:52.6521747Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:52.6523452Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6525061Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6526688Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:52.6528571Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:52.6530784Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:52.6532413Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:52.6534255Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:52.6536591Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:52.6538972Z 
2025-02-27T19:41:52.6540697Z     [0m [90m 58 |[39m     [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:52.6541935Z      [90m 59 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:41:52.6544173Z     [31m[1m>[22m[39m[90m 60 |[39m     console[33m.[39merror([32m'Failed to save game:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:52.6546068Z      [90m    |[39m             [31m[1m^[22m[39m
2025-02-27T19:41:52.6547116Z      [90m 61 |[39m     [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:52.6548583Z      [90m 62 |[39m   }
2025-02-27T19:41:52.6549298Z      [90m 63 |[39m }[0m
2025-02-27T19:41:52.6549726Z 
2025-02-27T19:41:52.6550105Z       at saveGame (src/utils/saveUtils.ts:60:13)
2025-02-27T19:41:52.6551028Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:127:30)
2025-02-27T19:41:52.6551689Z 
2025-02-27T19:41:52.6551988Z     console.error
2025-02-27T19:41:52.6552780Z       Failed to load game: SyntaxError: Unexpected token i in JSON at position 0
2025-02-27T19:41:52.6553693Z           at JSON.parse (<anonymous>)
2025-02-27T19:41:52.6554651Z           at loadGame (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:79:37)
2025-02-27T19:41:52.6556271Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:164:30)
2025-02-27T19:41:52.6557910Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:52.6559015Z           at new Promise (<anonymous>)
2025-02-27T19:41:52.6560092Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:52.6561695Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:52.6563410Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:52.6564918Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:52.6568141Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:52.6569989Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6571559Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6572909Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:52.6574658Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:52.6576918Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:52.6578525Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:52.6579804Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:52.6581181Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:52.6581920Z 
2025-02-27T19:41:52.6582389Z     [0m [90m 93 |[39m     [36mreturn[39m saveData[33m;[39m
2025-02-27T19:41:52.6583149Z      [90m 94 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:41:52.6584302Z     [31m[1m>[22m[39m[90m 95 |[39m     console[33m.[39merror([32m'Failed to load game:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:52.6585590Z      [90m    |[39m             [31m[1m^[22m[39m
2025-02-27T19:41:52.6586502Z      [90m 96 |[39m     [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:41:52.6587039Z      [90m 97 |[39m   }
2025-02-27T19:41:52.6587438Z      [90m 98 |[39m }[0m
2025-02-27T19:41:52.6587672Z 
2025-02-27T19:41:52.6587909Z       at loadGame (src/utils/saveUtils.ts:95:13)
2025-02-27T19:41:52.6588609Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:164:30)
2025-02-27T19:41:52.6589061Z 
2025-02-27T19:41:52.6589209Z     console.error
2025-02-27T19:41:52.6589626Z       Failed to delete save: Error: Storage error
2025-02-27T19:41:52.6590576Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:214:15)
2025-02-27T19:41:52.6591722Z           at /home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:397:39
2025-02-27T19:41:52.6592903Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:404:13)
2025-02-27T19:41:52.6594340Z           at Object.mockConstructor [as removeItem] (/home/runner/work/idle-game/idle-game/node_modules/jest-mock/build/index.js:103:19)
2025-02-27T19:41:52.6595620Z           at deleteSave (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:105:18)
2025-02-27T19:41:52.6598312Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:218:32)
2025-02-27T19:41:52.6599644Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:52.6600546Z           at new Promise (<anonymous>)
2025-02-27T19:41:52.6601490Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:52.6602797Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:52.6603910Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:52.6604964Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:52.6606432Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:52.6607858Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6609516Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6610774Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:52.6612469Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:52.6614390Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:52.6616046Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:52.6617388Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:52.6618747Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:52.6619482Z 
2025-02-27T19:41:52.6619979Z     [0m [90m 108 |[39m     [36mreturn[39m [36mtrue[39m[33m;[39m
2025-02-27T19:41:52.6620701Z      [90m 109 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:41:52.6621871Z     [31m[1m>[22m[39m[90m 110 |[39m     console[33m.[39merror([32m'Failed to delete save:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:52.6623119Z      [90m     |[39m             [31m[1m^[22m[39m
2025-02-27T19:41:52.6623880Z      [90m 111 |[39m     [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:52.6624525Z      [90m 112 |[39m   }
2025-02-27T19:41:52.6624993Z      [90m 113 |[39m }[0m
2025-02-27T19:41:52.6625245Z 
2025-02-27T19:41:52.6625501Z       at deleteSave (src/utils/saveUtils.ts:110:13)
2025-02-27T19:41:52.6626460Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:218:32)
2025-02-27T19:41:52.6626934Z 
2025-02-27T19:41:52.6627082Z     console.error
2025-02-27T19:41:52.6627492Z       No backup found at index 0
2025-02-27T19:41:52.6627732Z 
2025-02-27T19:41:52.6628012Z     [0m [90m 165 |[39m     
2025-02-27T19:41:52.6628681Z      [90m 166 |[39m     [36mif[39m ([33m![39mserializedState) {
2025-02-27T19:41:52.6629894Z     [31m[1m>[22m[39m[90m 167 |[39m       console[33m.[39merror([32m'No backup found at index'[39m[33m,[39m backupIndex)[33m;[39m
2025-02-27T19:41:52.6630928Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:52.6631687Z      [90m 168 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:41:52.6632308Z      [90m 169 |[39m     }
2025-02-27T19:41:52.6632806Z      [90m 170 |[39m     [0m
2025-02-27T19:41:52.6633069Z 
2025-02-27T19:41:52.6633388Z       at restoreFromBackup (src/utils/saveUtils.ts:167:15)
2025-02-27T19:41:52.6634171Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:272:39)
2025-02-27T19:41:52.6634646Z 
2025-02-27T19:41:52.6634782Z     console.error
2025-02-27T19:41:52.6635158Z       Invalid backup index
2025-02-27T19:41:52.6635423Z 
2025-02-27T19:41:52.6635759Z     [0m [90m 157 |[39m   [36mtry[39m {
2025-02-27T19:41:52.6636964Z      [90m 158 |[39m     [36mif[39m (backupIndex [33m>=[39m [33mBACKUP_SAVE_KEYS[39m[33m.[39mlength) {
2025-02-27T19:41:52.6638230Z     [31m[1m>[22m[39m[90m 159 |[39m       console[33m.[39merror([32m'Invalid backup index'[39m)[33m;[39m
2025-02-27T19:41:52.6639166Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:52.6639917Z      [90m 160 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:41:52.6640525Z      [90m 161 |[39m     }
2025-02-27T19:41:52.6641016Z      [90m 162 |[39m     [0m
2025-02-27T19:41:52.6641282Z 
2025-02-27T19:41:52.6641597Z       at restoreFromBackup (src/utils/saveUtils.ts:159:15)
2025-02-27T19:41:52.6642378Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:280:39)
2025-02-27T19:41:52.6642840Z 
2025-02-27T19:41:52.6642987Z     console.error
2025-02-27T19:41:52.6643967Z       Failed to import save: SyntaxError: Unexpected token o in JSON at position 1
2025-02-27T19:41:52.6644695Z           at JSON.parse (<anonymous>)
2025-02-27T19:41:52.6645529Z           at importSave (/home/runner/work/idle-game/idle-game/src/utils/saveUtils.ts:197:37)
2025-02-27T19:41:52.6646898Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/utils/__tests__/saveUtils.test.ts:324:32)
2025-02-27T19:41:52.6648267Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:52.6649181Z           at new Promise (<anonymous>)
2025-02-27T19:41:52.6650130Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:52.6651419Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:52.6652508Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:52.6653541Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:52.6654808Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:52.6656383Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6658022Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:52.6659231Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:52.6660830Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:52.6662707Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:52.6664186Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:52.6665423Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:52.6666885Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:52.6667562Z 
2025-02-27T19:41:52.6667995Z     [0m [90m 208 |[39m     [36mreturn[39m saveData[33m;[39m
2025-02-27T19:41:52.6668647Z      [90m 209 |[39m   } [36mcatch[39m (error) {
2025-02-27T19:41:52.6669694Z     [31m[1m>[22m[39m[90m 210 |[39m     console[33m.[39merror([32m'Failed to import save:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:52.6670594Z      [90m     |[39m             [31m[1m^[22m[39m
2025-02-27T19:41:52.6671283Z      [90m 211 |[39m     [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:41:52.6671836Z      [90m 212 |[39m   }
2025-02-27T19:41:52.6672230Z      [90m 213 |[39m }[0m
2025-02-27T19:41:52.6672452Z 
2025-02-27T19:41:52.6672695Z       at importSave (src/utils/saveUtils.ts:210:13)
2025-02-27T19:41:52.6673379Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:324:32)
2025-02-27T19:41:52.6673817Z 
2025-02-27T19:41:52.6673941Z     console.error
2025-02-27T19:41:52.6674293Z       Invalid save data format
2025-02-27T19:41:52.6674551Z 
2025-02-27T19:41:52.6674895Z     [0m [90m 199 |[39m     [90m// Validate the data[39m
2025-02-27T19:41:52.6676289Z      [90m 200 |[39m     [36mif[39m ([33m![39msaveData [33m||[39m [33m![39msaveData[33m.[39mversion [33m||[39m [33m![39msaveData[33m.[39mstate) {
2025-02-27T19:41:52.6677628Z     [31m[1m>[22m[39m[90m 201 |[39m       console[33m.[39merror([32m'Invalid save data format'[39m)[33m;[39m
2025-02-27T19:41:52.6678670Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:52.6679357Z      [90m 202 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
2025-02-27T19:41:52.6679881Z      [90m 203 |[39m     }
2025-02-27T19:41:52.6680310Z      [90m 204 |[39m     [0m
2025-02-27T19:41:52.6680547Z 
2025-02-27T19:41:52.6680782Z       at importSave (src/utils/saveUtils.ts:201:15)
2025-02-27T19:41:52.6681460Z       at Object.<anonymous> (src/utils/__tests__/saveUtils.test.ts:335:32)
2025-02-27T19:41:52.6681894Z 
2025-02-27T19:41:52.8828190Z PASS src/managers/TaskManager.test.ts
2025-02-27T19:41:52.9123293Z   ● Console
2025-02-27T19:41:52.9123458Z 
2025-02-27T19:41:52.9123543Z     console.log
2025-02-27T19:41:52.9123816Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9124021Z 
2025-02-27T19:41:52.9124288Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9124602Z 
2025-02-27T19:41:52.9124683Z     console.log
2025-02-27T19:41:52.9124941Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9125126Z 
2025-02-27T19:41:52.9125374Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9125669Z 
2025-02-27T19:41:52.9125741Z     console.log
2025-02-27T19:41:52.9126136Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9126314Z 
2025-02-27T19:41:52.9126558Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9127149Z 
2025-02-27T19:41:52.9127231Z     console.error
2025-02-27T19:41:52.9127456Z       Task non-existent-task not found
2025-02-27T19:41:52.9127625Z 
2025-02-27T19:41:52.9127863Z     [0m [90m 267 |[39m       [90m// Validate task exists[39m
2025-02-27T19:41:52.9128266Z      [90m 268 |[39m       [36mif[39m ([33m![39mtask) {
2025-02-27T19:41:52.9129074Z     [31m[1m>[22m[39m[90m 269 |[39m         console[33m.[39merror([32m`Task ${taskId} not found`[39m)[33m;[39m
2025-02-27T19:41:52.9129876Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:41:52.9130562Z      [90m 270 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:52.9131138Z      [90m 271 |[39m       }
2025-02-27T19:41:52.9131621Z      [90m 272 |[39m       [0m
2025-02-27T19:41:52.9131884Z 
2025-02-27T19:41:52.9132240Z       at TaskManager.startTask (src/managers/TaskManager.ts:269:17)
2025-02-27T19:41:52.9133008Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:148:43)
2025-02-27T19:41:52.9133417Z 
2025-02-27T19:41:52.9133542Z     console.warn
2025-02-27T19:41:52.9134040Z       Task in-progress-task is not available (status: in_progress)
2025-02-27T19:41:52.9134426Z 
2025-02-27T19:41:52.9134831Z     [0m [90m 279 |[39m       [90m// Check if task is available[39m
2025-02-27T19:41:52.9136052Z      [90m 280 |[39m       [36mif[39m (task[33m.[39mstatus [33m!==[39m [33mTaskStatus[39m[33m.[39m[33mAVAILABLE[39m) {
2025-02-27T19:41:52.9137481Z     [31m[1m>[22m[39m[90m 281 |[39m         console[33m.[39mwarn([32m`Task ${taskId} is not available (status: ${task.status})`[39m)[33m;[39m
2025-02-27T19:41:52.9138407Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:41:52.9139033Z      [90m 282 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:52.9139571Z      [90m 283 |[39m       }
2025-02-27T19:41:52.9140034Z      [90m 284 |[39m       [0m
2025-02-27T19:41:52.9140274Z 
2025-02-27T19:41:52.9140611Z       at TaskManager.startTask (src/managers/TaskManager.ts:281:17)
2025-02-27T19:41:52.9141303Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:152:42)
2025-02-27T19:41:52.9141692Z 
2025-02-27T19:41:52.9141812Z     console.warn
2025-02-27T19:41:52.9142252Z       Task locked-task is not available (status: locked)
2025-02-27T19:41:52.9142589Z 
2025-02-27T19:41:52.9142950Z     [0m [90m 279 |[39m       [90m// Check if task is available[39m
2025-02-27T19:41:52.9144189Z      [90m 280 |[39m       [36mif[39m (task[33m.[39mstatus [33m!==[39m [33mTaskStatus[39m[33m.[39m[33mAVAILABLE[39m) {
2025-02-27T19:41:52.9145647Z     [31m[1m>[22m[39m[90m 281 |[39m         console[33m.[39mwarn([32m`Task ${taskId} is not available (status: ${task.status})`[39m)[33m;[39m
2025-02-27T19:41:52.9197366Z      [90m     |[39m                 [31m[1m^[22m[39m
2025-02-27T19:41:52.9198096Z      [90m 282 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:41:52.9198726Z      [90m 283 |[39m       }
2025-02-27T19:41:52.9199179Z      [90m 284 |[39m       [0m
2025-02-27T19:41:52.9199427Z 
2025-02-27T19:41:52.9199769Z       at TaskManager.startTask (src/managers/TaskManager.ts:281:17)
2025-02-27T19:41:52.9200505Z       at Object.<anonymous> (src/managers/TaskManager.test.ts:156:38)
2025-02-27T19:41:52.9200908Z 
2025-02-27T19:41:52.9201038Z     console.log
2025-02-27T19:41:52.9201421Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9201719Z 
2025-02-27T19:41:52.9202148Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9202642Z 
2025-02-27T19:41:52.9202759Z     console.log
2025-02-27T19:41:52.9203128Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9203420Z 
2025-02-27T19:41:52.9203826Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9204309Z 
2025-02-27T19:41:52.9204810Z     console.log
2025-02-27T19:41:52.9205194Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9205480Z 
2025-02-27T19:41:52.9206066Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9206556Z 
2025-02-27T19:41:52.9206674Z     console.log
2025-02-27T19:41:52.9207047Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9207344Z 
2025-02-27T19:41:52.9207753Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9208232Z 
2025-02-27T19:41:52.9208348Z     console.log
2025-02-27T19:41:52.9208721Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9209001Z 
2025-02-27T19:41:52.9209410Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9209870Z 
2025-02-27T19:41:52.9209992Z     console.log
2025-02-27T19:41:52.9210346Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9210633Z 
2025-02-27T19:41:52.9211050Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9211532Z 
2025-02-27T19:41:52.9211645Z     console.log
2025-02-27T19:41:52.9212017Z       TaskManager: Registered with GameLoop
2025-02-27T19:41:52.9212297Z 
2025-02-27T19:41:52.9212703Z       at TaskManager.registerWithGameLoop (src/managers/TaskManager.ts:109:15)
2025-02-27T19:41:52.9213167Z 
2025-02-27T19:41:53.4830416Z PASS src/state/middleware/taskMiddleware.test.ts
2025-02-27T19:41:53.5369431Z FAIL src/systems/__tests__/gameLoop.test.ts
2025-02-27T19:41:53.5374220Z   ● Test suite failed to run
2025-02-27T19:41:53.5378569Z 
2025-02-27T19:41:53.5385082Z     [96msrc/systems/__tests__/gameLoop.test.ts[0m:[93m87[0m:[93m25[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:41:53.5391913Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:41:53.5398239Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:41:53.5403520Z 
2025-02-27T19:41:53.5408108Z     [7m87[0m     gameLoop.initialize(store);
2025-02-27T19:41:53.5411562Z     [7m  [0m [91m                        ~~~~~[0m
2025-02-27T19:41:53.5413931Z 
2025-02-27T19:41:53.5417106Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:53.5427407Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:53.5428080Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:53.5428559Z         'tutorial' is declared here.
2025-02-27T19:41:53.5428852Z 
2025-02-27T19:41:54.1287493Z PASS src/core/GameTimer.test.ts
2025-02-27T19:41:54.3266778Z FAIL src/gameCore.integration.test.tsx
2025-02-27T19:41:54.3267951Z   ● Game Core Systems Integration › Building purchase consumes resources correctly
2025-02-27T19:41:54.3268508Z 
2025-02-27T19:41:54.3268956Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:41:54.3269510Z 
2025-02-27T19:41:54.3269822Z     [0m [90m 165 |[39m     
2025-02-27T19:41:54.3270730Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:54.3272101Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:54.3273280Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:54.3273855Z      [90m 168 |[39m     
2025-02-27T19:41:54.3274716Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:41:54.3276711Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:41:54.3277308Z 
2025-02-27T19:41:54.3277834Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:41:54.3278913Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:194:58)
2025-02-27T19:41:54.3279910Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:171:36)
2025-02-27T19:41:54.3280386Z 
2025-02-27T19:41:54.3281032Z   ● Game Core Systems Integration › Building level affects production calculation
2025-02-27T19:41:54.3281609Z 
2025-02-27T19:41:54.3282067Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:41:54.3282590Z 
2025-02-27T19:41:54.3282885Z     [0m [90m 274 |[39m     
2025-02-27T19:41:54.3283794Z      [90m 275 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:54.3285160Z     [31m[1m>[22m[39m[90m 276 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:54.3286488Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:54.3287094Z      [90m 277 |[39m     
2025-02-27T19:41:54.3287724Z      [90m 278 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:54.3288502Z      [90m 279 |[39m       [36mreturn[39m {}[33m;[39m[0m
2025-02-27T19:41:54.3288873Z 
2025-02-27T19:41:54.3289397Z       at BuildingManager.calculateUpgradeCost (src/systems/buildingManager.ts:276:38)
2025-02-27T19:41:54.3290399Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:209:41)
2025-02-27T19:41:54.3290883Z 
2025-02-27T19:41:54.7408011Z PASS src/core/GameManager.test.ts
2025-02-27T19:41:54.7668411Z   ● Console
2025-02-27T19:41:54.7672232Z 
2025-02-27T19:41:54.7675615Z     console.log
2025-02-27T19:41:54.7677364Z       GameManager: Started time scale sync interval
2025-02-27T19:41:54.7681266Z 
2025-02-27T19:41:54.7685046Z       at GameManager.startTimeScaleSync (src/core/GameManager.ts:269:15)
2025-02-27T19:41:54.7686712Z 
2025-02-27T19:41:54.7690574Z     console.log
2025-02-27T19:41:54.7694744Z       GameManager: Started Redux time sync interval
2025-02-27T19:41:54.7698787Z 
2025-02-27T19:41:54.7702603Z       at GameManager.startReduxTimeSync (src/core/GameManager.ts:309:15)
2025-02-27T19:41:54.7706844Z 
2025-02-27T19:41:54.7707242Z     console.error
2025-02-27T19:41:54.7711942Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:41:54.7714113Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:41:54.7716949Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7722200Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7724076Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7725780Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7730993Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7759025Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7761213Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:41:54.7763136Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7764790Z           at GameManager.update (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:420:12)
2025-02-27T19:41:54.7766881Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:110:5)
2025-02-27T19:41:54.7768370Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:54.7769384Z           at new Promise (<anonymous>)
2025-02-27T19:41:54.7770564Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:54.7771884Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:54.7772922Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:54.7773949Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:54.7775208Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:54.7776840Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:54.7778041Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:54.7779647Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:54.7781513Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:54.7782960Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:54.7784189Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:54.7785418Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:54.7786228Z 
2025-02-27T19:41:54.7786647Z     [0m [90m 725 |[39m       }
2025-02-27T19:41:54.7787164Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:54.7788231Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:54.7789242Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:54.7790044Z      [90m 728 |[39m     }
2025-02-27T19:41:54.7790446Z      [90m 729 |[39m     
2025-02-27T19:41:54.7791038Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:41:54.7791433Z 
2025-02-27T19:41:54.7792103Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:41:54.7793200Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7793941Z       at GameManager.update (src/core/GameManager.ts:420:12)
2025-02-27T19:41:54.7794597Z       at Object.<anonymous> (src/core/GameManager.test.ts:110:5)
2025-02-27T19:41:54.7794971Z 
2025-02-27T19:41:54.7795114Z     console.error
2025-02-27T19:41:54.7796072Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:41:54.7797302Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:41:54.7798637Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7800060Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7801361Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7802961Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7804415Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7805752Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7807492Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:41:54.7809111Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7810383Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:133:26)
2025-02-27T19:41:54.7811590Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:54.7812503Z           at new Promise (<anonymous>)
2025-02-27T19:41:54.7813430Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:54.7814718Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:54.7815782Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:54.7816999Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:54.7818296Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:54.7819698Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:54.7820946Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:54.7822586Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:54.7824504Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:54.7826176Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:54.7827736Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:54.7829009Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:54.7829681Z 
2025-02-27T19:41:54.7830057Z     [0m [90m 725 |[39m       }
2025-02-27T19:41:54.7830659Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:54.7831902Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:54.7832939Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:54.7833440Z      [90m 728 |[39m     }
2025-02-27T19:41:54.7833847Z      [90m 729 |[39m     
2025-02-27T19:41:54.7834530Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:41:54.7834955Z 
2025-02-27T19:41:54.7835667Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:41:54.7836965Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7837761Z       at Object.<anonymous> (src/core/GameManager.test.ts:133:26)
2025-02-27T19:41:54.7838166Z 
2025-02-27T19:41:54.7838307Z     console.error
2025-02-27T19:41:54.7839402Z       Error checking all progression items: TypeError: Cannot read properties of undefined (reading 'milestoneIds')
2025-02-27T19:41:54.7840697Z           at selectMilestoneIds (/home/runner/work/idle-game/idle-game/src/redux/progressionSlice.ts:199:92)
2025-02-27T19:41:54.7842064Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7843550Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7844947Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7846545Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:41:54.7848063Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:41:54.7849466Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:41:54.7851072Z           at ProgressionManager.checkAllProgressionItems (/home/runner/work/idle-game/idle-game/src/managers/progression/ProgressionManager.ts:710:56)
2025-02-27T19:41:54.7852748Z           at GameManager.updateResourceSystem (/home/runner/work/idle-game/idle-game/src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7854041Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/core/GameManager.test.ts:153:26)
2025-02-27T19:41:54.7855400Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:41:54.7856473Z           at new Promise (<anonymous>)
2025-02-27T19:41:54.7857409Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:41:54.7858692Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:41:54.7859748Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:41:54.7860785Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:41:54.7862067Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:41:54.7863500Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:41:54.7865021Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:41:54.7866805Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:41:54.7868697Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:41:54.7870204Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:41:54.7871455Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:41:54.7872678Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)
2025-02-27T19:41:54.7873307Z 
2025-02-27T19:41:54.7873685Z     [0m [90m 725 |[39m       }
2025-02-27T19:41:54.7874193Z      [90m 726 |[39m     } [36mcatch[39m (error) {
2025-02-27T19:41:54.7875202Z     [31m[1m>[22m[39m[90m 727 |[39m       console[33m.[39merror([32m'Error checking all progression items:'[39m[33m,[39m error)[33m;[39m
2025-02-27T19:41:54.7876231Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:41:54.7876652Z      [90m 728 |[39m     }
2025-02-27T19:41:54.7877294Z      [90m 729 |[39m     
2025-02-27T19:41:54.7877856Z      [90m 730 |[39m     [36mif[39m (itemsUpdated [33m>[39m [35m0[39m) {[0m
2025-02-27T19:41:54.7878211Z 
2025-02-27T19:41:54.7878788Z       at ProgressionManager.checkAllProgressionItems (src/managers/progression/ProgressionManager.ts:727:15)
2025-02-27T19:41:54.7879826Z       at GameManager.updateResourceSystem (src/core/GameManager.ts:471:30)
2025-02-27T19:41:54.7880517Z       at Object.<anonymous> (src/core/GameManager.test.ts:153:26)
2025-02-27T19:41:54.7880844Z 
2025-02-27T19:41:54.8235598Z FAIL src/state/selectors.test.ts
2025-02-27T19:41:54.8239359Z   ● Test suite failed to run
2025-02-27T19:41:54.8246965Z 
2025-02-27T19:41:54.8251001Z     [96msrc/state/selectors.test.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2352: [0mConversion of type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' to type 'RootState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-27T19:41:54.8256226Z       Property 'tutorial' is missing in type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' but required in type 'RootState'.
2025-02-27T19:41:54.8258104Z 
2025-02-27T19:41:54.8258516Z     [7m 94[0m   const mockState: RootState = {
2025-02-27T19:41:54.8259196Z     [7m   [0m [91m                               ~[0m
2025-02-27T19:41:54.8259788Z     [7m 95[0m     resources: {
2025-02-27T19:41:54.8260314Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:41:54.8260762Z     [7m...[0m 
2025-02-27T19:41:54.8261149Z     [7m163[0m     }
2025-02-27T19:41:54.8261606Z     [7m   [0m [91m~~~~~[0m
2025-02-27T19:41:54.8262116Z     [7m164[0m   } as RootState;
2025-02-27T19:41:54.8262682Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:41:54.8262975Z 
2025-02-27T19:41:54.8263348Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:41:54.8264117Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:41:54.8264781Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:41:54.8265252Z         'tutorial' is declared here.
2025-02-27T19:41:54.8266130Z 
2025-02-27T19:41:55.4626533Z PASS src/tests/gameSystemCoherenceTest.test.ts
2025-02-27T19:41:55.5582004Z PASS src/systems/gameLoop.test.ts
2025-02-27T19:41:55.5614340Z   ● Console
2025-02-27T19:41:55.5615724Z 
2025-02-27T19:41:55.5617445Z     console.log
2025-02-27T19:41:55.5619096Z       GameLoop: Window event listeners attached
2025-02-27T19:41:55.5620647Z 
2025-02-27T19:41:55.5622307Z       at GameLoop.setupWindowEventListeners (src/systems/gameLoop.ts:516:13)
2025-02-27T19:41:55.5623965Z 
2025-02-27T19:41:55.5625246Z     console.log
2025-02-27T19:41:55.5627173Z       gameSlice.addPlayTime: Adding 10.00s, old=0.00, new=10.00
2025-02-27T19:41:55.5656480Z 
2025-02-27T19:41:55.5657507Z       at addPlayTime (src/state/gameSlice.ts:62:17)
2025-02-27T19:41:55.5658104Z           at Array.reduce (<anonymous>)
2025-02-27T19:41:55.5658411Z 
2025-02-27T19:41:55.9317858Z FAIL src/workers.integration.test.tsx
2025-02-27T19:41:55.9320293Z   ● Worker System Integration Test › WorkerManager can assign and manage workers
2025-02-27T19:41:55.9322123Z 
2025-02-27T19:41:55.9323735Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:41:55.9325376Z 
2025-02-27T19:41:55.9327115Z     [0m [90m 190 |[39m     
2025-02-27T19:41:55.9329276Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:41:55.9332281Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:41:55.9334605Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:41:55.9336661Z      [90m 193 |[39m     
2025-02-27T19:41:55.9338540Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:41:55.9340619Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:41:55.9406843Z 
2025-02-27T19:41:55.9407843Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:41:55.9408875Z       at Object.<anonymous> (src/workers.integration.test.tsx:105:19)
2025-02-27T19:41:55.9409311Z 
2025-02-27T19:41:56.4992298Z FAIL src/systems/__tests__/oppressionSystem.test.ts
2025-02-27T19:41:56.4993297Z   ● Console
2025-02-27T19:41:56.4993631Z 
2025-02-27T19:41:56.5026689Z     console.log
2025-02-27T19:41:56.5066665Z       Resources before: {
2025-02-27T19:41:56.5067088Z         "collective-power": {
2025-02-27T19:41:56.5067586Z           "id": "collective-power",
2025-02-27T19:41:56.5068098Z           "name": "Collective Power",
2025-02-27T19:41:56.5068525Z           "amount": 0,
2025-02-27T19:41:56.5068863Z           "maxAmount": 1000,
2025-02-27T19:41:56.5069236Z           "perSecond": 0.1,
2025-02-27T19:41:56.5069669Z           "basePerSecond": 0.1,
2025-02-27T19:41:56.5070153Z           "description": "Test power resource",
2025-02-27T19:41:56.5070621Z           "unlocked": true,
2025-02-27T19:41:56.5071069Z           "category": "primary",
2025-02-27T19:41:56.5071461Z           "clickPower": 1
2025-02-27T19:41:56.5071792Z         },
2025-02-27T19:41:56.5072091Z         "oppression": {
2025-02-27T19:41:56.5072450Z           "id": "oppression",
2025-02-27T19:41:56.5072900Z           "name": "Corporate Oppression",
2025-02-27T19:41:56.5073321Z           "amount": 0,
2025-02-27T19:41:56.5073668Z           "maxAmount": 1000,
2025-02-27T19:41:56.5074057Z           "perSecond": 0.05,
2025-02-27T19:41:56.5074479Z           "basePerSecond": 0.05,
2025-02-27T19:41:56.5074983Z           "description": "Test oppression resource",
2025-02-27T19:41:56.5075757Z           "unlocked": true,
2025-02-27T19:41:56.5076357Z           "category": "threat"
2025-02-27T19:41:56.5076888Z         }
2025-02-27T19:41:56.5077267Z       }
2025-02-27T19:41:56.5077522Z 
2025-02-27T19:41:56.5078104Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:63:13)
2025-02-27T19:41:56.5078602Z 
2025-02-27T19:41:56.5079870Z   ● Oppression System › oppression resource should generate at the specified rate
2025-02-27T19:41:56.5080582Z 
2025-02-27T19:41:56.5081107Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:41:56.5081705Z 
2025-02-27T19:41:56.5083358Z     [0m [90m 178 |[39m     
2025-02-27T19:41:56.5084785Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:41:56.5087456Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:41:56.5090054Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:41:56.5090781Z      [90m 181 |[39m     
2025-02-27T19:41:56.5091446Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:41:56.5092432Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:41:56.5093037Z 
2025-02-27T19:41:56.5093666Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:41:56.5094763Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:67:21)
2025-02-27T19:41:56.5095268Z 
2025-02-27T19:41:56.5096146Z   ● Oppression System › oppression should continue to generate in multiple ticks
2025-02-27T19:41:56.5096989Z 
2025-02-27T19:41:56.5097375Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:41:56.5097813Z 
2025-02-27T19:41:56.5098096Z     [0m [90m 178 |[39m     
2025-02-27T19:41:56.5099035Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:41:56.5101372Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:41:56.5103043Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:41:56.5103584Z      [90m 181 |[39m     
2025-02-27T19:41:56.5104144Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:41:56.5105036Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:41:56.5105518Z 
2025-02-27T19:41:56.5106268Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:41:56.5107229Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:85:23)
2025-02-27T19:41:56.5107733Z 
2025-02-27T19:41:56.5108403Z   ● Oppression System › oppression should generate even if its perSecond property is modified
2025-02-27T19:41:56.5108991Z 
2025-02-27T19:41:56.5109349Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:41:56.5109774Z 
2025-02-27T19:41:56.5110016Z     [0m [90m 178 |[39m     
2025-02-27T19:41:56.5110895Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:41:56.5113164Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:41:56.5114803Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:41:56.5115321Z      [90m 181 |[39m     
2025-02-27T19:41:56.5115994Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:41:56.5116830Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:41:56.5117281Z 
2025-02-27T19:41:56.5117732Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:41:56.5118864Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:107:21)
2025-02-27T19:41:56.5119362Z 
2025-02-27T19:41:56.5119952Z   ● Oppression System › oppression generation should scale with time delta correctly
2025-02-27T19:41:56.5120481Z 
2025-02-27T19:41:56.5120835Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:41:56.5121280Z 
2025-02-27T19:41:56.5121509Z     [0m [90m 178 |[39m     
2025-02-27T19:41:56.5122401Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:41:56.5124627Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:41:56.5126422Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:41:56.5126973Z      [90m 181 |[39m     
2025-02-27T19:41:56.5127517Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:41:56.5128367Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:41:56.5128836Z 
2025-02-27T19:41:56.5129283Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:41:56.5130497Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:127:23)
2025-02-27T19:41:56.5130998Z 
2025-02-27T19:41:56.8582982Z PASS src/components/progression/__tests__/ProgressionTracker.test.tsx
2025-02-27T19:41:57.3317519Z PASS src/systems/__tests__/gameEndConditions.test.ts
2025-02-27T19:41:57.5247536Z PASS src/utils/__tests__/timeUtils.test.ts
2025-02-27T19:41:57.5784716Z PASS src/components/buildings/__tests__/BuildingItem.test.tsx
2025-02-27T19:41:57.8445069Z PASS src/state/structuresSlice.test.ts
2025-02-27T19:41:58.7018608Z PASS src/components/ResourceList.test.tsx
2025-02-27T19:41:59.1637637Z PASS src/components/buildings/__tests__/BuildingList.test.tsx
2025-02-27T19:42:00.7667774Z PASS src/components/__tests__/GameTimer.test.tsx
2025-02-27T19:42:00.9512989Z PASS src/components/progression/__tests__/MilestoneProgressStrip.test.tsx
2025-02-27T19:42:01.5660855Z PASS src/components/ResourceDisplay.test.tsx
2025-02-27T19:42:01.9277485Z FAIL src/components/App.test.tsx
2025-02-27T19:42:01.9279499Z   ● Test suite failed to run
2025-02-27T19:42:01.9280909Z 
2025-02-27T19:42:01.9283068Z     [96msrc/managers/TutorialManager.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../state/store"' has no exported member 'AppState'.
2025-02-27T19:42:01.9284144Z 
2025-02-27T19:42:01.9284663Z     [7m3[0m import { AppState } from '../state/store';
2025-02-27T19:42:01.9285234Z     [7m [0m [91m         ~~~~~~~~[0m
2025-02-27T19:42:01.9287144Z     [96msrc/managers/TutorialManager.ts[0m:[93m79[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:01.9288407Z 
2025-02-27T19:42:01.9288805Z     [7m79[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:42:01.9289525Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:01.9291341Z     [96msrc/managers/TutorialManager.ts[0m:[93m99[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:01.9292451Z 
2025-02-27T19:42:01.9292825Z     [7m99[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:42:01.9293529Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:01.9295973Z     [96msrc/managers/TutorialManager.ts[0m:[93m155[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:01.9297191Z 
2025-02-27T19:42:01.9297566Z     [7m155[0m       return tutorialContent[currentStep];
2025-02-27T19:42:01.9298245Z     [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:01.9298558Z 
2025-02-27T19:42:02.0827460Z PASS src/components/__tests__/OfflineProgressModal.test.tsx
2025-02-27T19:42:02.0896868Z   ● Console
2025-02-27T19:42:02.0900699Z 
2025-02-27T19:42:02.0904312Z     console.error
2025-02-27T19:42:02.0908117Z       An update to OfflineProgressModal inside a test was not wrapped in act(...).
2025-02-27T19:42:02.0910807Z       
2025-02-27T19:42:02.0913420Z       When testing, code that causes React state updates should be wrapped into act(...):
2025-02-27T19:42:02.0916369Z       
2025-02-27T19:42:02.0918097Z       act(() => {
2025-02-27T19:42:02.0920322Z         /* fire events that update state */
2025-02-27T19:42:02.0945516Z       });
2025-02-27T19:42:02.0950099Z       /* assert on the output */
2025-02-27T19:42:02.0950559Z       
2025-02-27T19:42:02.0956974Z       This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
2025-02-27T19:42:02.0957713Z 
2025-02-27T19:42:02.0958394Z     [0m [90m 37 |[39m       [90m// Reset closing state after the animation completes[39m
2025-02-27T19:42:02.0959623Z      [90m 38 |[39m       setTimeout(() [33m=>[39m {
2025-02-27T19:42:02.0960368Z     [31m[1m>[22m[39m[90m 39 |[39m         setIsClosing([36mfalse[39m)[33m;[39m
2025-02-27T19:42:02.0961048Z      [90m    |[39m         [31m[1m^[22m[39m
2025-02-27T19:42:02.0961694Z      [90m 40 |[39m       }[33m,[39m [35m100[39m)[33m;[39m
2025-02-27T19:42:02.0962551Z      [90m 41 |[39m     }[33m,[39m [35m300[39m)[33m;[39m [90m// Animation duration[39m
2025-02-27T19:42:02.0963270Z      [90m 42 |[39m   }[33m;[39m[0m
2025-02-27T19:42:02.0963593Z 
2025-02-27T19:42:02.0964011Z       at node_modules/react-dom/cjs/react-dom-client.development.js:15751:19
2025-02-27T19:42:02.0965039Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:42:02.0966501Z       at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom-client.development.js:15750:9)
2025-02-27T19:42:02.0967714Z       at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:14311:11)
2025-02-27T19:42:02.0968877Z       at dispatchSetStateInternal (node_modules/react-dom/cjs/react-dom-client.development.js:7208:13)
2025-02-27T19:42:02.0969950Z       at dispatchSetState (node_modules/react-dom/cjs/react-dom-client.development.js:7161:7)
2025-02-27T19:42:02.0970777Z       at src/components/OfflineProgressModal.tsx:39:9
2025-02-27T19:42:02.0971510Z       at callTimer (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:744:24)
2025-02-27T19:42:02.0972415Z       at doTickInner (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1312:29)
2025-02-27T19:42:02.0973328Z       at doTick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1393:20)
2025-02-27T19:42:02.0974217Z       at Object.tick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1401:20)
2025-02-27T19:42:02.0975295Z       at FakeTimers.advanceTimersByTime (node_modules/@jest/fake-timers/build/modernFakeTimers.js:94:19)
2025-02-27T19:42:02.0976684Z       at Object.<anonymous> (src/components/__tests__/OfflineProgressModal.test.tsx:83:10)
2025-02-27T19:42:02.0977250Z 
2025-02-27T19:42:02.6707600Z PASS src/components/ui/__tests__/Dropdown.test.tsx
2025-02-27T19:42:02.6717479Z   ● Console
2025-02-27T19:42:02.6720987Z 
2025-02-27T19:42:02.6724369Z     console.log
2025-02-27T19:42:02.6728247Z       Dropdown styles: {
2025-02-27T19:42:02.6732017Z         backgroundColor: 'rgb(25, 25, 25)',
2025-02-27T19:42:02.6735746Z         border: '1px solid #333',
2025-02-27T19:42:02.6739539Z         padding: '8px'
2025-02-27T19:42:02.6743525Z       }
2025-02-27T19:42:02.6747157Z 
2025-02-27T19:42:02.6750869Z       at Object.<anonymous> (src/components/ui/__tests__/Dropdown.test.tsx:70:15)
2025-02-27T19:42:02.6754683Z 
2025-02-27T19:42:03.3407655Z PASS src/components/tutorial/__tests__/TutorialModal.test.tsx
2025-02-27T19:42:03.5639928Z PASS src/components/ui/__tests__/Modal.test.tsx
2025-02-27T19:42:03.9417634Z PASS src/state/resourcesSlice.test.ts
2025-02-27T19:42:04.1183023Z PASS src/components/resources/__tests__/PassiveUpgradePanel.test.tsx
2025-02-27T19:42:04.8744438Z PASS src/components/resources/__tests__/ResourceDisplay.test.tsx
2025-02-27T19:42:05.0394951Z PASS src/components/GameTimer.test.tsx
2025-02-27T19:42:05.2851303Z PASS src/components/ui/__tests__/Icon.test.tsx
2025-02-27T19:42:05.4307104Z PASS src/state/gameSlice.test.ts
2025-02-27T19:42:05.4319551Z   ● Console
2025-02-27T19:42:05.4323677Z 
2025-02-27T19:42:05.4327924Z     console.log
2025-02-27T19:42:05.4332521Z       gameSlice.addPlayTime: Adding 50.00s, old=100.00, new=150.00
2025-02-27T19:42:05.4352444Z 
2025-02-27T19:42:05.4353108Z       at addPlayTime (src/state/gameSlice.ts:62:17)
2025-02-27T19:42:05.4353916Z           at Array.reduce (<anonymous>)
2025-02-27T19:42:05.4354270Z 
2025-02-27T19:42:05.4354427Z     console.log
2025-02-27T19:42:05.4355022Z       gameSlice.setTotalPlayTime: Setting time from 0.00s to 500.00s
2025-02-27T19:42:05.4356188Z 
2025-02-27T19:42:05.4356512Z       at setTotalPlayTime (src/state/gameSlice.ts:70:15)
2025-02-27T19:42:05.4357121Z           at Array.reduce (<anonymous>)
2025-02-27T19:42:05.4357434Z 
2025-02-27T19:42:05.9417769Z PASS src/components/ui/__tests__/Button.test.tsx
2025-02-27T19:42:06.1124602Z PASS src/components/workers/__tests__/WorkerOverview.test.tsx
2025-02-27T19:42:06.3222902Z PASS src/components/ui/__tests__/Card.test.tsx
2025-02-27T19:42:06.5663358Z PASS src/index.integration.test.tsx
2025-02-27T19:42:06.7741706Z PASS src/utils/testHelpers.test.ts
2025-02-27T19:42:07.0225321Z PASS src/state/actions/__tests__/workerActions.test.ts
2025-02-27T19:42:07.2677479Z PASS src/structure.test.ts
2025-02-27T19:42:07.2943366Z PASS src/components/layout/__tests__/Layout.test.tsx
2025-02-27T19:42:07.3241345Z   ● Console
2025-02-27T19:42:07.3261472Z 
2025-02-27T19:42:07.3261724Z     console.error
2025-02-27T19:42:07.3262373Z       TypeError: Cannot read properties of undefined (reading 'activeEvents')
2025-02-27T19:42:07.3263353Z           at /home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:17:40
2025-02-27T19:42:07.3264601Z           at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)
2025-02-27T19:42:07.3266266Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)
2025-02-27T19:42:07.3267654Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:42:07.3268689Z           at /home/runner/work/idle-game/idle-game/src/state/hooks.ts:21:18
2025-02-27T19:42:07.3269906Z           at recomputationWrapper (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:392:63)
2025-02-27T19:42:07.3271274Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:42:07.3272662Z           at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:412:39)
2025-02-27T19:42:07.3274056Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)
2025-02-27T19:42:07.3275364Z           at memoized (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:171:28)
2025-02-27T19:42:07.3277343Z           at memoizedSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)
2025-02-27T19:42:07.3279734Z           at /home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22
2025-02-27T19:42:07.3281544Z           at mountSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:6214:24)
2025-02-27T19:42:07.3283304Z           at Object.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22810:16)
2025-02-27T19:42:07.3285240Z           at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1507:34)
2025-02-27T19:42:07.3287995Z           at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)
2025-02-27T19:42:07.3290406Z           at useSelector2 (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:243:27)
2025-02-27T19:42:07.3291644Z           at useMemoSelector (/home/runner/work/idle-game/idle-game/src/state/hooks.ts:27:21)
2025-02-27T19:42:07.3292835Z           at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:28:39)
2025-02-27T19:42:07.3294415Z           at Object.react-stack-bottom-frame (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)
2025-02-27T19:42:07.3296825Z           at renderWithHooks (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)
2025-02-27T19:42:07.3298562Z           at updateFunctionComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)
2025-02-27T19:42:07.3300380Z           at updateSimpleMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7869:14)
2025-02-27T19:42:07.3302158Z           at updateMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7802:13)
2025-02-27T19:42:07.3303798Z           at beginWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:10103:18)
2025-02-27T19:42:07.3305378Z           at runWithFiberInDEV (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:42:07.3307693Z           at performUnitOfWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)
2025-02-27T19:42:07.3309371Z           at workLoopSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)
2025-02-27T19:42:07.3310972Z           at renderRootSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)
2025-02-27T19:42:07.3312621Z           at performWorkOnRoot (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)
2025-02-27T19:42:07.3314430Z           at performWorkOnRootViaSchedulerTask (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:42:07.3316252Z           at flushActQueue (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:42:07.3317771Z           at Object.<anonymous>.process.env.NODE_ENV.exports.act (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:42:07.3319193Z           at /home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:42:07.3320526Z           at renderRoot (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:42:07.3322105Z           at render (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:42:07.3323524Z           at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:42:07.3324946Z           at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)
2025-02-27T19:42:07.3326047Z           at new Promise (<anonymous>)
2025-02-27T19:42:07.3326994Z           at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)
2025-02-27T19:42:07.3328287Z           at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)
2025-02-27T19:42:07.3329400Z           at processTicksAndRejections (node:internal/process/task_queues:96:5)
2025-02-27T19:42:07.3330470Z           at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)
2025-02-27T19:42:07.3331782Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)
2025-02-27T19:42:07.3333191Z           at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)
2025-02-27T19:42:07.3334440Z           at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)
2025-02-27T19:42:07.3336629Z           at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
2025-02-27T19:42:07.3338169Z           at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
2025-02-27T19:42:07.3339272Z           at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)
2025-02-27T19:42:07.3340219Z           at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)
2025-02-27T19:42:07.3341165Z           at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12) {
2025-02-27T19:42:07.3342037Z         [stack]: "TypeError: Cannot read properties of undefined (reading 'activeEvents')\n" +
2025-02-27T19:42:07.3342891Z           '    at /home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:17:40\n' +
2025-02-27T19:42:07.3343901Z           '    at collectInputSelectorResults (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/utils.ts:122:47)\n' +
2025-02-27T19:42:07.3345098Z           '    at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:405:36)\n' +
2025-02-27T19:42:07.3346356Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:42:07.3347177Z           '    at /home/runner/work/idle-game/idle-game/src/state/hooks.ts:21:18\n' +
2025-02-27T19:42:07.3348143Z           '    at recomputationWrapper (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:392:63)\n' +
2025-02-27T19:42:07.3349253Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:42:07.3350362Z           '    at dependenciesChecker (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/createSelectorCreator.ts:412:39)\n' +
2025-02-27T19:42:07.3351483Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/reselect/src/weakMapMemoize.ts:228:21)\n' +
2025-02-27T19:42:07.3352641Z           '    at memoized (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:171:28)\n' +
2025-02-27T19:42:07.3373116Z           '    at memoizedSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:46:30)\n' +
2025-02-27T19:42:07.3375597Z           '    at /home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:70:22\n' +
2025-02-27T19:42:07.3377707Z           '    at mountSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:6214:24)\n' +
2025-02-27T19:42:07.3379606Z           '    at Object.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22810:16)\n' +
2025-02-27T19:42:07.3381711Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStore (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1507:34)\n' +
2025-02-27T19:42:07.3384491Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.useSyncExternalStoreWithSelector (/home/runner/work/idle-game/idle-game/node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.development.js:81:19)\n' +
2025-02-27T19:42:07.3387054Z           '    at useSelector2 (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/hooks/useSelector.ts:243:27)\n' +
2025-02-27T19:42:07.3388394Z           '    at useMemoSelector (/home/runner/work/idle-game/idle-game/src/state/hooks.ts:27:21)\n' +
2025-02-27T19:42:07.3389587Z           '    at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:28:39)\n' +
2025-02-27T19:42:07.3391566Z           '    at Object.react-stack-bottom-frame (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:22428:20)\n' +
2025-02-27T19:42:07.3393332Z           '    at renderWithHooks (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:5757:22)\n' +
2025-02-27T19:42:07.3395136Z           '    at updateFunctionComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:8018:19)\n' +
2025-02-27T19:42:07.3397103Z           '    at updateSimpleMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7869:14)\n' +
2025-02-27T19:42:07.3398726Z           '    at updateMemoComponent (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:7802:13)\n' +
2025-02-27T19:42:07.3400256Z           '    at beginWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:10103:18)\n' +
2025-02-27T19:42:07.3401787Z           '    at runWithFiberInDEV (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:543:16)\n' +
2025-02-27T19:42:07.3403531Z           '    at performUnitOfWork (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15052:22)\n' +
2025-02-27T19:42:07.3405254Z           '    at workLoopSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14870:41)\n' +
2025-02-27T19:42:07.3407218Z           '    at renderRootSync (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14850:11)\n' +
2025-02-27T19:42:07.3408977Z           '    at performWorkOnRoot (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:14384:44)\n' +
2025-02-27T19:42:07.3410914Z           '    at performWorkOnRootViaSchedulerTask (/home/runner/work/idle-game/idle-game/node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)\n' +
2025-02-27T19:42:07.3412651Z           '    at flushActQueue (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:862:34)\n' +
2025-02-27T19:42:07.3414334Z           '    at Object.<anonymous>.process.env.NODE_ENV.exports.act (/home/runner/work/idle-game/idle-game/node_modules/react/cjs/react.development.js:1151:10)\n' +
2025-02-27T19:42:07.3416596Z           '    at /home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/act-compat.js:47:25\n' +
2025-02-27T19:42:07.3418078Z           '    at renderRoot (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:188:26)\n' +
2025-02-27T19:42:07.3419468Z           '    at render (/home/runner/work/idle-game/idle-game/node_modules/@testing-library/react/dist/pure.js:287:10)\n' +
2025-02-27T19:42:07.3420901Z           '    at Object.<anonymous> (/home/runner/work/idle-game/idle-game/src/components/layout/__tests__/Layout.test.tsx:44:11)\n' +
2025-02-27T19:42:07.3422336Z           '    at Promise.then.completed (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:298:28)\n' +
2025-02-27T19:42:07.3423302Z           '    at new Promise (<anonymous>)\n' +
2025-02-27T19:42:07.3424290Z           '    at callAsyncCircusFn (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/utils.js:231:10)\n' +
2025-02-27T19:42:07.3425633Z           '    at _callCircusTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:316:40)\n' +
2025-02-27T19:42:07.3426962Z           '    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n' +
2025-02-27T19:42:07.3428061Z           '    at _runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:252:3)\n' +
2025-02-27T19:42:07.3429334Z           '    at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:126:9)\n' +
2025-02-27T19:42:07.3431152Z           '    at _runTestsForDescribeBlock (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:121:9)\n' +
2025-02-27T19:42:07.3432482Z           '    at run (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/run.js:71:3)\n' +
2025-02-27T19:42:07.3434228Z           '    at runAndTransformResultsToJestFormat (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n' +
2025-02-27T19:42:07.3436471Z           '    at jestAdapter (/home/runner/work/idle-game/idle-game/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n' +
2025-02-27T19:42:07.3438038Z           '    at runTestInternal (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:367:16)\n' +
2025-02-27T19:42:07.3439393Z           '    at runTest (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/runTest.js:444:34)\n' +
2025-02-27T19:42:07.3440683Z           '    at Object.worker (/home/runner/work/idle-game/idle-game/node_modules/jest-runner/build/testWorker.js:106:12)',
2025-02-27T19:42:07.3441825Z         [message]: "Cannot read properties of undefined (reading 'activeEvents')"
2025-02-27T19:42:07.3442486Z       }
2025-02-27T19:42:07.3442770Z       
2025-02-27T19:42:07.3443242Z       The above error occurred in the <EventPanel> component.
2025-02-27T19:42:07.3443753Z       
2025-02-27T19:42:07.3444576Z       React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.
2025-02-27T19:42:07.3445251Z 
2025-02-27T19:42:07.3446224Z     [0m [90m 42 |[39m describe([32m'Layout Component'[39m[33m,[39m () [33m=>[39m {
2025-02-27T19:42:07.3447411Z      [90m 43 |[39m   test([32m'renders all layout components correctly'[39m[33m,[39m () [33m=>[39m {
2025-02-27T19:42:07.3448310Z     [31m[1m>[22m[39m[90m 44 |[39m     render(
2025-02-27T19:42:07.3448912Z      [90m    |[39m           [31m[1m^[22m[39m
2025-02-27T19:42:07.3449761Z      [90m 45 |[39m       [33m<[39m[33mProvider[39m store[33m=[39m{store}[33m>[39m
2025-02-27T19:42:07.3451480Z      [90m 46 |[39m         [33m<[39m[33mLayout[39m sidebarContent[33m=[39m{[33m<[39m[33mdiv[39m[33m>[39m[33mSidebar[39m [33mContent[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m}[33m>[39m
2025-02-27T19:42:07.3453412Z      [90m 47 |[39m           [33m<[39m[33mdiv[39m[33m>[39m[33mMain[39m [33mContent[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m[0m
2025-02-27T19:42:07.3454089Z 
2025-02-27T19:42:07.3454713Z       at defaultOnCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:7445:21)
2025-02-27T19:42:07.3456080Z       at logCaughtError (node_modules/react-dom/cjs/react-dom-client.development.js:7484:9)
2025-02-27T19:42:07.3457130Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:42:07.3458551Z       at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:7531:11)
2025-02-27T19:42:07.3459849Z       at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:10680:16)
2025-02-27T19:42:07.3460845Z       at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10700:11)
2025-02-27T19:42:07.3461893Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:42:07.3463049Z       at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10919:11)
2025-02-27T19:42:07.3464287Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11490:25)
2025-02-27T19:42:07.3465594Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3467116Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11529:11)
2025-02-27T19:42:07.3468786Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3470082Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:42:07.3471400Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3472732Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11585:11)
2025-02-27T19:42:07.3474038Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3475331Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:42:07.3476855Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3478172Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11495:11)
2025-02-27T19:42:07.3479367Z       at commitLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12406:7)
2025-02-27T19:42:07.3480459Z       at commitRootImpl (node_modules/react-dom/cjs/react-dom-client.development.js:15352:11)
2025-02-27T19:42:07.3481511Z       at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15251:11)
2025-02-27T19:42:07.3482572Z       at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14445:15)
2025-02-27T19:42:07.3483774Z       at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:42:07.3484889Z       at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:42:07.3486134Z       at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:42:07.3487126Z       at node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:42:07.3487924Z       at renderRoot (node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:42:07.3488691Z       at render (node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:42:07.3489535Z       at Object.<anonymous> (src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:42:07.3490040Z 
2025-02-27T19:42:07.3490181Z     console.error
2025-02-27T19:42:07.3490877Z       [ERROR in UnknownComponent]: Cannot read properties of undefined (reading 'activeEvents') {
2025-02-27T19:42:07.3491967Z         component: 'UnknownComponent',
2025-02-27T19:42:07.3492511Z         componentStack: '\n' +
2025-02-27T19:42:07.3493405Z           '    at EventPanel (/home/runner/work/idle-game/idle-game/src/components/events/EventPanel.tsx:16:37)\n' +
2025-02-27T19:42:07.3494732Z           '    at ErrorBoundary (/home/runner/work/idle-game/idle-game/src/components/error/ErrorBoundary.tsx:36:5)\n' +
2025-02-27T19:42:07.3495664Z           '    at div (<anonymous>)\n' +
2025-02-27T19:42:07.3496805Z           '    at Layout (/home/runner/work/idle-game/idle-game/src/components/layout/Layout.tsx:16:42)\n' +
2025-02-27T19:42:07.3498087Z           '    at Provider (/home/runner/work/idle-game/idle-game/node_modules/react-redux/src/components/Provider.tsx:60:11)'
2025-02-27T19:42:07.3498966Z       }
2025-02-27T19:42:07.3499142Z 
2025-02-27T19:42:07.3500332Z     [0m [90m 135 |[39m       console[33m.[39merror([32m`[CRITICAL${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:42:07.3501947Z      [90m 136 |[39m     } [36melse[39m [36mif[39m (severity [33m===[39m [33mErrorSeverity[39m[33m.[39m[33mERROR[39m) {
2025-02-27T19:42:07.3503631Z     [31m[1m>[22m[39m[90m 137 |[39m       console[33m.[39merror([32m`[ERROR${context ? ' in ' + context : ''}]: ${errorMsg}`[39m[33m,[39m metadata [33m||[39m data)[33m;[39m
2025-02-27T19:42:07.3505052Z      [90m     |[39m               [31m[1m^[22m[39m
2025-02-27T19:42:07.3505574Z      [90m 138 |[39m     }
2025-02-27T19:42:07.3506228Z      [90m 139 |[39m     
2025-02-27T19:42:07.3506949Z      [90m 140 |[39m     [90m// Skip logging INFO and WARNING to console[39m[0m
2025-02-27T19:42:07.3507395Z 
2025-02-27T19:42:07.3507714Z       at ErrorLogger.logError (src/utils/errorUtils.ts:137:15)
2025-02-27T19:42:07.3508609Z       at ErrorBoundary.componentDidCatch (src/components/error/ErrorBoundary.tsx:58:31)
2025-02-27T19:42:07.3509818Z       at Object.react-stack-bottom-frame (node_modules/react-dom/cjs/react-dom-client.development.js:22481:20)
2025-02-27T19:42:07.3511349Z       at ErrorBoundary.inst.componentDidCatch.update.callback (node_modules/react-dom/cjs/react-dom-client.development.js:7542:11)
2025-02-27T19:42:07.3512722Z       at callCallback (node_modules/react-dom/cjs/react-dom-client.development.js:10680:16)
2025-02-27T19:42:07.3513838Z       at commitCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10700:11)
2025-02-27T19:42:07.3514958Z       at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:543:16)
2025-02-27T19:42:07.3516318Z       at commitClassCallbacks (node_modules/react-dom/cjs/react-dom-client.development.js:10919:11)
2025-02-27T19:42:07.3517452Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11490:25)
2025-02-27T19:42:07.3518750Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3520056Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11529:11)
2025-02-27T19:42:07.3521366Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3522687Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:42:07.3523996Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3525304Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11585:11)
2025-02-27T19:42:07.3526956Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3528255Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11413:11)
2025-02-27T19:42:07.3529868Z       at recursivelyTraverseLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12412:11)
2025-02-27T19:42:07.3531234Z       at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom-client.development.js:11495:11)
2025-02-27T19:42:07.3532433Z       at commitLayoutEffects (node_modules/react-dom/cjs/react-dom-client.development.js:12406:7)
2025-02-27T19:42:07.3533536Z       at commitRootImpl (node_modules/react-dom/cjs/react-dom-client.development.js:15352:11)
2025-02-27T19:42:07.3534574Z       at commitRoot (node_modules/react-dom/cjs/react-dom-client.development.js:15251:11)
2025-02-27T19:42:07.3535645Z       at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:14445:15)
2025-02-27T19:42:07.3537106Z       at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:15931:7)
2025-02-27T19:42:07.3538201Z       at flushActQueue (node_modules/react/cjs/react.development.js:862:34)
2025-02-27T19:42:07.3539265Z       at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:1151:10)
2025-02-27T19:42:07.3540281Z       at node_modules/@testing-library/react/dist/act-compat.js:47:25
2025-02-27T19:42:07.3541089Z       at renderRoot (node_modules/@testing-library/react/dist/pure.js:188:26)
2025-02-27T19:42:07.3541906Z       at render (node_modules/@testing-library/react/dist/pure.js:287:10)
2025-02-27T19:42:07.3543209Z       at Object.<anonymous> (src/components/layout/__tests__/Layout.test.tsx:44:11)
2025-02-27T19:42:07.3543715Z 
2025-02-27T19:42:07.4407269Z PASS src/config.test.ts
2025-02-27T19:42:07.7187271Z PASS src/managers/GameLoopManager.test.ts
2025-02-27T19:42:07.7233528Z   ● Console
2025-02-27T19:42:07.7236614Z 
2025-02-27T19:42:07.7238499Z     console.log
2025-02-27T19:42:07.7240528Z       GameLoopManager: Registered tick handler, total handlers: 1
2025-02-27T19:42:07.7242668Z 
2025-02-27T19:42:07.7245024Z       at GameLoopManager.registerTickHandler (src/managers/GameLoopManager.ts:39:17)
2025-02-27T19:42:07.7247429Z 
2025-02-27T19:42:07.7538744Z PASS src/index.test.ts
2025-02-27T19:42:07.7947301Z PASS src/styles/index.test.ts
2025-02-27T19:42:08.2848317Z PASS src/utils/EventEmitter.test.ts
2025-02-27T19:42:08.2947491Z PASS src/test-semantic-release.test.ts
2025-02-27T19:42:08.5703183Z PASS src/hello-world.test.ts
2025-02-27T19:42:08.7676218Z 
2025-02-27T19:42:08.7678146Z Summary of all failing tests
2025-02-27T19:42:08.7682870Z FAIL src/managers/progression/ProgressionManager.test.ts (9.382 s)
2025-02-27T19:42:08.7686955Z   ● ProgressionManager › checkRequirements › should return true when all requirements are met
2025-02-27T19:42:08.7687361Z 
2025-02-27T19:42:08.7689272Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7689652Z 
2025-02-27T19:42:08.7689856Z     Expected: true
2025-02-27T19:42:08.7690929Z     Received: false
2025-02-27T19:42:08.7691128Z 
2025-02-27T19:42:08.7700784Z     [0m [90m 49 |[39m       ][33m;[39m
2025-02-27T19:42:08.7702001Z      [90m 50 |[39m
2025-02-27T19:42:08.7710122Z     [31m[1m>[22m[39m[90m 51 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7714670Z      [90m    |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:42:08.7720628Z      [90m 52 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
2025-02-27T19:42:08.7722245Z      [90m 53 |[39m     })[33m;[39m
2025-02-27T19:42:08.7723318Z      [90m 54 |[39m[0m
2025-02-27T19:42:08.7723531Z 
2025-02-27T19:42:08.7728041Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:51:55)
2025-02-27T19:42:08.7728655Z 
2025-02-27T19:42:08.7731106Z   ● ProgressionManager › checkRequirements › should return false if any requirement is not met
2025-02-27T19:42:08.7731763Z 
2025-02-27T19:42:08.7732435Z     expect(jest.fn()).toHaveBeenCalledTimes(expected)
2025-02-27T19:42:08.7732842Z 
2025-02-27T19:42:08.7734053Z     Expected number of calls: 2
2025-02-27T19:42:08.7734692Z     Received number of calls: 0
2025-02-27T19:42:08.7734973Z 
2025-02-27T19:42:08.7735788Z     [0m [90m 76 |[39m
2025-02-27T19:42:08.7740636Z      [90m 77 |[39m       expect(manager[33m.[39mcheckRequirements(requirements))[33m.[39mtoBe([36mfalse[39m)[33m;[39m
2025-02-27T19:42:08.7744036Z     [31m[1m>[22m[39m[90m 78 |[39m       expect(mockEvaluate)[33m.[39mtoHaveBeenCalledTimes([35m2[39m)[33m;[39m
2025-02-27T19:42:08.7745755Z      [90m    |[39m                            [31m[1m^[22m[39m
2025-02-27T19:42:08.7747161Z      [90m 79 |[39m     })[33m;[39m
2025-02-27T19:42:08.7748075Z      [90m 80 |[39m
2025-02-27T19:42:08.7752289Z      [90m 81 |[39m     it([32m'should handle empty requirements array'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:42:08.7752875Z 
2025-02-27T19:42:08.7755199Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:78:28)
2025-02-27T19:42:08.7755819Z 
2025-02-27T19:42:08.7759154Z   ● ProgressionManager › evaluateRequirement › should correctly evaluate gameStage requirement
2025-02-27T19:42:08.7759806Z 
2025-02-27T19:42:08.7761402Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7761801Z 
2025-02-27T19:42:08.7761945Z     Expected: true
2025-02-27T19:42:08.7762535Z     Received: false
2025-02-27T19:42:08.7762739Z 
2025-02-27T19:42:08.7763840Z     [0m [90m 116 |[39m
2025-02-27T19:42:08.7767108Z      [90m 117 |[39m       [90m// Use the private method for testing[39m
2025-02-27T19:42:08.7772880Z     [31m[1m>[22m[39m[90m 118 |[39m       expect((manager [36mas[39m any)[33m.[39mevaluateRequirement(requirement))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7776535Z      [90m     |[39m                                                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.7777652Z      [90m 119 |[39m     })[33m;[39m
2025-02-27T19:42:08.7778543Z      [90m 120 |[39m
2025-02-27T19:42:08.7790150Z      [90m 121 |[39m     it([32m'should handle unknown requirement types'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:42:08.7790749Z 
2025-02-27T19:42:08.7793091Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:118:65)
2025-02-27T19:42:08.7793679Z 
2025-02-27T19:42:08.7797826Z   ● ProgressionManager › completeMilestone › should complete a milestone when requirements are met
2025-02-27T19:42:08.7798630Z 
2025-02-27T19:42:08.7800265Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7800680Z 
2025-02-27T19:42:08.7800831Z     Expected: true
2025-02-27T19:42:08.7804301Z     Received: false
2025-02-27T19:42:08.7805298Z 
2025-02-27T19:42:08.7805819Z     [0m [90m 143 |[39m
2025-02-27T19:42:08.7806824Z      [90m 144 |[39m       [90m// Complete the milestone[39m
2025-02-27T19:42:08.7814841Z     [31m[1m>[22m[39m[90m 145 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7827630Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:42:08.7830818Z      [90m 146 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:42:08.7833074Z      [90m 147 |[39m         id[33m:[39m [32m'milestone1'[39m[33m,[39m
2025-02-27T19:42:08.7847365Z      [90m 148 |[39m         completedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:42:08.7849222Z 
2025-02-27T19:42:08.7851228Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:145:55)
2025-02-27T19:42:08.7853680Z 
2025-02-27T19:42:08.7854513Z   ● ProgressionManager › completeMilestone › should not complete a milestone that is already completed
2025-02-27T19:42:08.7855203Z 
2025-02-27T19:42:08.7855518Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7856083Z 
2025-02-27T19:42:08.7856228Z     Expected: true
2025-02-27T19:42:08.7856571Z     Received: false
2025-02-27T19:42:08.7857172Z 
2025-02-27T19:42:08.7857714Z     [0m [90m 163 |[39m       [90m// Attempt to complete the milestone[39m
2025-02-27T19:42:08.7858808Z      [90m 164 |[39m       [90m// The implementation now returns true regardless of completion status[39m
2025-02-27T19:42:08.7860332Z     [31m[1m>[22m[39m[90m 165 |[39m       expect(manager[33m.[39mcompleteMilestone([32m'milestone1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7864809Z      [90m     |[39m                                                       [31m[1m^[22m[39m
2025-02-27T19:42:08.7872674Z      [90m 166 |[39m       [90m// The implementation now calls completeMilestone even for already completed milestones[39m
2025-02-27T19:42:08.7873943Z      [90m 167 |[39m       expect(completeMilestone)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:42:08.7874730Z      [90m 168 |[39m     })[33m;[39m[0m
2025-02-27T19:42:08.7875031Z 
2025-02-27T19:42:08.7875540Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:165:55)
2025-02-27T19:42:08.7876287Z 
2025-02-27T19:42:08.7877939Z   ● ProgressionManager › unlockAchievement › should unlock an achievement when requirements are met
2025-02-27T19:42:08.7878618Z 
2025-02-27T19:42:08.7881000Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7881868Z 
2025-02-27T19:42:08.7882219Z     Expected: true
2025-02-27T19:42:08.7882869Z     Received: false
2025-02-27T19:42:08.7883088Z 
2025-02-27T19:42:08.7883468Z     [0m [90m 184 |[39m
2025-02-27T19:42:08.7884194Z      [90m 185 |[39m       [90m// Unlock the achievement[39m
2025-02-27T19:42:08.7888474Z     [31m[1m>[22m[39m[90m 186 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7889717Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:42:08.7890780Z      [90m 187 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalledWith({
2025-02-27T19:42:08.7896978Z      [90m 188 |[39m         id[33m:[39m [32m'achievement1'[39m[33m,[39m
2025-02-27T19:42:08.7899112Z      [90m 189 |[39m         unlockedAt[33m:[39m [35m1000[39m[0m
2025-02-27T19:42:08.7899489Z 
2025-02-27T19:42:08.7900834Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:186:57)
2025-02-27T19:42:08.7901427Z 
2025-02-27T19:42:08.7903864Z   ● ProgressionManager › unlockAchievement › should not unlock an achievement that is already unlocked
2025-02-27T19:42:08.7904531Z 
2025-02-27T19:42:08.7904836Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7905200Z 
2025-02-27T19:42:08.7905343Z     Expected: true
2025-02-27T19:42:08.7905677Z     Received: false
2025-02-27T19:42:08.7906033Z 
2025-02-27T19:42:08.7907082Z     [0m [90m 204 |[39m       [90m// Attempt to unlock the achievement[39m
2025-02-27T19:42:08.7909629Z      [90m 205 |[39m       [90m// The implementation now returns true regardless of unlock status[39m
2025-02-27T19:42:08.7929262Z     [31m[1m>[22m[39m[90m 206 |[39m       expect(manager[33m.[39munlockAchievement([32m'achievement1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7930490Z      [90m     |[39m                                                         [31m[1m^[22m[39m
2025-02-27T19:42:08.7933191Z      [90m 207 |[39m       [90m// The implementation now calls unlockAchievement even for already unlocked achievements[39m
2025-02-27T19:42:08.7934483Z      [90m 208 |[39m       expect(unlockAchievement)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:42:08.7935264Z      [90m 209 |[39m     })[33m;[39m[0m
2025-02-27T19:42:08.7935554Z 
2025-02-27T19:42:08.7937059Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:206:57)
2025-02-27T19:42:08.7937656Z 
2025-02-27T19:42:08.7939968Z   ● ProgressionManager › shouldFeatureBeUnlocked › should return true if a completed milestone unlocks the feature
2025-02-27T19:42:08.7940768Z 
2025-02-27T19:42:08.7941074Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.7941465Z 
2025-02-27T19:42:08.7941603Z     Expected: true
2025-02-27T19:42:08.7941944Z     Received: false
2025-02-27T19:42:08.7942141Z 
2025-02-27T19:42:08.7942413Z     [0m [90m 288 |[39m       
2025-02-27T19:42:08.7943138Z      [90m 289 |[39m       [90m// Check if feature should be unlocked[39m
2025-02-27T19:42:08.7946930Z     [31m[1m>[22m[39m[90m 290 |[39m       expect(manager[33m.[39mshouldFeatureBeUnlocked([32m'feature1'[39m))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.7948167Z      [90m     |[39m                                                           [31m[1m^[22m[39m
2025-02-27T19:42:08.7948786Z      [90m 291 |[39m     })[33m;[39m
2025-02-27T19:42:08.7949246Z      [90m 292 |[39m
2025-02-27T19:42:08.7951934Z      [90m 293 |[39m     it([32m'should return false if no completed milestone unlocks the feature'[39m[33m,[39m () [33m=>[39m {[0m
2025-02-27T19:42:08.7952484Z 
2025-02-27T19:42:08.7953081Z       at Object.<anonymous> (src/managers/progression/ProgressionManager.test.ts:290:59)
2025-02-27T19:42:08.7953519Z 
2025-02-27T19:42:08.7954072Z FAIL src/systems/resourceManager.test.ts (9.329 s)
2025-02-27T19:42:08.7956294Z   ● ResourceManager › initializeResources › dispatches addResource action for each initial resource
2025-02-27T19:42:08.7957455Z 
2025-02-27T19:42:08.7957789Z     TypeError: this.actions.addResource is not a function
2025-02-27T19:42:08.7958192Z 
2025-02-27T19:42:08.7960870Z     [0m [90m 153 |[39m     [33mObject[39m[33m.[39mvalues([33mINITIAL_RESOURCES[39m)[33m.[39mforEach(resource [33m=>[39m {
2025-02-27T19:42:08.7966099Z      [90m 154 |[39m       [36mif[39m (validateObject(resource[33m,[39m [[32m'id'[39m[33m,[39m [32m'name'[39m[33m,[39m [32m'amount'[39m[33m,[39m [32m'perSecond'[39m[33m,[39m [32m'unlocked'[39m][33m,[39m [32m'initializeResources'[39m)) {
2025-02-27T19:42:08.7968164Z     [31m[1m>[22m[39m[90m 155 |[39m         [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddResource(resource))[33m;[39m
2025-02-27T19:42:08.7969294Z      [90m     |[39m                                    [31m[1m^[22m[39m
2025-02-27T19:42:08.7969861Z      [90m 156 |[39m       }
2025-02-27T19:42:08.7970391Z      [90m 157 |[39m     })[33m;[39m
2025-02-27T19:42:08.7971041Z      [90m 158 |[39m   }[0m
2025-02-27T19:42:08.7971314Z 
2025-02-27T19:42:08.7971994Z       at src/systems/resourceManager.ts:155:36
2025-02-27T19:42:08.7973068Z           at Array.forEach (<anonymous>)
2025-02-27T19:42:08.7975353Z       at ResourceManager.initializeResources (src/systems/resourceManager.ts:153:38)
2025-02-27T19:42:08.7977032Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:54:23)
2025-02-27T19:42:08.7977632Z 
2025-02-27T19:42:08.7979589Z   ● ResourceManager › updateResources › updates resource amounts based on perSecond rates and elapsed time
2025-02-27T19:42:08.7980374Z 
2025-02-27T19:42:08.7980863Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:42:08.7981306Z 
2025-02-27T19:42:08.7981578Z     [0m [90m 178 |[39m     
2025-02-27T19:42:08.7983473Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:42:08.7990349Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:42:08.7992012Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:42:08.7992560Z      [90m 181 |[39m     
2025-02-27T19:42:08.7993114Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:42:08.7994208Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:42:08.7994524Z 
2025-02-27T19:42:08.7995783Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:42:08.7997871Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:105:23)
2025-02-27T19:42:08.7998295Z 
2025-02-27T19:42:08.8000411Z   ● ResourceManager › calculateResourceGeneration › calculates and updates resource generation rates based on structures
2025-02-27T19:42:08.8001285Z 
2025-02-27T19:42:08.8001599Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:42:08.8002202Z         at Function.values (<anonymous>)
2025-02-27T19:42:08.8002500Z 
2025-02-27T19:42:08.8002765Z     [0m [90m 251 |[39m     
2025-02-27T19:42:08.8004096Z      [90m 252 |[39m     [90m// Add production from all structures[39m
2025-02-27T19:42:08.8008106Z     [31m[1m>[22m[39m[90m 253 |[39m     [33mObject[39m[33m.[39mvalues(structures)[33m.[39mforEach((structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:42:08.8009167Z      [90m     |[39m            [31m[1m^[22m[39m
2025-02-27T19:42:08.8011061Z      [90m 254 |[39m       [90m// Skip structures that aren't built or don't have workers assigned[39m
2025-02-27T19:42:08.8014475Z      [90m 255 |[39m       [36mif[39m ([33m![39mstructure [33m||[39m [36mtypeof[39m structure [33m!==[39m [32m'object'[39m [33m||[39m
2025-02-27T19:42:08.8018345Z      [90m 256 |[39m           [33m![39m([32m'unlocked'[39m [36min[39m structure) [33m||[39m [33m![39m([32m'level'[39m [36min[39m structure) [33m||[39m[0m
2025-02-27T19:42:08.8019048Z 
2025-02-27T19:42:08.8019671Z       at ResourceManager.calculateResourceGeneration (src/systems/resourceManager.ts:253:12)
2025-02-27T19:42:08.8021146Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:197:23)
2025-02-27T19:42:08.8021630Z 
2025-02-27T19:42:08.8023188Z   ● ResourceManager › canAfford › returns true when all resources are available and sufficient
2025-02-27T19:42:08.8023550Z 
2025-02-27T19:42:08.8024432Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:42:08.8024922Z 
2025-02-27T19:42:08.8029022Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:42:08.8031388Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:42:08.8034296Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:42:08.8035723Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.8041093Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:42:08.8042230Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:42:08.8042819Z      [90m 346 |[39m       }[0m
2025-02-27T19:42:08.8043070Z 
2025-02-27T19:42:08.8048355Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:42:08.8050074Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:256:38)
2025-02-27T19:42:08.8050497Z 
2025-02-27T19:42:08.8052357Z   ● ResourceManager › canAfford › returns false when any resource is insufficient
2025-02-27T19:42:08.8052814Z 
2025-02-27T19:42:08.8053941Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:42:08.8054430Z 
2025-02-27T19:42:08.8058287Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:42:08.8060595Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:42:08.8063727Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:42:08.8064807Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.8069899Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:42:08.8070949Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:42:08.8071795Z      [90m 346 |[39m       }[0m
2025-02-27T19:42:08.8072044Z 
2025-02-27T19:42:08.8073740Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:42:08.8075170Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:297:38)
2025-02-27T19:42:08.8075584Z 
2025-02-27T19:42:08.8077714Z   ● ResourceManager › canAfford › returns false when any resource is not unlocked
2025-02-27T19:42:08.8078198Z 
2025-02-27T19:42:08.8079226Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:42:08.8079723Z 
2025-02-27T19:42:08.8083355Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:42:08.8085690Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:42:08.8088628Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:42:08.8089937Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.8094871Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:42:08.8096063Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:42:08.8096808Z      [90m 346 |[39m       }[0m
2025-02-27T19:42:08.8097066Z 
2025-02-27T19:42:08.8098718Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:42:08.8100655Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:338:38)
2025-02-27T19:42:08.8101083Z 
2025-02-27T19:42:08.8102688Z   ● ResourceManager › canAfford › returns false when any resource is missing
2025-02-27T19:42:08.8103150Z 
2025-02-27T19:42:08.8104303Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:42:08.8104802Z 
2025-02-27T19:42:08.8108533Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:42:08.8110765Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:42:08.8113580Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:42:08.8114973Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.8120076Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:42:08.8121187Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:42:08.8121850Z      [90m 346 |[39m       }[0m
2025-02-27T19:42:08.8122109Z 
2025-02-27T19:42:08.8123856Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:42:08.8125659Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:369:38)
2025-02-27T19:42:08.8126337Z 
2025-02-27T19:42:08.8128862Z   ● ResourceManager › applyResourceCost › dispatches addResourceAmount with negative values for each cost
2025-02-27T19:42:08.8129465Z 
2025-02-27T19:42:08.8130261Z     TypeError: Cannot read properties of undefined (reading 'test-resource-1')
2025-02-27T19:42:08.8130754Z 
2025-02-27T19:42:08.8134622Z     [0m [90m 341 |[39m     [36mfor[39m ([36mconst[39m [resourceId[33m,[39m amount] [36mof[39m [33mObject[39m[33m.[39mentries(costs)) {
2025-02-27T19:42:08.8136868Z      [90m 342 |[39m       [90m// The resource must exist, be unlocked, and have sufficient amount[39m
2025-02-27T19:42:08.8139733Z     [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m resource [33m=[39m resources[resourceId][33m;[39m
2025-02-27T19:42:08.8141042Z      [90m     |[39m                                 [31m[1m^[22m[39m
2025-02-27T19:42:08.8146163Z      [90m 344 |[39m       [36mif[39m ([33m![39mresource [33m||[39m [33m![39mresource[33m.[39munlocked [33m||[39m resource[33m.[39mamount [33m<[39m amount) {
2025-02-27T19:42:08.8148030Z      [90m 345 |[39m         [36mreturn[39m [36mfalse[39m[33m;[39m
2025-02-27T19:42:08.8148640Z      [90m 346 |[39m       }[0m
2025-02-27T19:42:08.8148901Z 
2025-02-27T19:42:08.8149309Z       at ResourceManager.canAfford (src/systems/resourceManager.ts:343:33)
2025-02-27T19:42:08.8150279Z       at ResourceManager.applyResourceCost (src/systems/resourceManager.ts:363:15)
2025-02-27T19:42:08.8151140Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:415:38)
2025-02-27T19:42:08.8151399Z 
2025-02-27T19:42:08.8153166Z   ● ResourceManager › unlockResource › unlocks a locked resource and returns true
2025-02-27T19:42:08.8153693Z 
2025-02-27T19:42:08.8154323Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:42:08.8154793Z 
2025-02-27T19:42:08.8156180Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:42:08.8158800Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8161580Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:42:08.8162683Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:42:08.8163219Z      [90m 386 |[39m     
2025-02-27T19:42:08.8165733Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:42:08.8168057Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8168568Z 
2025-02-27T19:42:08.8169350Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:42:08.8170765Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:462:38)
2025-02-27T19:42:08.8171196Z 
2025-02-27T19:42:08.8172778Z   ● ResourceManager › unlockResource › returns false for already unlocked resources
2025-02-27T19:42:08.8173295Z 
2025-02-27T19:42:08.8174159Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:42:08.8174620Z 
2025-02-27T19:42:08.8176652Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:42:08.8178995Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8181821Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:42:08.8182965Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:42:08.8183490Z      [90m 386 |[39m     
2025-02-27T19:42:08.8186209Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:42:08.8188546Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8188998Z 
2025-02-27T19:42:08.8189669Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:42:08.8191239Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:499:38)
2025-02-27T19:42:08.8191663Z 
2025-02-27T19:42:08.8193412Z   ● ResourceManager › unlockResource › returns false for non-existent resources
2025-02-27T19:42:08.8193824Z 
2025-02-27T19:42:08.8194660Z     TypeError: Cannot read properties of undefined (reading 'non-existent')
2025-02-27T19:42:08.8195158Z 
2025-02-27T19:42:08.8197119Z     [0m [90m 383 |[39m   unlockResource(resourceId[33m:[39m string)[33m:[39m boolean {
2025-02-27T19:42:08.8199450Z      [90m 384 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8202426Z     [31m[1m>[22m[39m[90m 385 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:42:08.8203628Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:42:08.8204267Z      [90m 386 |[39m     
2025-02-27T19:42:08.8207058Z      [90m 387 |[39m     [90m// Can't unlock a resource that doesn't exist or is already unlocked[39m
2025-02-27T19:42:08.8209508Z      [90m 388 |[39m     [36mif[39m ([33m![39mresource [33m||[39m resource[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8209951Z 
2025-02-27T19:42:08.8210799Z       at ResourceManager.unlockResource (src/systems/resourceManager.ts:385:37)
2025-02-27T19:42:08.8212250Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:527:38)
2025-02-27T19:42:08.8212680Z 
2025-02-27T19:42:08.8215335Z   ● ResourceManager › addResourceAmount and setResourceAmount › addResourceAmount adds to existing resource
2025-02-27T19:42:08.8216201Z 
2025-02-27T19:42:08.8216763Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:42:08.8217260Z 
2025-02-27T19:42:08.8220022Z     [0m [90m 407 |[39m   addResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:42:08.8222090Z      [90m 408 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8225136Z     [31m[1m>[22m[39m[90m 409 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:42:08.8226578Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:42:08.8227529Z      [90m 410 |[39m     
2025-02-27T19:42:08.8229195Z      [90m 411 |[39m     [90m// Can't add to a resource that doesn't exist[39m
2025-02-27T19:42:08.8231595Z      [90m 412 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:42:08.8231974Z 
2025-02-27T19:42:08.8232429Z       at ResourceManager.addResourceAmount (src/systems/resourceManager.ts:409:37)
2025-02-27T19:42:08.8233280Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:560:38)
2025-02-27T19:42:08.8234811Z 
2025-02-27T19:42:08.8235694Z   ● ResourceManager › addResourceAmount and setResourceAmount › setResourceAmount sets absolute value for resource
2025-02-27T19:42:08.8236531Z 
2025-02-27T19:42:08.8236817Z     TypeError: Cannot read properties of undefined (reading 'test-resource')
2025-02-27T19:42:08.8237305Z 
2025-02-27T19:42:08.8238020Z     [0m [90m 431 |[39m   setResourceAmount(resourceId[33m:[39m string[33m,[39m amount[33m:[39m number)[33m:[39m boolean {
2025-02-27T19:42:08.8238745Z      [90m 432 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8240839Z     [31m[1m>[22m[39m[90m 433 |[39m     [36mconst[39m resource [33m=[39m state[33m.[39mresources[resourceId][33m;[39m
2025-02-27T19:42:08.8241880Z      [90m     |[39m                                     [31m[1m^[22m[39m
2025-02-27T19:42:08.8242430Z      [90m 434 |[39m     
2025-02-27T19:42:08.8243107Z      [90m 435 |[39m     [90m// Can't set a resource that doesn't exist[39m
2025-02-27T19:42:08.8243877Z      [90m 436 |[39m     [36mif[39m ([33m![39mresource) {[0m
2025-02-27T19:42:08.8244241Z 
2025-02-27T19:42:08.8244723Z       at ResourceManager.setResourceAmount (src/systems/resourceManager.ts:433:37)
2025-02-27T19:42:08.8245604Z       at Object.<anonymous> (src/systems/resourceManager.test.ts:598:38)
2025-02-27T19:42:08.8246084Z 
2025-02-27T19:42:08.8266459Z FAIL src/systems/__tests__/workerManager.test.ts (9.394 s)
2025-02-27T19:42:08.8268092Z   ● WorkerManager › Worker counting › should get total available workers based on game stage
2025-02-27T19:42:08.8268664Z 
2025-02-27T19:42:08.8269227Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:42:08.8269707Z 
2025-02-27T19:42:08.8271566Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:42:08.8272489Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:42:08.8276154Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:42:08.8277269Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:42:08.8277812Z      [90m 145 |[39m   }
2025-02-27T19:42:08.8278243Z      [90m 146 |[39m   
2025-02-27T19:42:08.8278712Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:42:08.8279006Z 
2025-02-27T19:42:08.8280734Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:42:08.8281682Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:89:28)
2025-02-27T19:42:08.8282310Z 
2025-02-27T19:42:08.8283517Z   ● WorkerManager › Worker counting › should get total assigned workers
2025-02-27T19:42:08.8283979Z 
2025-02-27T19:42:08.8284320Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:42:08.8285201Z         at Function.values (<anonymous>)
2025-02-27T19:42:08.8285487Z 
2025-02-27T19:42:08.8288765Z     [0m [90m 153 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8289491Z      [90m 154 |[39m     
2025-02-27T19:42:08.8292579Z     [31m[1m>[22m[39m[90m 155 |[39m     [36mreturn[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mreduce(
2025-02-27T19:42:08.8293451Z      [90m     |[39m                   [31m[1m^[22m[39m
2025-02-27T19:42:08.8296204Z      [90m 156 |[39m       (total[33m:[39m number[33m,[39m structure[33m:[39m unknown) [33m=>[39m {
2025-02-27T19:42:08.8300966Z      [90m 157 |[39m         [36mif[39m (structure [33m&&[39m [36mtypeof[39m structure [33m===[39m [32m'object'[39m [33m&&[39m [32m'workers'[39m [36min[39m structure [33m&&[39m 
2025-02-27T19:42:08.8303148Z      [90m 158 |[39m             [36mtypeof[39m structure[33m.[39mworkers [33m===[39m [32m'number'[39m) {[0m
2025-02-27T19:42:08.8303657Z 
2025-02-27T19:42:08.8304653Z       at WorkerManager.getTotalAssignedWorkers (src/systems/workerManager.ts:155:19)
2025-02-27T19:42:08.8306711Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:102:28)
2025-02-27T19:42:08.8307173Z 
2025-02-27T19:42:08.8308341Z   ● WorkerManager › Worker counting › should get remaining workers correctly
2025-02-27T19:42:08.8308804Z 
2025-02-27T19:42:08.8309800Z     TypeError: Cannot read properties of undefined (reading 'gameStage')
2025-02-27T19:42:08.8310248Z 
2025-02-27T19:42:08.8312424Z     [0m [90m 142 |[39m     [90m// Available workers are determined by current game stage[39m
2025-02-27T19:42:08.8313655Z      [90m 143 |[39m     [90m// 5 base workers + 3 per game stage[39m
2025-02-27T19:42:08.8318213Z     [31m[1m>[22m[39m[90m 144 |[39m     [36mreturn[39m [35m5[39m [33m+[39m (state[33m.[39mgame[33m.[39mgameStage [33m*[39m [35m3[39m)[33m;[39m
2025-02-27T19:42:08.8319044Z      [90m     |[39m                            [31m[1m^[22m[39m
2025-02-27T19:42:08.8319556Z      [90m 145 |[39m   }
2025-02-27T19:42:08.8319932Z      [90m 146 |[39m   
2025-02-27T19:42:08.8320965Z      [90m 147 |[39m   [90m/**[39m[0m
2025-02-27T19:42:08.8321244Z 
2025-02-27T19:42:08.8323286Z       at WorkerManager.getTotalAvailableWorkers (src/systems/workerManager.ts:144:28)
2025-02-27T19:42:08.8324751Z       at WorkerManager.getRemainingWorkers (src/systems/workerManager.ts:172:17)
2025-02-27T19:42:08.8326893Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:118:28)
2025-02-27T19:42:08.8327366Z 
2025-02-27T19:42:08.8328543Z   ● WorkerManager › Worker assignment › should assign workers to buildings
2025-02-27T19:42:08.8329015Z 
2025-02-27T19:42:08.8329777Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8330223Z 
2025-02-27T19:42:08.8330450Z     [0m [90m 190 |[39m     
2025-02-27T19:42:08.8333401Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8336513Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8337757Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8338277Z      [90m 193 |[39m     
2025-02-27T19:42:08.8339893Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8351059Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8351669Z 
2025-02-27T19:42:08.8352301Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:42:08.8353199Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:137:36)
2025-02-27T19:42:08.8353503Z 
2025-02-27T19:42:08.8354364Z   ● WorkerManager › Worker assignment › should limit assignment to available workers
2025-02-27T19:42:08.8354893Z 
2025-02-27T19:42:08.8355171Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8355511Z 
2025-02-27T19:42:08.8355989Z     [0m [90m 190 |[39m     
2025-02-27T19:42:08.8356736Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8357717Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8358541Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8358880Z      [90m 193 |[39m     
2025-02-27T19:42:08.8359447Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8360183Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8360556Z 
2025-02-27T19:42:08.8361160Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:42:08.8362090Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:148:21)
2025-02-27T19:42:08.8362553Z 
2025-02-27T19:42:08.8363072Z   ● WorkerManager › Worker assignment › should limit assignment to maxWorkers
2025-02-27T19:42:08.8363546Z 
2025-02-27T19:42:08.8364147Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8364606Z 
2025-02-27T19:42:08.8364838Z     [0m [90m 190 |[39m     
2025-02-27T19:42:08.8367643Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8370408Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8371508Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8372022Z      [90m 193 |[39m     
2025-02-27T19:42:08.8373290Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8375167Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8375552Z 
2025-02-27T19:42:08.8376827Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:42:08.8378505Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:159:21)
2025-02-27T19:42:08.8379192Z 
2025-02-27T19:42:08.8380217Z   ● WorkerManager › Worker assignment › should handle nonexistent building
2025-02-27T19:42:08.8380676Z 
2025-02-27T19:42:08.8381581Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:42:08.8382143Z 
2025-02-27T19:42:08.8382382Z     [0m [90m 190 |[39m     
2025-02-27T19:42:08.8384702Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8387631Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8388766Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8389397Z      [90m 193 |[39m     
2025-02-27T19:42:08.8390517Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8392429Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8392807Z 
2025-02-27T19:42:08.8393954Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:42:08.8395515Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:169:36)
2025-02-27T19:42:08.8396121Z 
2025-02-27T19:42:08.8397261Z   ● WorkerManager › Changing worker count › should add workers by delta
2025-02-27T19:42:08.8397908Z 
2025-02-27T19:42:08.8398673Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8399111Z 
2025-02-27T19:42:08.8399367Z     [0m [90m 234 |[39m     
2025-02-27T19:42:08.8401919Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8404693Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8406022Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8406558Z      [90m 237 |[39m     
2025-02-27T19:42:08.8407955Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8409721Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8410093Z 
2025-02-27T19:42:08.8411120Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:42:08.8412956Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:189:21)
2025-02-27T19:42:08.8413454Z 
2025-02-27T19:42:08.8414461Z   ● WorkerManager › Changing worker count › should remove workers by delta
2025-02-27T19:42:08.8414915Z 
2025-02-27T19:42:08.8415741Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8416430Z 
2025-02-27T19:42:08.8416677Z     [0m [90m 234 |[39m     
2025-02-27T19:42:08.8418951Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8421873Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8423004Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8423622Z      [90m 237 |[39m     
2025-02-27T19:42:08.8424787Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8426705Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8427082Z 
2025-02-27T19:42:08.8428157Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:42:08.8429991Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:210:21)
2025-02-27T19:42:08.8430457Z 
2025-02-27T19:42:08.8431816Z   ● WorkerManager › Changing worker count › should limit addition by available workers
2025-02-27T19:42:08.8432262Z 
2025-02-27T19:42:08.8433141Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8433693Z 
2025-02-27T19:42:08.8434143Z     [0m [90m 234 |[39m     
2025-02-27T19:42:08.8436361Z      [90m 235 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8439134Z     [31m[1m>[22m[39m[90m 236 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8440285Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8440921Z      [90m 237 |[39m     
2025-02-27T19:42:08.8442131Z      [90m 238 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8443968Z      [90m 239 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.8444327Z 
2025-02-27T19:42:08.8445308Z       at WorkerManager.changeWorkerCount (src/systems/workerManager.ts:236:38)
2025-02-27T19:42:08.8447319Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:231:21)
2025-02-27T19:42:08.8447784Z 
2025-02-27T19:42:08.8448952Z   ● WorkerManager › Worker efficiency › should calculate worker efficiency correctly
2025-02-27T19:42:08.8449478Z 
2025-02-27T19:42:08.8450207Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.8450663Z 
2025-02-27T19:42:08.8450893Z     [0m [90m 287 |[39m     
2025-02-27T19:42:08.8453672Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8456721Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8457698Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8458204Z      [90m 290 |[39m     
2025-02-27T19:42:08.8461356Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:42:08.8462534Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:42:08.8462908Z 
2025-02-27T19:42:08.8464511Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:42:08.8466155Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:246:28)
2025-02-27T19:42:08.8466615Z 
2025-02-27T19:42:08.8468406Z   ● WorkerManager › Worker efficiency › should handle nonexistent building for efficiency
2025-02-27T19:42:08.8468865Z 
2025-02-27T19:42:08.8469614Z     TypeError: Cannot read properties of undefined (reading 'nonexistent')
2025-02-27T19:42:08.8470189Z 
2025-02-27T19:42:08.8470427Z     [0m [90m 287 |[39m     
2025-02-27T19:42:08.8473063Z      [90m 288 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8475795Z     [31m[1m>[22m[39m[90m 289 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8477263Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8477912Z      [90m 290 |[39m     
2025-02-27T19:42:08.8481133Z      [90m 291 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m building[33m.[39mworkers [33m===[39m [35m0[39m) {
2025-02-27T19:42:08.8482080Z      [90m 292 |[39m       [36mreturn[39m [35m0[39m[33m;[39m[0m
2025-02-27T19:42:08.8482432Z 
2025-02-27T19:42:08.8484285Z       at WorkerManager.calculateWorkerEfficiency (src/systems/workerManager.ts:289:38)
2025-02-27T19:42:08.8486049Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:283:28)
2025-02-27T19:42:08.8486515Z 
2025-02-27T19:42:08.8488069Z   ● WorkerManager › Auto-assignment › should auto-assign with balanced strategy
2025-02-27T19:42:08.8488567Z 
2025-02-27T19:42:08.8488965Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:42:08.8489849Z         at Function.values (<anonymous>)
2025-02-27T19:42:08.8490132Z 
2025-02-27T19:42:08.8490382Z     [0m [90m 318 |[39m     
2025-02-27T19:42:08.8493704Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8499302Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:42:08.8500650Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:42:08.8501713Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:42:08.8504200Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:42:08.8505664Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:42:08.8506204Z 
2025-02-27T19:42:08.8507486Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:42:08.8509400Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:290:21)
2025-02-27T19:42:08.8509868Z 
2025-02-27T19:42:08.8510923Z   ● WorkerManager › Auto-assignment › should auto-assign with focused strategy
2025-02-27T19:42:08.8511394Z 
2025-02-27T19:42:08.8511969Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:42:08.8512885Z         at Function.values (<anonymous>)
2025-02-27T19:42:08.8513391Z 
2025-02-27T19:42:08.8513647Z     [0m [90m 318 |[39m     
2025-02-27T19:42:08.8516442Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8520977Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:42:08.8522314Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:42:08.8523334Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:42:08.8525795Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:42:08.8527667Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:42:08.8528044Z 
2025-02-27T19:42:08.8529132Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:42:08.8531055Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:310:21)
2025-02-27T19:42:08.8531527Z 
2025-02-27T19:42:08.8532908Z   ● WorkerManager › Auto-assignment › should auto-assign with efficiency strategy
2025-02-27T19:42:08.8533399Z 
2025-02-27T19:42:08.8533874Z     TypeError: Cannot convert undefined or null to object
2025-02-27T19:42:08.8534721Z         at Function.values (<anonymous>)
2025-02-27T19:42:08.8535019Z 
2025-02-27T19:42:08.8535420Z     [0m [90m 318 |[39m     
2025-02-27T19:42:08.8538779Z      [90m 319 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState[33m![39m()[33m;[39m
2025-02-27T19:42:08.8544414Z     [31m[1m>[22m[39m[90m 320 |[39m     [36mconst[39m buildings [33m=[39m [33mObject[39m[33m.[39mvalues(state[33m.[39mstructures)[33m.[39mfilter((b[33m:[39m unknown)[33m:[39m b is [33mStructure[39m [33m=>[39m {
2025-02-27T19:42:08.8545649Z      [90m     |[39m                              [31m[1m^[22m[39m
2025-02-27T19:42:08.8547022Z      [90m 321 |[39m       [36mreturn[39m b [33m!==[39m undefined [33m&&[39m 
2025-02-27T19:42:08.8549580Z      [90m 322 |[39m              [36mtypeof[39m b [33m===[39m [32m'object'[39m [33m&&[39m 
2025-02-27T19:42:08.8551195Z      [90m 323 |[39m              b [33m!==[39m [36mnull[39m [33m&&[39m [0m
2025-02-27T19:42:08.8551565Z 
2025-02-27T19:42:08.8552958Z       at WorkerManager.autoAssignWorkers (src/systems/workerManager.ts:320:30)
2025-02-27T19:42:08.8555000Z       at Object.<anonymous> (src/systems/__tests__/workerManager.test.ts:331:21)
2025-02-27T19:42:08.8555436Z 
2025-02-27T19:42:08.8556454Z FAIL src/systems/__tests__/buildingManager.test.ts
2025-02-27T19:42:08.8558619Z   ● BuildingManager › initialization › should initialize a building
2025-02-27T19:42:08.8559169Z 
2025-02-27T19:42:08.8559473Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:42:08.8559964Z 
2025-02-27T19:42:08.8560313Z     [0m [90m 139 |[39m     }
2025-02-27T19:42:08.8560738Z      [90m 140 |[39m     
2025-02-27T19:42:08.8564621Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:42:08.8565414Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:42:08.8566151Z      [90m 142 |[39m   }
2025-02-27T19:42:08.8566552Z      [90m 143 |[39m   
2025-02-27T19:42:08.8567509Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:42:08.8567801Z 
2025-02-27T19:42:08.8569893Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:42:08.8571365Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:73:23)
2025-02-27T19:42:08.8571836Z 
2025-02-27T19:42:08.8573113Z   ● BuildingManager › initialization › should initialize multiple buildings
2025-02-27T19:42:08.8573771Z 
2025-02-27T19:42:08.8574183Z     TypeError: this.actions.addStructure is not a function
2025-02-27T19:42:08.8574565Z 
2025-02-27T19:42:08.8574817Z     [0m [90m 139 |[39m     }
2025-02-27T19:42:08.8575275Z      [90m 140 |[39m     
2025-02-27T19:42:08.8579861Z     [31m[1m>[22m[39m[90m 141 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39maddStructure(building))[33m;[39m
2025-02-27T19:42:08.8580799Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:42:08.8581302Z      [90m 142 |[39m   }
2025-02-27T19:42:08.8581691Z      [90m 143 |[39m   
2025-02-27T19:42:08.8582720Z      [90m 144 |[39m   [90m/**[39m[0m
2025-02-27T19:42:08.8583015Z 
2025-02-27T19:42:08.8584779Z       at BuildingManager.initializeBuilding (src/systems/buildingManager.ts:141:32)
2025-02-27T19:42:08.8585628Z       at src/systems/buildingManager.ts:153:40
2025-02-27T19:42:08.8586364Z           at Array.forEach (<anonymous>)
2025-02-27T19:42:08.8588692Z       at BuildingManager.initializeBuildings (src/systems/buildingManager.ts:153:15)
2025-02-27T19:42:08.8590330Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:108:23)
2025-02-27T19:42:08.8590817Z 
2025-02-27T19:42:08.8592997Z   ● BuildingManager › purchase validation › should correctly validate if player can afford a building
2025-02-27T19:42:08.8593460Z 
2025-02-27T19:42:08.8594125Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:42:08.8594698Z 
2025-02-27T19:42:08.8594938Z     [0m [90m 165 |[39m     
2025-02-27T19:42:08.8597599Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8600499Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8601718Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8602379Z      [90m 168 |[39m     
2025-02-27T19:42:08.8604767Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:42:08.8609661Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8610208Z 
2025-02-27T19:42:08.8617103Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:42:08.8618068Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:160:39)
2025-02-27T19:42:08.8618567Z 
2025-02-27T19:42:08.8619441Z   ● BuildingManager › purchase validation › should return false for non-existent buildings
2025-02-27T19:42:08.8620009Z 
2025-02-27T19:42:08.8620414Z     TypeError: Cannot read properties of undefined (reading 'non_existent')
2025-02-27T19:42:08.8620853Z 
2025-02-27T19:42:08.8621101Z     [0m [90m 165 |[39m     
2025-02-27T19:42:08.8621906Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8623103Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8624041Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8624547Z      [90m 168 |[39m     
2025-02-27T19:42:08.8625293Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:42:08.8627459Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8627994Z 
2025-02-27T19:42:08.8628489Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:42:08.8629808Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:193:38)
2025-02-27T19:42:08.8630294Z 
2025-02-27T19:42:08.8631738Z   ● BuildingManager › purchase validation › should return false for locked buildings
2025-02-27T19:42:08.8632386Z 
2025-02-27T19:42:08.8633291Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:42:08.8633764Z 
2025-02-27T19:42:08.8634015Z     [0m [90m 165 |[39m     
2025-02-27T19:42:08.8636644Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8639359Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8640448Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8640969Z      [90m 168 |[39m     
2025-02-27T19:42:08.8643351Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:42:08.8646031Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:42:08.8646473Z 
2025-02-27T19:42:08.8647306Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:42:08.8649127Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:226:38)
2025-02-27T19:42:08.8649618Z 
2025-02-27T19:42:08.8650925Z   ● BuildingManager › purchasing › should purchase a building and deduct resources
2025-02-27T19:42:08.8651387Z 
2025-02-27T19:42:08.8652247Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:42:08.8652815Z 
2025-02-27T19:42:08.8653048Z     [0m [90m 197 |[39m     
2025-02-27T19:42:08.8655301Z      [90m 198 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8658242Z     [31m[1m>[22m[39m[90m 199 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8659347Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8659995Z      [90m 200 |[39m     
2025-02-27T19:42:08.8660956Z      [90m 201 |[39m     [90m// Deduct resources[39m
2025-02-27T19:42:08.8665019Z      [90m 202 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mdeductResources(building[33m.[39mcost))[33m;[39m[0m
2025-02-27T19:42:08.8665594Z 
2025-02-27T19:42:08.8666206Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:199:38)
2025-02-27T19:42:08.8667739Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:273:38)
2025-02-27T19:42:08.8668220Z 
2025-02-27T19:42:08.8671097Z   ● BuildingManager › production calculation › should correctly calculate production based on level and workers
2025-02-27T19:42:08.8671841Z 
2025-02-27T19:42:08.8672263Z     TypeError: Cannot read properties of undefined (reading 'test_building')
2025-02-27T19:42:08.8672744Z 
2025-02-27T19:42:08.8672984Z     [0m [90m 222 |[39m     
2025-02-27T19:42:08.8674624Z      [90m 223 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.8677845Z     [31m[1m>[22m[39m[90m 224 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.8678989Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8679497Z      [90m 225 |[39m     
2025-02-27T19:42:08.8680888Z      [90m 226 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.8681970Z      [90m 227 |[39m       [36mreturn[39m[33m;[39m[0m
2025-02-27T19:42:08.8682285Z 
2025-02-27T19:42:08.8684020Z       at BuildingManager.recalculateProduction (src/systems/buildingManager.ts:224:38)
2025-02-27T19:42:08.8685439Z       at Object.<anonymous> (src/systems/__tests__/buildingManager.test.ts:329:23)
2025-02-27T19:42:08.8686071Z 
2025-02-27T19:42:08.8686980Z FAIL src/systems/__tests__/saveManager.test.ts
2025-02-27T19:42:08.8688873Z   ● SaveManager › loadGame › should dispatch actions to restore game state
2025-02-27T19:42:08.8689600Z 
2025-02-27T19:42:08.8689889Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8690263Z 
2025-02-27T19:42:08.8690393Z     Expected: true
2025-02-27T19:42:08.8690698Z     Received: false
2025-02-27T19:42:08.8690894Z 
2025-02-27T19:42:08.8691131Z     [0m [90m 178 |[39m       
2025-02-27T19:42:08.8692181Z      [90m 179 |[39m       [90m// Assert[39m
2025-02-27T19:42:08.8694718Z     [31m[1m>[22m[39m[90m 180 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8695690Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8696337Z      [90m 181 |[39m       
2025-02-27T19:42:08.8698268Z      [90m 182 |[39m       [90m// Verify reset actions were dispatched[39m
2025-02-27T19:42:08.8700987Z      [90m 183 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({[0m
2025-02-27T19:42:08.8701445Z 
2025-02-27T19:42:08.8702095Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:180:22)
2025-02-27T19:42:08.8702545Z 
2025-02-27T19:42:08.8703979Z   ● SaveManager › resetGame › should dispatch reset actions for all state slices
2025-02-27T19:42:08.8704473Z 
2025-02-27T19:42:08.8704748Z     TypeError: this.actions.resetGame is not a function
2025-02-27T19:42:08.8705145Z 
2025-02-27T19:42:08.8706964Z     [0m [90m 217 |[39m     [36mthis[39m[33m.[39mensureInitialized()[33m;[39m
2025-02-27T19:42:08.8707561Z      [90m 218 |[39m     
2025-02-27T19:42:08.8710923Z     [31m[1m>[22m[39m[90m 219 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetGame())[33m;[39m
2025-02-27T19:42:08.8711717Z      [90m     |[39m                                [31m[1m^[22m[39m
2025-02-27T19:42:08.8714998Z      [90m 220 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetResources())[33m;[39m
2025-02-27T19:42:08.8717852Z      [90m 221 |[39m     [36mthis[39m[33m.[39mdispatch([36mthis[39m[33m.[39mactions[33m.[39mresetStructures())[33m;[39m
2025-02-27T19:42:08.8718544Z      [90m 222 |[39m   }[0m
2025-02-27T19:42:08.8718698Z 
2025-02-27T19:42:08.8719289Z       at SaveManager.resetGame (src/systems/saveManager.ts:219:32)
2025-02-27T19:42:08.8721146Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:243:19)
2025-02-27T19:42:08.8721604Z 
2025-02-27T19:42:08.8722797Z   ● SaveManager › deleteSaveAndReset › should delete the save and reset the game
2025-02-27T19:42:08.8723247Z 
2025-02-27T19:42:08.8723974Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8724343Z 
2025-02-27T19:42:08.8724477Z     Expected: true
2025-02-27T19:42:08.8724781Z     Received: false
2025-02-27T19:42:08.8724966Z 
2025-02-27T19:42:08.8725206Z     [0m [90m 265 |[39m       
2025-02-27T19:42:08.8726507Z      [90m 266 |[39m       [90m// Assert[39m
2025-02-27T19:42:08.8729027Z     [31m[1m>[22m[39m[90m 267 |[39m       expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8729933Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8732599Z      [90m 268 |[39m       expect(saveUtils[33m.[39mdeleteSave)[33m.[39mtoHaveBeenCalled()[33m;[39m
2025-02-27T19:42:08.8735071Z      [90m 269 |[39m       expect(mockDispatch)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8737445Z      [90m 270 |[39m         type[33m:[39m expect[33m.[39mstringContaining([32m'game/resetGame'[39m)[0m
2025-02-27T19:42:08.8737880Z 
2025-02-27T19:42:08.8738648Z       at Object.<anonymous> (src/systems/__tests__/saveManager.test.ts:267:22)
2025-02-27T19:42:08.8739103Z 
2025-02-27T19:42:08.8739824Z FAIL src/integration/tasks.integration.test.ts
2025-02-27T19:42:08.8741791Z   ● Task System Integration › should start a task when requirements are met
2025-02-27T19:42:08.8742235Z 
2025-02-27T19:42:08.8742526Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8743089Z 
2025-02-27T19:42:08.8743216Z     Expected: true
2025-02-27T19:42:08.8743523Z     Received: false
2025-02-27T19:42:08.8743715Z 
2025-02-27T19:42:08.8746959Z     [0m [90m 151 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mstartTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8747590Z      [90m 152 |[39m     
2025-02-27T19:42:08.8749327Z     [31m[1m>[22m[39m[90m 153 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8750251Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:42:08.8752431Z      [90m 154 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:42:08.8753422Z      [90m 155 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8755448Z      [90m 156 |[39m         type[33m:[39m [32m'tasks/startTask'[39m[33m,[39m[0m
2025-02-27T19:42:08.8755989Z 
2025-02-27T19:42:08.8756972Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:153:20)
2025-02-27T19:42:08.8758040Z 
2025-02-27T19:42:08.8758523Z   ● Task System Integration › should check if task requirements are met
2025-02-27T19:42:08.8758965Z 
2025-02-27T19:42:08.8759514Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8759871Z 
2025-02-27T19:42:08.8759999Z     Expected: true
2025-02-27T19:42:08.8760304Z     Received: false
2025-02-27T19:42:08.8760488Z 
2025-02-27T19:42:08.8763755Z     [0m [90m 188 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39munlockTask([32m'locked-task'[39m)[33m;[39m
2025-02-27T19:42:08.8764391Z      [90m 189 |[39m     
2025-02-27T19:42:08.8766218Z     [31m[1m>[22m[39m[90m 190 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8767115Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:42:08.8769314Z      [90m 191 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:42:08.8770337Z      [90m 192 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8772374Z      [90m 193 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:42:08.8772788Z 
2025-02-27T19:42:08.8773750Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:190:20)
2025-02-27T19:42:08.8774210Z 
2025-02-27T19:42:08.8775177Z   ● Task System Integration › should complete an in-progress task
2025-02-27T19:42:08.8775575Z 
2025-02-27T19:42:08.8776315Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8776898Z 
2025-02-27T19:42:08.8777047Z     Expected: true
2025-02-27T19:42:08.8777358Z     Received: false
2025-02-27T19:42:08.8777542Z 
2025-02-27T19:42:08.8780603Z     [0m [90m 214 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcompleteTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8781230Z      [90m 215 |[39m     
2025-02-27T19:42:08.8782941Z     [31m[1m>[22m[39m[90m 216 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8783784Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:42:08.8786123Z      [90m 217 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:42:08.8787166Z      [90m 218 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8789304Z      [90m 219 |[39m         type[33m:[39m [32m'tasks/completeTask'[39m[33m,[39m[0m
2025-02-27T19:42:08.8789715Z 
2025-02-27T19:42:08.8790728Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:216:20)
2025-02-27T19:42:08.8791193Z 
2025-02-27T19:42:08.8792006Z   ● Task System Integration › should cancel an in-progress task
2025-02-27T19:42:08.8792394Z 
2025-02-27T19:42:08.8792995Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8793351Z 
2025-02-27T19:42:08.8793482Z     Expected: true
2025-02-27T19:42:08.8793781Z     Received: false
2025-02-27T19:42:08.8794166Z 
2025-02-27T19:42:08.8797345Z     [0m [90m 240 |[39m     [36mconst[39m result [33m=[39m taskManager[33m.[39mcancelTask([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8797971Z      [90m 241 |[39m     
2025-02-27T19:42:08.8799723Z     [31m[1m>[22m[39m[90m 242 |[39m     expect(result)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
2025-02-27T19:42:08.8800583Z      [90m     |[39m                    [31m[1m^[22m[39m
2025-02-27T19:42:08.8802777Z      [90m 243 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:42:08.8803784Z      [90m 244 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8805978Z      [90m 245 |[39m         type[33m:[39m [32m'tasks/cancelTask'[39m[33m,[39m[0m
2025-02-27T19:42:08.8806390Z 
2025-02-27T19:42:08.8807341Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:242:20)
2025-02-27T19:42:08.8807799Z 
2025-02-27T19:42:08.8809546Z   ● Task System Integration › should check all task requirements and unlock eligible tasks
2025-02-27T19:42:08.8810096Z 
2025-02-27T19:42:08.8810376Z     expect(received).toBe(expected) // Object.is equality
2025-02-27T19:42:08.8810730Z 
2025-02-27T19:42:08.8810853Z     Expected: 2
2025-02-27T19:42:08.8811151Z     Received: 0
2025-02-27T19:42:08.8811328Z 
2025-02-27T19:42:08.8814283Z     [0m [90m 271 |[39m     [36mconst[39m unlocked [33m=[39m taskManager[33m.[39mcheckAllTaskRequirements()[33m;[39m
2025-02-27T19:42:08.8814902Z      [90m 272 |[39m     
2025-02-27T19:42:08.8817822Z     [31m[1m>[22m[39m[90m 273 |[39m     expect(unlocked)[33m.[39mtoBe([35m2[39m)[33m;[39m [90m// Two tasks should be unlocked[39m
2025-02-27T19:42:08.8818753Z      [90m     |[39m                      [31m[1m^[22m[39m
2025-02-27T19:42:08.8820731Z      [90m 274 |[39m     expect(store[33m.[39mdispatch)[33m.[39mtoHaveBeenCalledWith(
2025-02-27T19:42:08.8821697Z      [90m 275 |[39m       expect[33m.[39mobjectContaining({
2025-02-27T19:42:08.8823761Z      [90m 276 |[39m         type[33m:[39m [32m'tasks/unlockTask'[39m[33m,[39m[0m
2025-02-27T19:42:08.8824196Z 
2025-02-27T19:42:08.8825176Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:273:22)
2025-02-27T19:42:08.8825643Z 
2025-02-27T19:42:08.8826920Z   ● Task System Integration › should emit events when task status changes
2025-02-27T19:42:08.8827379Z 
2025-02-27T19:42:08.8827792Z     expect(jest.fn()).toHaveBeenCalledWith(...expected)
2025-02-27T19:42:08.8828159Z 
2025-02-27T19:42:08.8828298Z     Expected: "test-task"
2025-02-27T19:42:08.8828531Z 
2025-02-27T19:42:08.8828922Z     Number of calls: 0
2025-02-27T19:42:08.8829142Z 
2025-02-27T19:42:08.8829376Z     [0m [90m 314 |[39m     
2025-02-27T19:42:08.8831073Z      [90m 315 |[39m     [90m// Verify events were emitted[39m
2025-02-27T19:42:08.8834193Z     [31m[1m>[22m[39m[90m 316 |[39m     expect(startedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8835049Z      [90m     |[39m                             [31m[1m^[22m[39m
2025-02-27T19:42:08.8837404Z      [90m 317 |[39m     expect(completedListener)[33m.[39mtoHaveBeenCalledWith([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8838230Z      [90m 318 |[39m   })[33m;[39m
2025-02-27T19:42:08.8838655Z      [90m 319 |[39m   [0m
2025-02-27T19:42:08.8838809Z 
2025-02-27T19:42:08.8840018Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:316:29)
2025-02-27T19:42:08.8840495Z 
2025-02-27T19:42:08.8841621Z   ● Task System Integration › should provide progress information for a task
2025-02-27T19:42:08.8842108Z 
2025-02-27T19:42:08.8842297Z     expect(received).not.toBeNull()
2025-02-27T19:42:08.8842565Z 
2025-02-27T19:42:08.8842697Z     Received: null
2025-02-27T19:42:08.8842879Z 
2025-02-27T19:42:08.8846380Z     [0m [90m 334 |[39m     [36mconst[39m progress [33m=[39m taskManager[33m.[39mgetTaskProgress([32m'test-task'[39m)[33m;[39m
2025-02-27T19:42:08.8847323Z      [90m 335 |[39m     
2025-02-27T19:42:08.8849113Z     [31m[1m>[22m[39m[90m 336 |[39m     expect(progress)[33m.[39mnot[33m.[39mtoBeNull()[33m;[39m
2025-02-27T19:42:08.8849925Z      [90m     |[39m                          [31m[1m^[22m[39m
2025-02-27T19:42:08.8851006Z      [90m 337 |[39m     expect(progress[33m?[39m[33m.[39mstatus)[33m.[39mtoBe([33mTaskStatus[39m[33m.[39m[33mIN_PROGRESS[39m)[33m;[39m
2025-02-27T19:42:08.8852966Z      [90m 338 |[39m     expect(progress[33m?[39m[33m.[39mprogress)[33m.[39mtoBe([35m50[39m)[33m;[39m
2025-02-27T19:42:08.8855800Z      [90m 339 |[39m     expect(progress[33m?[39m[33m.[39mtimeRemaining)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m
2025-02-27T19:42:08.8856405Z 
2025-02-27T19:42:08.8856983Z       at Object.<anonymous> (src/integration/tasks.integration.test.ts:336:26)
2025-02-27T19:42:08.8857455Z 
2025-02-27T19:42:08.8858375Z FAIL src/systems/__tests__/eventManager.test.ts
2025-02-27T19:42:08.8858926Z   ● Test suite failed to run
2025-02-27T19:42:08.8859162Z 
2025-02-27T19:42:08.8869815Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m65[0m:[93m42[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8871268Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8875005Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8876313Z 
2025-02-27T19:42:08.8876603Z     [7m65[0m     expect(() => eventManager.initialize(store)).not.toThrow();
2025-02-27T19:42:08.8877274Z     [7m  [0m [91m                                         ~~~~~[0m
2025-02-27T19:42:08.8877591Z 
2025-02-27T19:42:08.8878349Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8879760Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8880360Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8881083Z         'tutorial' is declared here.
2025-02-27T19:42:08.8891962Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m72[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8893826Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8899595Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8901032Z 
2025-02-27T19:42:08.8901656Z     [7m72[0m     eventManager.initialize(store);
2025-02-27T19:42:08.8902340Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.8902678Z 
2025-02-27T19:42:08.8903045Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8903804Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8904446Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8904930Z         'tutorial' is declared here.
2025-02-27T19:42:08.8911502Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m85[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8913161Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8916705Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8917709Z 
2025-02-27T19:42:08.8918064Z     [7m85[0m     eventManager.initialize(store);
2025-02-27T19:42:08.8918580Z     [7m  [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.8918886Z 
2025-02-27T19:42:08.8919218Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8920376Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8920972Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8921720Z         'tutorial' is declared here.
2025-02-27T19:42:08.8932578Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m113[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8934001Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8938008Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8939077Z 
2025-02-27T19:42:08.8939418Z     [7m113[0m     eventManager.initialize(store);
2025-02-27T19:42:08.8939929Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.8940244Z 
2025-02-27T19:42:08.8940576Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8941725Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8942329Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8943811Z         'tutorial' is declared here.
2025-02-27T19:42:08.8951401Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m131[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8952879Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8956489Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8957462Z 
2025-02-27T19:42:08.8957811Z     [7m131[0m     eventManager.initialize(store);
2025-02-27T19:42:08.8958360Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.8958644Z 
2025-02-27T19:42:08.8958982Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8960265Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8960870Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8961658Z         'tutorial' is declared here.
2025-02-27T19:42:08.8972516Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m165[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8974132Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8977873Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.8978916Z 
2025-02-27T19:42:08.8979260Z     [7m165[0m     eventManager.initialize(store);
2025-02-27T19:42:08.8979763Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.8980082Z 
2025-02-27T19:42:08.8980411Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.8981590Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.8982193Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.8982977Z         'tutorial' is declared here.
2025-02-27T19:42:08.8993880Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m185[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.8995323Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.8999274Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.9000235Z 
2025-02-27T19:42:08.9000575Z     [7m185[0m     eventManager.initialize(store);
2025-02-27T19:42:08.9001106Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.9001361Z 
2025-02-27T19:42:08.9001688Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9003015Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9003611Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9004293Z         'tutorial' is declared here.
2025-02-27T19:42:08.9015524Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m226[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.9017161Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.9020639Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.9021795Z 
2025-02-27T19:42:08.9022140Z     [7m226[0m     eventManager.initialize(store);
2025-02-27T19:42:08.9022597Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.9022914Z 
2025-02-27T19:42:08.9023248Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9024338Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9024937Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9025761Z         'tutorial' is declared here.
2025-02-27T19:42:08.9036793Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m258[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.9038392Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.9042022Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.9043045Z 
2025-02-27T19:42:08.9043386Z     [7m258[0m     eventManager.initialize(store);
2025-02-27T19:42:08.9043860Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.9044169Z 
2025-02-27T19:42:08.9044503Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9045702Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9046443Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9047230Z         'tutorial' is declared here.
2025-02-27T19:42:08.9058163Z     [96msrc/systems/__tests__/eventManager.test.ts[0m:[93m284[0m:[93m29[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.9059621Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.9063442Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; structures: StructuresState; game: GameState; tasks: TasksState; events: EventsState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.9064456Z 
2025-02-27T19:42:08.9064790Z     [7m284[0m     eventManager.initialize(store);
2025-02-27T19:42:08.9065356Z     [7m   [0m [91m                            ~~~~~[0m
2025-02-27T19:42:08.9065649Z 
2025-02-27T19:42:08.9066113Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9067309Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9067907Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9068557Z         'tutorial' is declared here.
2025-02-27T19:42:08.9069963Z 
2025-02-27T19:42:08.9070251Z FAIL src/systems/__tests__/gameLoop.test.ts
2025-02-27T19:42:08.9070782Z   ● Test suite failed to run
2025-02-27T19:42:08.9071030Z 
2025-02-27T19:42:08.9081616Z     [96msrc/systems/__tests__/gameLoop.test.ts[0m:[93m87[0m:[93m25[0m - [91merror[0m[90m TS2345: [0mArgument of type 'EnhancedStore<{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }, UnknownAction, Tuple<...>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-27T19:42:08.9083071Z       The types returned by 'getState()' are incompatible between these types.
2025-02-27T19:42:08.9086901Z         Property 'tutorial' is missing in type '{ resources: ResourcesState; game: GameState; structures: StructuresState; events: EventsState; tasks: TasksState; progression: ProgressionState; }' but required in type 'RootState'.
2025-02-27T19:42:08.9087943Z 
2025-02-27T19:42:08.9088260Z     [7m87[0m     gameLoop.initialize(store);
2025-02-27T19:42:08.9088729Z     [7m  [0m [91m                        ~~~~~[0m
2025-02-27T19:42:08.9089030Z 
2025-02-27T19:42:08.9089357Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9090478Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9091077Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9091856Z         'tutorial' is declared here.
2025-02-27T19:42:08.9092123Z 
2025-02-27T19:42:08.9093899Z FAIL src/gameCore.integration.test.tsx
2025-02-27T19:42:08.9095808Z   ● Game Core Systems Integration › Building purchase consumes resources correctly
2025-02-27T19:42:08.9096553Z 
2025-02-27T19:42:08.9097313Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:42:08.9097794Z 
2025-02-27T19:42:08.9098037Z     [0m [90m 165 |[39m     
2025-02-27T19:42:08.9100477Z      [90m 166 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.9103297Z     [31m[1m>[22m[39m[90m 167 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.9104424Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.9104938Z      [90m 168 |[39m     
2025-02-27T19:42:08.9107506Z      [90m 169 |[39m     [90m// If building doesn't exist or is not unlocked, return false[39m
2025-02-27T19:42:08.9109983Z      [90m 170 |[39m     [36mif[39m ([33m![39mbuilding [33m||[39m [33m![39mbuilding[33m.[39munlocked) {[0m
2025-02-27T19:42:08.9110417Z 
2025-02-27T19:42:08.9111386Z       at BuildingManager.canPurchaseBuilding (src/systems/buildingManager.ts:167:38)
2025-02-27T19:42:08.9113089Z       at BuildingManager.purchaseBuilding (src/systems/buildingManager.ts:194:58)
2025-02-27T19:42:08.9114372Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:171:36)
2025-02-27T19:42:08.9114789Z 
2025-02-27T19:42:08.9116594Z   ● Game Core Systems Integration › Building level affects production calculation
2025-02-27T19:42:08.9117050Z 
2025-02-27T19:42:08.9117863Z     TypeError: Cannot read properties of undefined (reading 'communityGarden')
2025-02-27T19:42:08.9118343Z 
2025-02-27T19:42:08.9118569Z     [0m [90m 274 |[39m     
2025-02-27T19:42:08.9121131Z      [90m 275 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.9123997Z     [31m[1m>[22m[39m[90m 276 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.9125024Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.9125545Z      [90m 277 |[39m     
2025-02-27T19:42:08.9127129Z      [90m 278 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.9128207Z      [90m 279 |[39m       [36mreturn[39m {}[33m;[39m[0m
2025-02-27T19:42:08.9128536Z 
2025-02-27T19:42:08.9130203Z       at BuildingManager.calculateUpgradeCost (src/systems/buildingManager.ts:276:38)
2025-02-27T19:42:08.9131365Z       at Object.<anonymous> (src/gameCore.integration.test.tsx:209:41)
2025-02-27T19:42:08.9131795Z 
2025-02-27T19:42:08.9132258Z FAIL src/state/selectors.test.ts
2025-02-27T19:42:08.9132939Z   ● Test suite failed to run
2025-02-27T19:42:08.9133192Z 
2025-02-27T19:42:08.9147736Z     [96msrc/state/selectors.test.ts[0m:[93m94[0m:[93m32[0m - [91merror[0m[90m TS2352: [0mConversion of type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' to type 'RootState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-27T19:42:08.9154168Z       Property 'tutorial' is missing in type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; tasks: { ...; }; events: { ...; }; progression: { ...; }; }' but required in type 'RootState'.
2025-02-27T19:42:08.9155771Z 
2025-02-27T19:42:08.9156308Z     [7m 94[0m   const mockState: RootState = {
2025-02-27T19:42:08.9156916Z     [7m   [0m [91m                               ~[0m
2025-02-27T19:42:08.9157429Z     [7m 95[0m     resources: {
2025-02-27T19:42:08.9157912Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:08.9158330Z     [7m...[0m 
2025-02-27T19:42:08.9158862Z     [7m163[0m     }
2025-02-27T19:42:08.9159156Z     [7m   [0m [91m~~~~~[0m
2025-02-27T19:42:08.9159422Z     [7m164[0m   } as RootState;
2025-02-27T19:42:08.9161213Z     [7m   [0m [91m~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:08.9161499Z 
2025-02-27T19:42:08.9162201Z       [96msrc/state/store.ts[0m:[93m58[0m:[93m3[0m
2025-02-27T19:42:08.9163636Z         [7m58[0m   tutorial: ReturnType<typeof tutorialReducer>,
2025-02-27T19:42:08.9164248Z         [7m  [0m [96m  ~~~~~~~~[0m
2025-02-27T19:42:08.9164972Z         'tutorial' is declared here.
2025-02-27T19:42:08.9165239Z 
2025-02-27T19:42:08.9166173Z FAIL src/workers.integration.test.tsx
2025-02-27T19:42:08.9168389Z   ● Worker System Integration Test › WorkerManager can assign and manage workers
2025-02-27T19:42:08.9168824Z 
2025-02-27T19:42:08.9169491Z     TypeError: Cannot read properties of undefined (reading 'building1')
2025-02-27T19:42:08.9169943Z 
2025-02-27T19:42:08.9170172Z     [0m [90m 190 |[39m     
2025-02-27T19:42:08.9172642Z      [90m 191 |[39m     [36mconst[39m state [33m=[39m [36mthis[39m[33m.[39mgetState()[33m;[39m
2025-02-27T19:42:08.9175452Z     [31m[1m>[22m[39m[90m 192 |[39m     [36mconst[39m building [33m=[39m state[33m.[39mstructures[buildingId][33m;[39m
2025-02-27T19:42:08.9176720Z      [90m     |[39m                                      [31m[1m^[22m[39m
2025-02-27T19:42:08.9177235Z      [90m 193 |[39m     
2025-02-27T19:42:08.9178684Z      [90m 194 |[39m     [36mif[39m ([33m![39mbuilding) {
2025-02-27T19:42:08.9180243Z      [90m 195 |[39m       [36mreturn[39m [36mfalse[39m[33m;[39m[0m
2025-02-27T19:42:08.9180606Z 
2025-02-27T19:42:08.9182052Z       at WorkerManager.assignWorkersToBuilding (src/systems/workerManager.ts:192:38)
2025-02-27T19:42:08.9183144Z       at Object.<anonymous> (src/workers.integration.test.tsx:105:19)
2025-02-27T19:42:08.9183561Z 
2025-02-27T19:42:08.9184422Z FAIL src/systems/__tests__/oppressionSystem.test.ts
2025-02-27T19:42:08.9186706Z   ● Oppression System › oppression resource should generate at the specified rate
2025-02-27T19:42:08.9187169Z 
2025-02-27T19:42:08.9187695Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:42:08.9188123Z 
2025-02-27T19:42:08.9188353Z     [0m [90m 178 |[39m     
2025-02-27T19:42:08.9191029Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:42:08.9198073Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:42:08.9199573Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:42:08.9200107Z      [90m 181 |[39m     
2025-02-27T19:42:08.9200520Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:42:08.9201784Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:42:08.9202227Z 
2025-02-27T19:42:08.9203335Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:42:08.9205137Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:67:21)
2025-02-27T19:42:08.9205637Z 
2025-02-27T19:42:08.9206899Z   ● Oppression System › oppression should continue to generate in multiple ticks
2025-02-27T19:42:08.9207371Z 
2025-02-27T19:42:08.9208102Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:42:08.9208542Z 
2025-02-27T19:42:08.9208768Z     [0m [90m 178 |[39m     
2025-02-27T19:42:08.9211591Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:42:08.9218280Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:42:08.9219950Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:42:08.9220474Z      [90m 181 |[39m     
2025-02-27T19:42:08.9220966Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:42:08.9222627Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:42:08.9223064Z 
2025-02-27T19:42:08.9224025Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:42:08.9225801Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:85:23)
2025-02-27T19:42:08.9226458Z 
2025-02-27T19:42:08.9228164Z   ● Oppression System › oppression should generate even if its perSecond property is modified
2025-02-27T19:42:08.9228633Z 
2025-02-27T19:42:08.9228990Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:42:08.9229429Z 
2025-02-27T19:42:08.9229673Z     [0m [90m 178 |[39m     
2025-02-27T19:42:08.9232429Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:42:08.9239298Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:42:08.9240754Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:42:08.9241251Z      [90m 181 |[39m     
2025-02-27T19:42:08.9241777Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:42:08.9243392Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:42:08.9243823Z 
2025-02-27T19:42:08.9244772Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:42:08.9246743Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:107:21)
2025-02-27T19:42:08.9247243Z 
2025-02-27T19:42:08.9248452Z   ● Oppression System › oppression generation should scale with time delta correctly
2025-02-27T19:42:08.9248909Z 
2025-02-27T19:42:08.9249586Z     TypeError: Cannot read properties of undefined (reading 'byId')
2025-02-27T19:42:08.9250004Z 
2025-02-27T19:42:08.9250229Z     [0m [90m 178 |[39m     
2025-02-27T19:42:08.9253235Z      [90m 179 |[39m     [90m// Special handling for oppression resource - always ensure it's generated[39m
2025-02-27T19:42:08.9259787Z     [31m[1m>[22m[39m[90m 180 |[39m     [36mconst[39m oppression [33m=[39m resources[33m.[39mbyId [33m?[39m resources[33m.[39mbyId[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m] [33m:[39m resources[[33mResourceId[39m[33m.[39m[33mOPPRESSION[39m][33m;[39m
2025-02-27T19:42:08.9261258Z      [90m     |[39m                                  [31m[1m^[22m[39m
2025-02-27T19:42:08.9261765Z      [90m 181 |[39m     
2025-02-27T19:42:08.9262292Z      [90m 182 |[39m     [36mif[39m (oppression) {
2025-02-27T19:42:08.9264075Z      [90m 183 |[39m       [90m// Get the oppression rate from game balance config[39m[0m
2025-02-27T19:42:08.9264513Z 
2025-02-27T19:42:08.9265379Z       at ResourceManager.updateResources (src/systems/resourceManager.ts:180:34)
2025-02-27T19:42:08.9267346Z       at Object.<anonymous> (src/systems/__tests__/oppressionSystem.test.ts:127:23)
2025-02-27T19:42:08.9267837Z 
2025-02-27T19:42:08.9268074Z FAIL src/components/App.test.tsx
2025-02-27T19:42:08.9268559Z   ● Test suite failed to run
2025-02-27T19:42:08.9268801Z 
2025-02-27T19:42:08.9272875Z     [96msrc/managers/TutorialManager.ts[0m:[93m3[0m:[93m10[0m - [91merror[0m[90m TS2305: [0mModule '"../state/store"' has no exported member 'AppState'.
2025-02-27T19:42:08.9273698Z 
2025-02-27T19:42:08.9274044Z     [7m3[0m import { AppState } from '../state/store';
2025-02-27T19:42:08.9274739Z     [7m [0m [91m         ~~~~~~~~[0m
2025-02-27T19:42:08.9280475Z     [96msrc/managers/TutorialManager.ts[0m:[93m79[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:08.9281424Z 
2025-02-27T19:42:08.9281684Z     [7m79[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:42:08.9282414Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:08.9288300Z     [96msrc/managers/TutorialManager.ts[0m:[93m99[0m:[93m24[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:08.9289353Z 
2025-02-27T19:42:08.9289588Z     [7m99[0m       const tutorial = tutorialContent[currentStep];
2025-02-27T19:42:08.9290279Z     [7m  [0m [91m                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:08.9296557Z     [96msrc/managers/TutorialManager.ts[0m:[93m155[0m:[93m14[0m - [91merror[0m[90m TS7053: [0mElement implicitly has an 'any' type because expression of type 'any' can't be used to index type 'Record<TutorialStep, TutorialContent>'.
2025-02-27T19:42:08.9297431Z 
2025-02-27T19:42:08.9297796Z     [7m155[0m       return tutorialContent[currentStep];
2025-02-27T19:42:08.9298439Z     [7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
2025-02-27T19:42:08.9298635Z 
2025-02-27T19:42:08.9298643Z 
2025-02-27T19:42:08.9301396Z Test Suites: 13 failed, 45 passed, 58 total
2025-02-27T19:42:08.9302047Z Tests:       60 failed, 4 skipped, 299 passed, 363 total
2025-02-27T19:42:08.9302373Z Snapshots:   0 total
2025-02-27T19:42:08.9302583Z Time:        30.8 s
2025-02-27T19:42:08.9302787Z Ran all test suites.
2025-02-27T19:42:08.9494240Z ##[error]Process completed with exit code 1.
2025-02-27T19:42:08.9601285Z Post job cleanup.
2025-02-27T19:42:09.0353329Z [command]/usr/bin/git version
2025-02-27T19:42:09.0389436Z git version 2.48.1
2025-02-27T19:42:09.0432578Z Temporarily overriding HOME='/home/runner/work/_temp/5c88be6e-3858-480d-a7b9-5a18eaba7e6b' before making global git config changes
2025-02-27T19:42:09.0433570Z Adding repository directory to the temporary git global config as a safe directory
2025-02-27T19:42:09.0436630Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-27T19:42:09.0471941Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-27T19:42:09.0504948Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-27T19:42:09.0741898Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-27T19:42:09.0765105Z http.https://github.com/.extraheader
2025-02-27T19:42:09.0777525Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-02-27T19:42:09.0808984Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-27T19:42:09.1147624Z Cleaning up orphan processes
