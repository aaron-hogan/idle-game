2025-02-26T21:47:10.3938065Z Current runner version: '2.322.0'
2025-02-26T21:47:10.3963107Z ##[group]Operating System
2025-02-26T21:47:10.3963981Z Ubuntu
2025-02-26T21:47:10.3964563Z 24.04.2
2025-02-26T21:47:10.3965386Z LTS
2025-02-26T21:47:10.3965979Z ##[endgroup]
2025-02-26T21:47:10.3966510Z ##[group]Runner Image
2025-02-26T21:47:10.3967112Z Image: ubuntu-24.04
2025-02-26T21:47:10.3967719Z Version: 20250223.1.0
2025-02-26T21:47:10.3968783Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20250223.1/images/ubuntu/Ubuntu2404-Readme.md
2025-02-26T21:47:10.3970150Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20250223.1
2025-02-26T21:47:10.3971169Z ##[endgroup]
2025-02-26T21:47:10.3971695Z ##[group]Runner Image Provisioner
2025-02-26T21:47:10.3972308Z 2.0.422.1
2025-02-26T21:47:10.3972903Z ##[endgroup]
2025-02-26T21:47:10.3974007Z ##[group]GITHUB_TOKEN Permissions
2025-02-26T21:47:10.3976319Z Contents: read
2025-02-26T21:47:10.3976918Z Metadata: read
2025-02-26T21:47:10.3977729Z Packages: read
2025-02-26T21:47:10.3978340Z ##[endgroup]
2025-02-26T21:47:10.3981435Z Secret source: Actions
2025-02-26T21:47:10.3982502Z Prepare workflow directory
2025-02-26T21:47:10.4291750Z Prepare all required actions
2025-02-26T21:47:10.4328894Z Getting action download info
2025-02-26T21:47:10.6299758Z Download action repository 'actions/checkout@v4' (SHA:11bd71901bbe5b1630ceea73d27597364c9af683)
2025-02-26T21:47:10.7145246Z Download action repository 'actions/setup-node@v3' (SHA:1a4442cacd436585916779262731d5b162bc6ec7)
2025-02-26T21:47:10.8049487Z Download action repository 'codecov/codecov-action@v3' (SHA:ab904c41d6ece82784817410c45d8b8c02684457)
2025-02-26T21:47:11.0906627Z Complete job name: Build and Test
2025-02-26T21:47:11.1680314Z ##[group]Run actions/checkout@v4
2025-02-26T21:47:11.1681516Z with:
2025-02-26T21:47:11.1682428Z   fetch-depth: 0
2025-02-26T21:47:11.1683283Z   repository: aaron-hogan/idle-game
2025-02-26T21:47:11.1684480Z   token: ***
2025-02-26T21:47:11.1685539Z   ssh-strict: true
2025-02-26T21:47:11.1686297Z   ssh-user: git
2025-02-26T21:47:11.1686785Z   persist-credentials: true
2025-02-26T21:47:11.1687302Z   clean: true
2025-02-26T21:47:11.1687773Z   sparse-checkout-cone-mode: true
2025-02-26T21:47:11.1688331Z   fetch-tags: false
2025-02-26T21:47:11.1688795Z   show-progress: true
2025-02-26T21:47:11.1689267Z   lfs: false
2025-02-26T21:47:11.1689705Z   submodules: false
2025-02-26T21:47:11.1690163Z   set-safe-directory: true
2025-02-26T21:47:11.1691055Z ##[endgroup]
2025-02-26T21:47:11.3977224Z Syncing repository: aaron-hogan/idle-game
2025-02-26T21:47:11.3979043Z ##[group]Getting Git version info
2025-02-26T21:47:11.3979820Z Working directory is '/home/runner/work/idle-game/idle-game'
2025-02-26T21:47:11.3980942Z [command]/usr/bin/git version
2025-02-26T21:47:11.4086134Z git version 2.48.1
2025-02-26T21:47:11.4129234Z ##[endgroup]
2025-02-26T21:47:11.4147648Z Temporarily overriding HOME='/home/runner/work/_temp/03ae7223-7a7e-441a-b938-f6b23bc7227d' before making global git config changes
2025-02-26T21:47:11.4149377Z Adding repository directory to the temporary git global config as a safe directory
2025-02-26T21:47:11.4155274Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-26T21:47:11.4197190Z Deleting the contents of '/home/runner/work/idle-game/idle-game'
2025-02-26T21:47:11.4201478Z ##[group]Initializing the repository
2025-02-26T21:47:11.4207806Z [command]/usr/bin/git init /home/runner/work/idle-game/idle-game
2025-02-26T21:47:11.4286737Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-02-26T21:47:11.4287829Z hint: is subject to change. To configure the initial branch name to use in all
2025-02-26T21:47:11.4288881Z hint: of your new repositories, which will suppress this warning, call:
2025-02-26T21:47:11.4289641Z hint:
2025-02-26T21:47:11.4290213Z hint: 	git config --global init.defaultBranch <name>
2025-02-26T21:47:11.4290853Z hint:
2025-02-26T21:47:11.4291466Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-02-26T21:47:11.4292734Z hint: 'development'. The just-created branch can be renamed via this command:
2025-02-26T21:47:11.4293523Z hint:
2025-02-26T21:47:11.4293964Z hint: 	git branch -m <name>
2025-02-26T21:47:11.4296451Z Initialized empty Git repository in /home/runner/work/idle-game/idle-game/.git/
2025-02-26T21:47:11.4309230Z [command]/usr/bin/git remote add origin https://github.com/aaron-hogan/idle-game
2025-02-26T21:47:11.4413516Z ##[endgroup]
2025-02-26T21:47:11.4415083Z ##[group]Disabling automatic garbage collection
2025-02-26T21:47:11.4416323Z [command]/usr/bin/git config --local gc.auto 0
2025-02-26T21:47:11.4418847Z ##[endgroup]
2025-02-26T21:47:11.4420418Z ##[group]Setting up auth
2025-02-26T21:47:11.4421819Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-26T21:47:11.4427436Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-26T21:47:11.4780313Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-26T21:47:11.4811410Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-26T21:47:11.5055467Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-02-26T21:47:11.5100855Z ##[endgroup]
2025-02-26T21:47:11.5109875Z ##[group]Fetching the repository
2025-02-26T21:47:11.5116431Z [command]/usr/bin/git -c protocol.version=2 fetch --prune --no-recurse-submodules origin +refs/heads/*:refs/remotes/origin/* +refs/tags/*:refs/tags/* +b57897da22d749ed8718ff83ad265b808167b64c:refs/remotes/pull/21/merge
2025-02-26T21:47:11.8264456Z From https://github.com/aaron-hogan/idle-game
2025-02-26T21:47:11.8266637Z  * [new branch]      archive/day-timer-fix-feb2025            -> origin/archive/day-timer-fix-feb2025
2025-02-26T21:47:11.8269056Z  * [new branch]      docs/enhance-git-documentation           -> origin/docs/enhance-git-documentation
2025-02-26T21:47:11.8271240Z  * [new branch]      docs/improve-branch-protection           -> origin/docs/improve-branch-protection
2025-02-26T21:47:11.8273731Z  * [new branch]      feature/game-balance-config              -> origin/feature/game-balance-config
2025-02-26T21:47:11.8275999Z  * [new branch]      feature/github-actions-ci                -> origin/feature/github-actions-ci
2025-02-26T21:47:11.8278341Z  * [new branch]      fix/changelog-versioning                 -> origin/fix/changelog-versioning
2025-02-26T21:47:11.8280866Z  * [new branch]      fix/oppression-rate-display              -> origin/fix/oppression-rate-display
2025-02-26T21:47:11.8282995Z  * [new branch]      main                                     -> origin/main
2025-02-26T21:47:11.8285909Z  * [new branch]      test/github-actions-hello-world          -> origin/test/github-actions-hello-world
2025-02-26T21:47:11.8288804Z  * [new ref]         b57897da22d749ed8718ff83ad265b808167b64c -> pull/21/merge
2025-02-26T21:47:11.8327373Z ##[endgroup]
2025-02-26T21:47:11.8329730Z ##[group]Determining the checkout info
2025-02-26T21:47:11.8330560Z ##[endgroup]
2025-02-26T21:47:11.8333539Z [command]/usr/bin/git sparse-checkout disable
2025-02-26T21:47:11.8372701Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2025-02-26T21:47:11.8399673Z ##[group]Checking out the ref
2025-02-26T21:47:11.8402930Z [command]/usr/bin/git checkout --progress --force refs/remotes/pull/21/merge
2025-02-26T21:47:11.8700830Z Note: switching to 'refs/remotes/pull/21/merge'.
2025-02-26T21:47:11.8701604Z 
2025-02-26T21:47:11.8702205Z You are in 'detached HEAD' state. You can look around, make experimental
2025-02-26T21:47:11.8703625Z changes and commit them, and you can discard any commits you make in this
2025-02-26T21:47:11.8705556Z state without impacting any branches by switching back to a branch.
2025-02-26T21:47:11.8706373Z 
2025-02-26T21:47:11.8706734Z If you want to create a new branch to retain commits you create, you may
2025-02-26T21:47:11.8707548Z do so (now or later) by using -c with the switch command. Example:
2025-02-26T21:47:11.8708015Z 
2025-02-26T21:47:11.8708230Z   git switch -c <new-branch-name>
2025-02-26T21:47:11.8708586Z 
2025-02-26T21:47:11.8708906Z Or undo this operation with:
2025-02-26T21:47:11.8709404Z 
2025-02-26T21:47:11.8709689Z   git switch -
2025-02-26T21:47:11.8710027Z 
2025-02-26T21:47:11.8710458Z Turn off this advice by setting config variable advice.detachedHead to false
2025-02-26T21:47:11.8711021Z 
2025-02-26T21:47:11.8711653Z HEAD is now at b57897d Merge be2afa3623a1f9b0632105e166dfb6dcf9b12727 into a9a4fabd3948c290ec46e6ee11a7a7a40b00e528
2025-02-26T21:47:11.8713790Z ##[endgroup]
2025-02-26T21:47:11.8742852Z [command]/usr/bin/git log -1 --format=%H
2025-02-26T21:47:11.8764062Z b57897da22d749ed8718ff83ad265b808167b64c
2025-02-26T21:47:11.8986214Z ##[group]Run actions/setup-node@v3
2025-02-26T21:47:11.8986797Z with:
2025-02-26T21:47:11.8987197Z   node-version: 20
2025-02-26T21:47:11.8987625Z   cache: npm
2025-02-26T21:47:11.8988038Z   always-auth: false
2025-02-26T21:47:11.8988491Z   check-latest: false
2025-02-26T21:47:11.8989085Z   token: ***
2025-02-26T21:47:11.8989491Z ##[endgroup]
2025-02-26T21:47:12.0776166Z Found in cache @ /opt/hostedtoolcache/node/20.18.3/x64
2025-02-26T21:47:12.0782174Z ##[group]Environment details
2025-02-26T21:47:12.4200320Z node: v20.18.3
2025-02-26T21:47:12.4202801Z npm: 10.8.2
2025-02-26T21:47:12.4203890Z yarn: 1.22.22
2025-02-26T21:47:12.4206438Z ##[endgroup]
2025-02-26T21:47:12.4214215Z [command]/opt/hostedtoolcache/node/20.18.3/x64/bin/npm config get cache
2025-02-26T21:47:12.5322053Z /home/runner/.npm
2025-02-26T21:47:12.6772003Z npm cache is not found
2025-02-26T21:47:12.6935268Z ##[group]Run npm ci --prefer-offline
2025-02-26T21:47:12.6936588Z [36;1mnpm ci --prefer-offline[0m
2025-02-26T21:47:12.6991667Z shell: /usr/bin/bash -e {0}
2025-02-26T21:47:12.6992759Z ##[endgroup]
2025-02-26T21:47:15.8465993Z npm warn deprecated react-testing-library@8.0.1: 🚨  react-testing-library has moved to @testing-library/react. Please uninstall react-testing-library and install @testing-library/react instead, or use an older version of react-testing-library. Learn more about this change here: https://github.com/testing-library/dom-testing-library/issues/260 Thanks! :)
2025-02-26T21:47:16.5260146Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2025-02-26T21:47:16.6744218Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2025-02-26T21:47:17.0583058Z npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
2025-02-26T21:47:17.3856281Z npm warn deprecated abab@2.0.6: Use your platform's native atob() and btoa() methods instead
2025-02-26T21:47:20.4508402Z 
2025-02-26T21:47:20.4509454Z added 900 packages, and audited 901 packages in 8s
2025-02-26T21:47:20.4509939Z 
2025-02-26T21:47:20.4510378Z 193 packages are looking for funding
2025-02-26T21:47:20.4510932Z   run `npm fund` for details
2025-02-26T21:47:20.4527460Z 
2025-02-26T21:47:20.4528114Z found 0 vulnerabilities
2025-02-26T21:47:20.4882163Z ##[group]Run echo "Skipping linting due to ESLint configuration issues with ES modules"
2025-02-26T21:47:20.4882812Z [36;1mecho "Skipping linting due to ESLint configuration issues with ES modules"[0m
2025-02-26T21:47:20.4883344Z [36;1mecho "This step will be re-enabled once ESLint configuration is fixed"[0m
2025-02-26T21:47:20.4934569Z shell: /usr/bin/bash -e {0}
2025-02-26T21:47:20.4935133Z ##[endgroup]
2025-02-26T21:47:20.5003874Z Skipping linting due to ESLint configuration issues with ES modules
2025-02-26T21:47:20.5005373Z This step will be re-enabled once ESLint configuration is fixed
2025-02-26T21:47:20.5032386Z ##[group]Run npm run typecheck
2025-02-26T21:47:20.5032689Z [36;1mnpm run typecheck[0m
2025-02-26T21:47:20.5073689Z shell: /usr/bin/bash -e {0}
2025-02-26T21:47:20.5073950Z ##[endgroup]
2025-02-26T21:47:20.6225668Z 
2025-02-26T21:47:20.6226092Z > idle-game@0.1.0 typecheck
2025-02-26T21:47:20.6226614Z > tsc --noEmit
2025-02-26T21:47:20.6226877Z 
2025-02-26T21:47:25.6232697Z ##[error]src/components/resources/ResourceGenerators.tsx(49,9): error TS1345: An expression of type 'void' cannot be tested for truthiness.
2025-02-26T21:47:25.6245146Z ##[error]src/core/GameManager.test.ts(105,25): error TS2352: Conversion of type 'ActionCreatorWithPayload<number, "game/addPlayTime">' to type 'Mock<any, any, any>' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-26T21:47:25.6248581Z   Type 'ActionCreatorWithPayload<number, "game/addPlayTime">' is missing the following properties from type 'Mock<any, any, any>': getMockName, mock, mockClear, mockReset, and 13 more.
2025-02-26T21:47:25.6251318Z ##[error]src/debug/deprecated/DebugPanel.tsx(2,48): error TS2307: Cannot find module '../state/hooks' or its corresponding type declarations.
2025-02-26T21:47:25.6254197Z ##[error]src/debug/deprecated/DebugPanel.tsx(3,58): error TS2307: Cannot find module '../state/selectors' or its corresponding type declarations.
2025-02-26T21:47:25.6257240Z ##[error]src/debug/deprecated/DebugPanel.tsx(4,26): error TS2307: Cannot find module '../core/GameLoop' or its corresponding type declarations.
2025-02-26T21:47:25.6260212Z ##[error]src/debug/deprecated/DebugPanel.tsx(5,34): error TS2307: Cannot find module '../state/gameSlice' or its corresponding type declarations.
2025-02-26T21:47:25.6263168Z ##[error]src/debug/deprecated/TickRateChecker.tsx(2,26): error TS2307: Cannot find module '../core/GameLoop' or its corresponding type declarations.
2025-02-26T21:47:25.6266374Z ##[error]src/debug/deprecated/TickRateChecker.tsx(3,32): error TS2307: Cannot find module '../state/hooks' or its corresponding type declarations.
2025-02-26T21:47:25.6269374Z ##[error]src/debug/deprecated/TickRateChecker.tsx(4,58): error TS2307: Cannot find module '../state/selectors' or its corresponding type declarations.
2025-02-26T21:47:25.6272352Z ##[error]src/debug/deprecated/TickRateTest.tsx(2,48): error TS2307: Cannot find module '../state/hooks' or its corresponding type declarations.
2025-02-26T21:47:25.6275509Z ##[error]src/debug/deprecated/TickRateTest.tsx(3,37): error TS2307: Cannot find module '../state/selectors' or its corresponding type declarations.
2025-02-26T21:47:25.6278429Z ##[error]src/debug/deprecated/TickRateTest.tsx(4,28): error TS2307: Cannot find module '../utils/timeUtils' or its corresponding type declarations.
2025-02-26T21:47:25.6281312Z ##[error]src/debug/deprecated/TickRateTest.tsx(5,26): error TS2307: Cannot find module '../core/GameLoop' or its corresponding type declarations.
2025-02-26T21:47:25.6284555Z ##[error]src/debug/tabs/GameLoopDebugTab.tsx(159,7): error TS2322: Type '"special"' is not assignable to type '"neutral" | "good" | "warning" | "bad" | undefined'.
2025-02-26T21:47:25.6287897Z ##[error]src/debug/tabs/GameLoopDebugTab.tsx(285,7): error TS2322: Type '"special"' is not assignable to type '"neutral" | "good" | "warning" | "bad" | undefined'.
2025-02-26T21:47:25.6293141Z ##[error]src/gameCore.integration.test.tsx(29,9): error TS2322: Type 'Reducer<GameState>' is not assignable to type 'Reducer<GameState, UnknownAction, { gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; ... 4 more ...; startDate: number; }>'.
2025-02-26T21:47:25.6296108Z   Types of parameters 'state' and 'state' are incompatible.
2025-02-26T21:47:25.6299177Z     Type 'GameState | { gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; offlineProgressEnabled: boolean; lastSaveTimestamp: number; gameStartTimestamp: number; totalPlayTime: number; startDate: number; } | undefined' is not assignable to type 'GameState | undefined'.
2025-02-26T21:47:25.6303819Z       Type '{ gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; offlineProgressEnabled: boolean; lastSaveTimestamp: number; gameStartTimestamp: number; totalPlayTime: number; startDate: number; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6307098Z ##[error]src/patches/resourceTickFix.ts(87,24): error TS2769: No overload matches this call.
2025-02-26T21:47:25.6308833Z   Overload 1 of 2, '(id: number | undefined): void', gave the following error.
2025-02-26T21:47:25.6309874Z     Argument of type 'number | null' is not assignable to parameter of type 'number | undefined'.
2025-02-26T21:47:25.6310810Z       Type 'null' is not assignable to type 'number | undefined'.
2025-02-26T21:47:25.6311841Z   Overload 2 of 2, '(intervalId: string | number | Timeout | undefined): void', gave the following error.
2025-02-26T21:47:25.6313141Z     Argument of type 'number | null' is not assignable to parameter of type 'string | number | Timeout | undefined'.
2025-02-26T21:47:25.6314288Z       Type 'null' is not assignable to type 'string | number | Timeout | undefined'.
2025-02-26T21:47:25.6318189Z ##[error]src/state/gameSlice.test.ts(34,32): error TS2345: Argument of type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is not assignable to parameter of type 'GameState'.
2025-02-26T21:47:25.6321922Z   Type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6326501Z ##[error]src/state/gameSlice.test.ts(44,32): error TS2345: Argument of type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is not assignable to parameter of type 'GameState'.
2025-02-26T21:47:25.6330271Z   Type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6334886Z ##[error]src/state/gameSlice.test.ts(54,32): error TS2345: Argument of type '{ totalPlayTime: number; gameStage: number; lastSaveTime: any; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is not assignable to parameter of type 'GameState'.
2025-02-26T21:47:25.6338666Z   Type '{ totalPlayTime: number; gameStage: number; lastSaveTime: any; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6343200Z ##[error]src/state/gameSlice.test.ts(60,32): error TS2345: Argument of type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is not assignable to parameter of type 'GameState'.
2025-02-26T21:47:25.6347112Z   Type '{ gameStage: number; lastSaveTime: any; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: any; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6351704Z ##[error]src/state/gameSlice.test.ts(74,32): error TS2345: Argument of type '{ gameStage: number; lastSaveTime: number; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: number; }' is not assignable to parameter of type 'GameState'.
2025-02-26T21:47:25.6355931Z   Type '{ gameStage: number; lastSaveTime: number; totalPlayTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; startDate: number; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6360364Z ##[error]src/state/selectors.test.ts(94,32): error TS2352: Conversion of type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; }' to type 'RootState' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
2025-02-26T21:47:25.6363509Z   Type '{ resources: { 'collective-power': Resource; solidarity: Resource; 'community-trust': Resource; }; structures: { 'union-office': Structure; 'community-center': Structure; 'alternative-media': Structure; }; game: { ...; }; }' is missing the following properties from type 'RootState': tasks, events, progression
2025-02-26T21:47:25.6367582Z ##[error]src/systems/__tests__/gameLoop.test.ts(73,25): error TS2345: Argument of type 'EnhancedStore<{ resources: ResourcesState; game: GameState; structures: StructuresState; }, UnknownAction, Tuple<[StoreEnhancer<{ dispatch: ThunkDispatch<{ ...; }, undefined, UnknownAction>; }>, StoreEnhancer]>>' is not assignable to parameter of type 'Store<RootState, UnknownAction, unknown>'.
2025-02-26T21:47:25.6369536Z   The types returned by 'getState()' are incompatible between these types.
2025-02-26T21:47:25.6370471Z     Type '{ resources: ResourcesState; game: GameState; structures: StructuresState; }' is missing the following properties from type 'RootState': tasks, events, progression
2025-02-26T21:47:25.6373163Z ##[error]src/systems/__tests__/saveManager.test.ts(17,3): error TS2739: Type '{ gameStage: number; lastSaveTime: number; totalPlayTime: number; isRunning: true; tickRate: number; gameTimeScale: number; startDate: number; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6375560Z ##[error]src/systems/gameLoop.test.ts(86,55): error TS2345: Argument of type 'number' is not assignable to parameter of type 'Timeout'.
2025-02-26T21:47:25.6377184Z ##[error]src/systems/gameLoop.test.ts(99,55): error TS2345: Argument of type 'number' is not assignable to parameter of type 'Timeout'.
2025-02-26T21:47:25.6378665Z ##[error]src/systems/gameLoop.ts(534,36): error TS18048: 'DEFAULT_CONFIG.tickInterval' is possibly 'undefined'.
2025-02-26T21:47:25.6379932Z ##[error]src/systems/gameLoop.ts(537,18): error TS2532: Object is possibly 'undefined'.
2025-02-26T21:47:25.6381312Z ##[error]src/systems/gameLoop.ts(562,7): error TS2322: Type 'number | undefined' is not assignable to type 'number'.
2025-02-26T21:47:25.6382356Z   Type 'undefined' is not assignable to type 'number'.
2025-02-26T21:47:25.6383494Z ##[error]src/tests/tickingTest.ts(63,10): error TS2339: Property 'runTickingTest' does not exist on type 'Window & typeof globalThis'.
2025-02-26T21:47:25.6386731Z ##[error]src/utils/__tests__/saveUtils.test.ts(43,3): error TS2739: Type '{ gameStage: number; lastSaveTime: number; totalPlayTime: number; isRunning: true; tickRate: number; gameTimeScale: number; startDate: number; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6390254Z ##[error]src/workers.integration.test.tsx(29,9): error TS2322: Type 'Reducer<GameState>' is not assignable to type 'Reducer<GameState, UnknownAction, { gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; ... 4 more ...; startDate: number; }>'.
2025-02-26T21:47:25.6391901Z   Types of parameters 'state' and 'state' are incompatible.
2025-02-26T21:47:25.6393621Z     Type 'GameState | { gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; offlineProgressEnabled: boolean; lastSaveTimestamp: number; gameStartTimestamp: number; totalPlayTime: number; startDate: number; } | undefined' is not assignable to type 'GameState | undefined'.
2025-02-26T21:47:25.6396408Z       Type '{ gameStage: number; lastTickTimestamp: number; lastSaveTime: number; isRunning: boolean; tickRate: number; gameTimeScale: number; offlineProgressEnabled: boolean; lastSaveTimestamp: number; gameStartTimestamp: number; totalPlayTime: number; startDate: number; }' is missing the following properties from type 'GameState': gameEnded, gameWon, endReason
2025-02-26T21:47:25.6600643Z ##[error]Process completed with exit code 2.
2025-02-26T21:47:25.6668314Z ##[group]Run echo "Running simplified tests to verify Jest environment"
2025-02-26T21:47:25.6669193Z [36;1mecho "Running simplified tests to verify Jest environment"[0m
2025-02-26T21:47:25.6669837Z [36;1mmkdir -p temp/test[0m
2025-02-26T21:47:25.6670320Z [36;1mcat > temp/test/simple.test.js << 'EOF'[0m
2025-02-26T21:47:25.6670856Z [36;1mdescribe('Simple test', () => {[0m
2025-02-26T21:47:25.6671397Z [36;1m  it('verifies Jest is working', () => {[0m
2025-02-26T21:47:25.6671902Z [36;1m    expect(1 + 1).toBe(2);[0m
2025-02-26T21:47:25.6672330Z [36;1m  });[0m
2025-02-26T21:47:25.6672659Z [36;1m  [0m
2025-02-26T21:47:25.6673055Z [36;1m  it('verifies environment variables', () => {[0m
2025-02-26T21:47:25.6673704Z [36;1m    expect(process.env.NODE_ENV).toBeDefined();[0m
2025-02-26T21:47:25.6674274Z [36;1m  });[0m
2025-02-26T21:47:25.6674609Z [36;1m});[0m
2025-02-26T21:47:25.6675179Z [36;1mEOF[0m
2025-02-26T21:47:25.6675518Z [36;1m[0m
2025-02-26T21:47:25.6675795Z [36;1m# Run the simple test[0m
2025-02-26T21:47:25.6676119Z [36;1mnpx jest temp/test/simple.test.js --no-cache[0m
2025-02-26T21:47:25.6676432Z [36;1m[0m
2025-02-26T21:47:25.6676745Z [36;1m# For now, skip the full test suite which has many TypeScript errors[0m
2025-02-26T21:47:25.6677205Z [36;1mecho "Skipping full test suite due to TypeScript issues"[0m
2025-02-26T21:47:25.6677668Z [36;1mecho "Full tests will be re-enabled once TypeScript errors are fixed"[0m
2025-02-26T21:47:25.6722035Z shell: /usr/bin/bash -e {0}
2025-02-26T21:47:25.6722322Z ##[endgroup]
2025-02-26T21:47:25.6785143Z Running simplified tests to verify Jest environment
2025-02-26T21:47:26.0910524Z /home/runner/work/idle-game/idle-game/jest.config.js:1
2025-02-26T21:47:26.0911264Z export default {
2025-02-26T21:47:26.0911662Z ^^^^^^
2025-02-26T21:47:26.0911871Z 
2025-02-26T21:47:26.0912177Z SyntaxError: Unexpected token 'export'
2025-02-26T21:47:26.0912875Z     at wrapSafe (node:internal/modules/cjs/loader:1378:20)
2025-02-26T21:47:26.0913693Z     at Module._compile (node:internal/modules/cjs/loader:1428:41)
2025-02-26T21:47:26.0914558Z     at Module._extensions..js (node:internal/modules/cjs/loader:1548:10)
2025-02-26T21:47:26.0915615Z     at Module.load (node:internal/modules/cjs/loader:1288:32)
2025-02-26T21:47:26.0916364Z     at Module._load (node:internal/modules/cjs/loader:1104:12)
2025-02-26T21:47:26.0917148Z     at Module.require (node:internal/modules/cjs/loader:1311:19)
2025-02-26T21:47:26.0917917Z     at require (node:internal/modules/helpers:179:18)
2025-02-26T21:47:26.0919258Z     at requireOrImportModule (/home/runner/work/idle-game/idle-game/node_modules/jest-util/build/requireOrImportModule.js:44:28)
2025-02-26T21:47:26.0921079Z     at readConfigFileAndSetRootDir (/home/runner/work/idle-game/idle-game/node_modules/jest-config/build/readConfigFileAndSetRootDir.js:112:66)
2025-02-26T21:47:26.0922660Z     at readInitialOptions (/home/runner/work/idle-game/idle-game/node_modules/jest-config/build/index.js:403:60)
2025-02-26T21:47:26.1036733Z ##[error]Process completed with exit code 1.
2025-02-26T21:47:26.1123373Z Post job cleanup.
2025-02-26T21:47:26.2051389Z [command]/usr/bin/git version
2025-02-26T21:47:26.2086580Z git version 2.48.1
2025-02-26T21:47:26.2134177Z Temporarily overriding HOME='/home/runner/work/_temp/769e2397-d765-4f39-9d41-0afc47fe911f' before making global git config changes
2025-02-26T21:47:26.2135601Z Adding repository directory to the temporary git global config as a safe directory
2025-02-26T21:47:26.2139436Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/idle-game/idle-game
2025-02-26T21:47:26.2174364Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-02-26T21:47:26.2206954Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-02-26T21:47:26.2436933Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-02-26T21:47:26.2457347Z http.https://github.com/.extraheader
2025-02-26T21:47:26.2469548Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-02-26T21:47:26.2500176Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-02-26T21:47:26.2817607Z Cleaning up orphan processes
